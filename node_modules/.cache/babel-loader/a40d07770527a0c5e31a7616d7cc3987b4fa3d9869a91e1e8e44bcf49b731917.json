{"ast":null,"code":"// Copyright (c) 2022 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.FilterAnimationControllerFactory = FilterAnimationControllerFactory;\nexports.LayerAnimationControllerFactory = LayerAnimationControllerFactory;\nexports[\"default\"] = BottomWidgetFactory;\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\nvar _taggedTemplateLiteral2 = _interopRequireDefault(require(\"@babel/runtime/helpers/taggedTemplateLiteral\"));\nvar _react = _interopRequireWildcard(require(\"react\"));\nvar _styledComponents = _interopRequireDefault(require(\"styled-components\"));\nvar _timeWidget = _interopRequireDefault(require(\"./filters/time-widget\"));\nvar _animationControl = _interopRequireDefault(require(\"./common/animation-control/animation-control\"));\nvar _animationController = _interopRequireDefault(require(\"./common/animation-control/animation-controller\"));\nvar _constants = require(\"@kepler.gl/constants\");\nvar _utils = require(\"@kepler.gl/utils\");\nvar _styles = require(\"@kepler.gl/styles\");\nvar _templateObject, _templateObject2;\nvar maxWidth = 1080;\nvar BottomWidgetContainer = _styledComponents[\"default\"].div(_templateObject || (_templateObject = (0, _taggedTemplateLiteral2[\"default\"])([\"\\n  display: flex;\\n  flex-direction: column;\\n  padding-top: \", \"px;\\n  padding-right: \", \"px;\\n  padding-bottom: \", \"px;\\n  padding-left: \", \"px;\\n  pointer-events: none !important; /* prevent padding from blocking input */\\n  & > * {\\n    /* all children should allow input */\\n    pointer-events: all;\\n  }\\n  width: \", \"px;\\n  z-index: 1;\\n  \", \"\\n\"])), function (props) {\n  return props.hasPadding ? props.theme.bottomWidgetPaddingTop : 0;\n}, function (props) {\n  return props.hasPadding ? props.theme.bottomWidgetPaddingRight : 0;\n}, function (props) {\n  return props.hasPadding ? props.theme.bottomWidgetPaddingBottom : 0;\n}, function (props) {\n  return props.hasPadding ? props.theme.bottomWidgetPaddingLeft : 0;\n}, function (props) {\n  return props.width;\n}, _styles.media.portable(_templateObject2 || (_templateObject2 = (0, _taggedTemplateLiteral2[\"default\"])([\"padding: 0;\"]))));\nFilterAnimationControllerFactory.deps = [_animationController[\"default\"]];\nfunction FilterAnimationControllerFactory(AnimationController) {\n  var FilterAnimationController = function FilterAnimationController(_ref) {\n    var filter = _ref.filter,\n      filterIdx = _ref.filterIdx,\n      setFilterAnimationTime = _ref.setFilterAnimationTime,\n      children = _ref.children;\n    var intervalBins = (0, _react.useMemo)(function () {\n      return (0, _utils.getIntervalBins)(filter);\n    }, [filter]);\n    var steps = (0, _react.useMemo)(function () {\n      return intervalBins ? intervalBins.map(function (x) {\n        return x.x0;\n      }) : null;\n    }, [intervalBins]);\n    var updateAnimation = (0, _react.useCallback)(function (value) {\n      switch (filter.animationWindow) {\n        case _constants.ANIMATION_WINDOW.interval:\n          var _idx = value[1];\n          setFilterAnimationTime(filterIdx, 'value', [intervalBins[_idx].x0, intervalBins[_idx].x1 - 1]);\n          break;\n        default:\n          setFilterAnimationTime(filterIdx, 'value', value);\n          break;\n      }\n    }, [filterIdx, intervalBins, filter.animationWindow, setFilterAnimationTime]);\n    return /*#__PURE__*/_react[\"default\"].createElement(AnimationController, {\n      key: \"filter-control\",\n      value: filter.value,\n      domain: filter.domain,\n      speed: filter.speed,\n      isAnimating: filter.isAnimating,\n      animationWindow: filter.animationWindow,\n      steps: steps,\n      updateAnimation: updateAnimation,\n      children: children\n    });\n  };\n  return FilterAnimationController;\n}\nLayerAnimationControllerFactory.deps = [_animationController[\"default\"]];\nfunction LayerAnimationControllerFactory(AnimationController) {\n  var LayerAnimationController = function LayerAnimationController(_ref2) {\n    var animationConfig = _ref2.animationConfig,\n      setLayerAnimationTime = _ref2.setLayerAnimationTime,\n      children = _ref2.children;\n    return /*#__PURE__*/_react[\"default\"].createElement(AnimationController, {\n      key: \"layer-control\",\n      value: Number(animationConfig.currentTime),\n      domain: animationConfig.domain,\n      speed: animationConfig.speed,\n      isAnimating: animationConfig.isAnimating,\n      updateAnimation: setLayerAnimationTime,\n      steps: animationConfig.timeSteps,\n      animationWindow: animationConfig.timeSteps ? _constants.ANIMATION_WINDOW.interval : _constants.ANIMATION_WINDOW.point,\n      children: children\n    });\n  };\n  return LayerAnimationController;\n}\nBottomWidgetFactory.deps = [_timeWidget[\"default\"], _animationControl[\"default\"], FilterAnimationControllerFactory, LayerAnimationControllerFactory];\n/* eslint-disable complexity */\n\nfunction BottomWidgetFactory(TimeWidget, AnimationControl, FilterAnimationController, LayerAnimationController) {\n  var BottomWidget = function BottomWidget(props) {\n    var _uiState$mapControls, _uiState$mapControls$, _uiState$mapControls2, _uiState$mapControls3;\n    var datasets = props.datasets,\n      filters = props.filters,\n      animationConfig = props.animationConfig,\n      visStateActions = props.visStateActions,\n      containerW = props.containerW,\n      uiState = props.uiState,\n      sidePanelWidth = props.sidePanelWidth,\n      layers = props.layers,\n      rootRef = props.rootRef;\n    var activeSidePanel = uiState.activeSidePanel,\n      readOnly = uiState.readOnly;\n    var isOpen = Boolean(activeSidePanel);\n    var enlargedFilterIdx = (0, _react.useMemo)(function () {\n      return filters.findIndex(function (f) {\n        return f.enlarged && f.type === _constants.FILTER_TYPES.timeRange;\n      });\n    }, [filters]);\n    var isMobile = (0, _utils.hasPortableWidth)(_styles.breakPointValues);\n    var animatedFilterIdx = (0, _react.useMemo)(function () {\n      return filters.findIndex(function (f) {\n        return f.isAnimating;\n      });\n    }, [filters]);\n    var animatedFilter = animatedFilterIdx > -1 ? filters[animatedFilterIdx] : null;\n    var isLegendPinned = ((_uiState$mapControls = uiState.mapControls) === null || _uiState$mapControls === void 0 ? void 0 : (_uiState$mapControls$ = _uiState$mapControls.mapLegend) === null || _uiState$mapControls$ === void 0 ? void 0 : _uiState$mapControls$.show) && ((_uiState$mapControls2 = uiState.mapControls) === null || _uiState$mapControls2 === void 0 ? void 0 : (_uiState$mapControls3 = _uiState$mapControls2.mapLegend) === null || _uiState$mapControls3 === void 0 ? void 0 : _uiState$mapControls3.active);\n    var spaceForLegendWidth = isLegendPinned ? _constants.DIMENSIONS.mapControl.width + _constants.DIMENSIONS.mapControl.mapLegend.pinned.right : 0;\n    var enlargedFilterWidth = (isOpen && !isMobile ? containerW - sidePanelWidth : containerW) - spaceForLegendWidth; // show playback control if layers contain trip layer & at least one trip layer is visible\n\n    var animatableLayer = (0, _react.useMemo)(function () {\n      return layers.filter(function (l) {\n        return l.config.animation && l.config.animation.enabled && l.config.isVisible;\n      });\n    }, [layers]);\n    var readyToAnimation = Array.isArray(animationConfig.domain) && Number.isFinite(animationConfig.currentTime); // if animation control is showing, hide time display in time slider\n\n    var showFloatingTimeDisplay = !animatableLayer.length;\n    var showAnimationControl = animatableLayer.length && readyToAnimation && !animationConfig.hideControl;\n    var showTimeWidget = enlargedFilterIdx > -1 && Object.keys(datasets).length > 0; // if filter is not animating, pass in enlarged filter here because\n    // animation controller needs to call reset on it\n\n    var filter = animatedFilter || filters[enlargedFilterIdx];\n    return /*#__PURE__*/_react[\"default\"].createElement(BottomWidgetContainer, {\n      width: Math.min(maxWidth, enlargedFilterWidth),\n      style: {\n        marginRight: spaceForLegendWidth\n      },\n      className: \"bottom-widget--container\",\n      hasPadding: showAnimationControl || showTimeWidget,\n      ref: rootRef\n    }, /*#__PURE__*/_react[\"default\"].createElement(LayerAnimationController, {\n      animationConfig: animationConfig,\n      setLayerAnimationTime: visStateActions.setLayerAnimationTime\n    }, function (isAnimating, start, pause, reset) {\n      return showAnimationControl ? /*#__PURE__*/_react[\"default\"].createElement(AnimationControl, {\n        animationConfig: animationConfig,\n        setLayerAnimationTime: visStateActions.setLayerAnimationTime,\n        updateAnimationSpeed: visStateActions.updateLayerAnimationSpeed,\n        toggleAnimation: visStateActions.toggleLayerAnimation,\n        isAnimatable: !animatedFilter,\n        isAnimating: isAnimating,\n        resetAnimation: reset\n      }) : null;\n    }), filter && /*#__PURE__*/_react[\"default\"].createElement(FilterAnimationController, {\n      filter: filter,\n      filterIdx: animatedFilterIdx > -1 ? animatedFilterIdx : enlargedFilterIdx,\n      setFilterAnimationTime: visStateActions.setFilterAnimationTime\n    }, function (isAnimating, start, pause, resetAnimation) {\n      return showTimeWidget ? /*#__PURE__*/_react[\"default\"].createElement(TimeWidget // TimeWidget uses React.memo, here we pass width\n      // even though it doesnt use it, to force rerender\n      , {\n        filter: filters[enlargedFilterIdx],\n        index: enlargedFilterIdx,\n        datasets: datasets,\n        readOnly: readOnly,\n        showTimeDisplay: showFloatingTimeDisplay,\n        setFilterPlot: visStateActions.setFilterPlot,\n        setFilterAnimationTime: visStateActions.setFilterAnimationTime,\n        setFilterAnimationWindow: visStateActions.setFilterAnimationWindow,\n        toggleAnimation: visStateActions.toggleFilterAnimation,\n        updateAnimationSpeed: visStateActions.updateFilterAnimationSpeed,\n        enlargeFilter: visStateActions.enlargeFilter,\n        resetAnimation: resetAnimation,\n        isAnimatable: !animationConfig || !animationConfig.isAnimating\n      }) : null;\n    }));\n  };\n  /* eslint-disable react/display-name */\n  // @ts-ignore\n\n  return /*#__PURE__*/(0, _react.forwardRef)(function (props, ref) {\n    return /*#__PURE__*/_react[\"default\"].createElement(BottomWidget, (0, _extends2[\"default\"])({}, props, {\n      rootRef: ref\n    }));\n  });\n  /* eslint-enable react/display-name */\n}\n/* eslint-enable complexity */","map":{"version":3,"names":["value","exports","FilterAnimationControllerFactory","BottomWidgetFactory","_taggedTemplateLiteral2","_interopRequireDefault","require","_react","_interopRequireWildcard","_styledComponents","_timeWidget","_animationControl","_animationController","_constants","_utils","_styles","_templateObject","_templateObject2","maxWidth","BottomWidgetContainer","div","props","hasPadding","theme","bottomWidgetPaddingTop","bottomWidgetPaddingRight","bottomWidgetPaddingBottom","bottomWidgetPaddingLeft","width","media","portable","deps","FilterAnimationController","_ref","filter","filterIdx","setFilterAnimationTime","children","intervalBins","useMemo","getIntervalBins","steps","map","x","x0","updateAnimation","useCallback","animationWindow","ANIMATION_WINDOW","interval","_idx","createElement","AnimationController","key","domain","speed","isAnimating","LayerAnimationControllerFactory","LayerAnimationController","_ref2","animationConfig","setLayerAnimationTime","timeSteps","point","filters","TimeWidget","AnimationControl","BottomWidget","_uiState$mapControls","_uiState$mapControls$","_uiState$mapControls2","_uiState$mapControls3","datasets","visStateActions","containerW","uiState","sidePanelWidth","rootRef","activeSidePanel","readOnly","isOpen","Boolean","enlargedFilterIdx","findIndex","f","isMobile","hasPortableWidth","breakPointValues","animatedFilterIdx","animatedFilter","isLegendPinned","mapControls","mapLegend","show","active","spaceForLegendWidth","DIMENSIONS","mapControl","pinned","right","enlargedFilterWidth","animatableLayer","layers","l","config","animation","enabled","isVisible","readyToAnimation","Array","isArray","Number","isFinite","currentTime","showFloatingTimeDisplay","length","showAnimationControl","hideControl","showTimeWidget","Object","keys","Math","min","style","marginRight","className","ref","start","pause","reset","updateAnimationSpeed","updateLayerAnimationSpeed","toggleAnimation","toggleLayerAnimation","isAnimatable","resetAnimation","index","showTimeDisplay","setFilterPlot","setFilterAnimationWindow"],"sources":["/Users/rohinphukan/Desktop/RefugeeWebsite/node_modules/@kepler.gl/components/src/bottom-widget.tsx"],"sourcesContent":["// Copyright (c) 2022 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\nimport React, {useCallback, forwardRef, useMemo} from 'react';\nimport styled from 'styled-components';\nimport TimeWidgetFactory from './filters/time-widget';\nimport AnimationControlFactory from './common/animation-control/animation-control';\nimport AnimationControllerFactory from './common/animation-control/animation-controller';\nimport {ANIMATION_WINDOW, DIMENSIONS, FILTER_TYPES} from '@kepler.gl/constants';\nimport {getIntervalBins, hasPortableWidth} from '@kepler.gl/utils';\nimport {media, breakPointValues} from '@kepler.gl/styles';\nimport {AnimationConfig, TimeRangeFilter} from '@kepler.gl/types';\nimport {bottomWidgetSelector} from './kepler-gl';\n\nconst maxWidth = 1080;\n\ninterface BottomWidgetContainerProps {\n  hasPadding?: boolean;\n  width?: number;\n}\n\nconst BottomWidgetContainer = styled.div<BottomWidgetContainerProps>`\n  display: flex;\n  flex-direction: column;\n  padding-top: ${props => (props.hasPadding ? props.theme.bottomWidgetPaddingTop : 0)}px;\n  padding-right: ${props => (props.hasPadding ? props.theme.bottomWidgetPaddingRight : 0)}px;\n  padding-bottom: ${props => (props.hasPadding ? props.theme.bottomWidgetPaddingBottom : 0)}px;\n  padding-left: ${props => (props.hasPadding ? props.theme.bottomWidgetPaddingLeft : 0)}px;\n  pointer-events: none !important; /* prevent padding from blocking input */\n  & > * {\n    /* all children should allow input */\n    pointer-events: all;\n  }\n  width: ${props => props.width}px;\n  z-index: 1;\n  ${media.portable`padding: 0;`}\n`;\n\ninterface FilterAnimationControllerProps {\n  filter: TimeRangeFilter & {animationWindow?: string};\n  filterIdx: number;\n  setFilterAnimationTime: (idx: number, value: string, a: any[]) => void;\n}\n\nFilterAnimationControllerFactory.deps = [AnimationControllerFactory];\nexport function FilterAnimationControllerFactory(\n  AnimationController: ReturnType<typeof AnimationControllerFactory>\n) {\n  const FilterAnimationController: React.FC<FilterAnimationControllerProps> = ({\n    filter,\n    filterIdx,\n    setFilterAnimationTime,\n    children\n  }) => {\n    const intervalBins = useMemo(() => getIntervalBins(filter), [filter]);\n\n    const steps = useMemo(() => (intervalBins ? intervalBins.map(x => x.x0) : null), [\n      intervalBins\n    ]);\n\n    const updateAnimation = useCallback(\n      value => {\n        switch (filter.animationWindow) {\n          case ANIMATION_WINDOW.interval:\n            const idx = value[1];\n            setFilterAnimationTime(filterIdx, 'value', [\n              intervalBins[idx].x0,\n              intervalBins[idx].x1 - 1\n            ]);\n            break;\n          default:\n            setFilterAnimationTime(filterIdx, 'value', value);\n            break;\n        }\n      },\n      [filterIdx, intervalBins, filter.animationWindow, setFilterAnimationTime]\n    );\n\n    return (\n      <AnimationController\n        key=\"filter-control\"\n        value={filter.value}\n        domain={filter.domain}\n        speed={filter.speed}\n        isAnimating={filter.isAnimating}\n        animationWindow={filter.animationWindow}\n        steps={steps}\n        updateAnimation={updateAnimation}\n        children={children}\n      />\n    );\n  };\n  return FilterAnimationController;\n}\n\ninterface LayerAnimationControllerProps {\n  animationConfig: AnimationConfig & {timeSteps?: number[] | null};\n  setLayerAnimationTime: (x: number) => void;\n}\n\nLayerAnimationControllerFactory.deps = [AnimationControllerFactory];\nexport function LayerAnimationControllerFactory(\n  AnimationController: ReturnType<typeof AnimationControllerFactory>\n) {\n  const LayerAnimationController: React.FC<LayerAnimationControllerProps> = ({\n    animationConfig,\n    setLayerAnimationTime,\n    children\n  }) => (\n    <AnimationController<number>\n      key=\"layer-control\"\n      value={Number(animationConfig.currentTime)}\n      domain={animationConfig.domain}\n      speed={animationConfig.speed}\n      isAnimating={animationConfig.isAnimating}\n      updateAnimation={setLayerAnimationTime}\n      steps={animationConfig.timeSteps}\n      animationWindow={\n        animationConfig.timeSteps ? ANIMATION_WINDOW.interval : ANIMATION_WINDOW.point\n      }\n      children={children}\n    />\n  );\n  return LayerAnimationController;\n}\n\ntype BottomWidgetProps = {\n  rootRef: React.ForwardedRef<HTMLDivElement>;\n  containerW: number;\n} & ReturnType<typeof bottomWidgetSelector>;\n\nBottomWidgetFactory.deps = [\n  TimeWidgetFactory,\n  AnimationControlFactory,\n  FilterAnimationControllerFactory,\n  LayerAnimationControllerFactory\n];\n\n/* eslint-disable complexity */\nexport default function BottomWidgetFactory(\n  TimeWidget: ReturnType<typeof TimeWidgetFactory>,\n  AnimationControl: ReturnType<typeof AnimationControlFactory>,\n  FilterAnimationController: ReturnType<typeof FilterAnimationControllerFactory>,\n  LayerAnimationController: ReturnType<typeof LayerAnimationControllerFactory>\n) {\n  const BottomWidget = (props: BottomWidgetProps) => {\n    const {\n      datasets,\n      filters,\n      animationConfig,\n      visStateActions,\n      containerW,\n      uiState,\n      sidePanelWidth,\n      layers,\n      rootRef\n    } = props;\n\n    const {activeSidePanel, readOnly} = uiState;\n    const isOpen = Boolean(activeSidePanel);\n\n    const enlargedFilterIdx = useMemo(\n      () => filters.findIndex(f => f.enlarged && f.type === FILTER_TYPES.timeRange),\n      [filters]\n    );\n\n    const isMobile = hasPortableWidth(breakPointValues);\n\n    const animatedFilterIdx = useMemo(() => filters.findIndex(f => f.isAnimating), [filters]);\n    const animatedFilter = animatedFilterIdx > -1 ? filters[animatedFilterIdx] : null;\n\n    const isLegendPinned =\n      uiState.mapControls?.mapLegend?.show && uiState.mapControls?.mapLegend?.active;\n    const spaceForLegendWidth = isLegendPinned\n      ? DIMENSIONS.mapControl.width + DIMENSIONS.mapControl.mapLegend.pinned.right\n      : 0;\n\n    const enlargedFilterWidth =\n      (isOpen && !isMobile ? containerW - sidePanelWidth : containerW) - spaceForLegendWidth;\n\n    // show playback control if layers contain trip layer & at least one trip layer is visible\n    const animatableLayer = useMemo(\n      () =>\n        layers.filter(l => l.config.animation && l.config.animation.enabled && l.config.isVisible),\n      [layers]\n    );\n\n    const readyToAnimation =\n      Array.isArray(animationConfig.domain) && Number.isFinite(animationConfig.currentTime);\n    // if animation control is showing, hide time display in time slider\n    const showFloatingTimeDisplay = !animatableLayer.length;\n    const showAnimationControl =\n      animatableLayer.length && readyToAnimation && !animationConfig.hideControl;\n    const showTimeWidget = enlargedFilterIdx > -1 && Object.keys(datasets).length > 0;\n\n    // if filter is not animating, pass in enlarged filter here because\n    // animation controller needs to call reset on it\n    const filter = (animatedFilter as TimeRangeFilter) || filters[enlargedFilterIdx];\n\n    return (\n      <BottomWidgetContainer\n        width={Math.min(maxWidth, enlargedFilterWidth)}\n        style={{marginRight: spaceForLegendWidth}}\n        className=\"bottom-widget--container\"\n        hasPadding={showAnimationControl || showTimeWidget}\n        ref={rootRef}\n      >\n        <LayerAnimationController\n          animationConfig={animationConfig}\n          setLayerAnimationTime={visStateActions.setLayerAnimationTime}\n        >\n          {(isAnimating, start, pause, reset) =>\n            showAnimationControl ? (\n              <AnimationControl\n                animationConfig={animationConfig}\n                setLayerAnimationTime={visStateActions.setLayerAnimationTime}\n                updateAnimationSpeed={visStateActions.updateLayerAnimationSpeed}\n                toggleAnimation={visStateActions.toggleLayerAnimation}\n                isAnimatable={!animatedFilter}\n                isAnimating={isAnimating}\n                resetAnimation={reset}\n              />\n            ) : null\n          }\n        </LayerAnimationController>\n        {filter && (\n          <FilterAnimationController\n            filter={filter}\n            filterIdx={animatedFilterIdx > -1 ? animatedFilterIdx : enlargedFilterIdx}\n            setFilterAnimationTime={visStateActions.setFilterAnimationTime}\n          >\n            {(isAnimating, start, pause, resetAnimation) =>\n              showTimeWidget ? (\n                <TimeWidget\n                  // TimeWidget uses React.memo, here we pass width\n                  // even though it doesnt use it, to force rerender\n                  filter={filters[enlargedFilterIdx] as TimeRangeFilter}\n                  index={enlargedFilterIdx}\n                  datasets={datasets}\n                  readOnly={readOnly}\n                  showTimeDisplay={showFloatingTimeDisplay}\n                  setFilterPlot={visStateActions.setFilterPlot}\n                  setFilterAnimationTime={visStateActions.setFilterAnimationTime}\n                  setFilterAnimationWindow={visStateActions.setFilterAnimationWindow}\n                  toggleAnimation={visStateActions.toggleFilterAnimation}\n                  updateAnimationSpeed={visStateActions.updateFilterAnimationSpeed}\n                  enlargeFilter={visStateActions.enlargeFilter}\n                  resetAnimation={resetAnimation}\n                  isAnimatable={!animationConfig || !animationConfig.isAnimating}\n                />\n              ) : null\n            }\n          </FilterAnimationController>\n        )}\n      </BottomWidgetContainer>\n    );\n  };\n\n  /* eslint-disable react/display-name */\n  // @ts-ignore\n  return forwardRef((props: BottomWidgetProps, ref) => <BottomWidget {...props} rootRef={ref} />);\n  /* eslint-enable react/display-name */\n}\n/* eslint-enable complexity */\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}