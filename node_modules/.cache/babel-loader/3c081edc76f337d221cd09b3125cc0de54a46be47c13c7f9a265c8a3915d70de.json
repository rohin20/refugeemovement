{"ast":null,"code":"// Copyright (c) 2022 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getDefaultLayerGroupVisibility = getDefaultLayerGroupVisibility;\nexports.isValidStyleUrl = isValidStyleUrl;\nexports.getStyleDownloadUrl = getStyleDownloadUrl;\nexports.getStyleImageIcon = getStyleImageIcon;\nexports.scaleMapStyleByResolution = scaleMapStyleByResolution;\nexports.mergeLayerGroupVisibility = mergeLayerGroupVisibility;\nexports.editBottomMapStyle = exports.editTopMapStyle = void 0;\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\nvar _lodash = _interopRequireDefault(require(\"lodash.memoize\"));\nvar _lodash2 = _interopRequireDefault(require(\"lodash.clonedeep\"));\nvar _constants = require(\"@kepler.gl/constants\");\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        (0, _defineProperty2[\"default\"])(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n  return target;\n}\nvar mapUrlRg = /^mapbox:\\/\\/styles\\/[-a-z0-9]{2,256}\\/[-a-z0-9]{2,256}/;\nvar httpRg = /^(?=(http:|https:))/;\nfunction getDefaultLayerGroupVisibility(_ref) {\n  var _ref$layerGroups = _ref.layerGroups,\n    layerGroups = _ref$layerGroups === void 0 ? [] : _ref$layerGroups;\n  return layerGroups.reduce(function (accu, layer) {\n    return _objectSpread(_objectSpread({}, accu), {}, (0, _defineProperty2[\"default\"])({}, layer.slug, layer.defaultVisibility));\n  }, {});\n}\nvar resolver = function resolver(_ref2) {\n  var id = _ref2.id,\n    mapStyle = _ref2.mapStyle,\n    _ref2$visibleLayerGro = _ref2.visibleLayerGroups,\n    visibleLayerGroups = _ref2$visibleLayerGro === void 0 ? {} : _ref2$visibleLayerGro;\n  return \"\".concat(id, \":\").concat(Object.keys(visibleLayerGroups).filter(function (d) {\n    return visibleLayerGroups[d];\n  }).sort().join('-'));\n};\n/**\n * Edit preset map style to keep only visible layers\n *\n * @param mapStyle - preset map style\n * @param visibleLayerGroups - visible layers of top map\n * @returns top map style\n */\n\nvar editTopMapStyle = (0, _lodash[\"default\"])(function (_ref3) {\n  var mapStyle = _ref3.mapStyle,\n    visibleLayerGroups = _ref3.visibleLayerGroups;\n  var visibleFilters = (mapStyle.layerGroups || []).filter(function (lg) {\n    return visibleLayerGroups[lg.slug];\n  }).map(function (lg) {\n    return lg.filter;\n  }); // if top map\n  // keep only visible layers\n  // @ts-expect-error\n\n  var filteredLayers = mapStyle.style.layers.filter(function (layer) {\n    return visibleFilters.some(function (match) {\n      return match(layer);\n    });\n  });\n  return _objectSpread(_objectSpread({}, mapStyle.style), {}, {\n    layers: filteredLayers\n  });\n}, resolver);\n/**\n * Edit preset map style to filter out invisible layers\n *\n * @param {Object} mapStyle - preset map style\n * @param {Object} visibleLayerGroups - visible layers of bottom map\n * @returns {Object} bottom map style\n */\n\nexports.editTopMapStyle = editTopMapStyle;\nvar editBottomMapStyle = (0, _lodash[\"default\"])(function (_ref4) {\n  var id = _ref4.id,\n    mapStyle = _ref4.mapStyle,\n    visibleLayerGroups = _ref4.visibleLayerGroups;\n  var invisibleFilters = (mapStyle.layerGroups || []).filter(function (lg) {\n    return !visibleLayerGroups[lg.slug];\n  }).map(function (lg) {\n    return lg.filter;\n  }); // if bottom map\n  // filter out invisible layers\n\n  var filteredLayers = mapStyle.style.layers.filter(function (layer) {\n    return invisibleFilters.every(function (match) {\n      return !match(layer);\n    });\n  });\n  return _objectSpread(_objectSpread({}, mapStyle.style), {}, {\n    layers: filteredLayers\n  });\n}, resolver); // valid style url\n// mapbox://styles/uberdata/cjfyl03kp1tul2smf5v2tbdd4\n// lowercase letters, numbers and dashes only.\n\nexports.editBottomMapStyle = editBottomMapStyle;\nfunction isValidStyleUrl(url) {\n  return typeof url === 'string' && Boolean(url.match(mapUrlRg) || url.match(httpRg));\n}\nfunction getStyleDownloadUrl(styleUrl, accessToken, mapboxApiUrl) {\n  if (styleUrl.startsWith('http')) {\n    return styleUrl;\n  } // mapbox://styles/jckr/cjhcl0lxv13di2rpfoytdbdyj\n\n  if (styleUrl.startsWith('mapbox://styles')) {\n    var styleId = styleUrl.replace('mapbox://styles/', ''); // https://api.mapbox.com/styles/v1/heshan0131/cjg1bfumo1cwm2rlrjxkinfgw?pluginName=Keplergl&access_token=<token>\n\n    return \"\".concat(mapboxApiUrl || _constants.DEFAULT_MAPBOX_API_URL, \"/styles/v1/\").concat(styleId, \"?pluginName=Keplergl&access_token=\").concat(accessToken);\n  } // style url not recognized\n\n  return null;\n}\n/**\n * Generate static map image from style Url to be used as icon\n * @param param\n * @param param.styleUrl\n * @param param.mapboxApiAccessToken\n * @param param.mapboxApiUrl\n * @param param.mapState\n * @param param.mapW\n * @param param.mapH\n */\n\nfunction getStyleImageIcon(_ref5) {\n  var styleUrl = _ref5.styleUrl,\n    mapboxApiAccessToken = _ref5.mapboxApiAccessToken,\n    _ref5$mapboxApiUrl = _ref5.mapboxApiUrl,\n    mapboxApiUrl = _ref5$mapboxApiUrl === void 0 ? _constants.DEFAULT_MAPBOX_API_URL : _ref5$mapboxApiUrl,\n    _ref5$mapState = _ref5.mapState,\n    mapState = _ref5$mapState === void 0 ? {\n      longitude: -122.3391,\n      latitude: 37.7922,\n      zoom: 9\n    } : _ref5$mapState,\n    _ref5$mapW = _ref5.mapW,\n    mapW = _ref5$mapW === void 0 ? 400 : _ref5$mapW,\n    _ref5$mapH = _ref5.mapH,\n    mapH = _ref5$mapH === void 0 ? 300 : _ref5$mapH;\n  var styleId = styleUrl.replace('mapbox://styles/', '');\n  return \"\".concat(mapboxApiUrl, \"/styles/v1/\").concat(styleId, \"/static/\") + \"\".concat(mapState.longitude, \",\").concat(mapState.latitude, \",\").concat(mapState.zoom, \",0,0/\") + \"\".concat(mapW, \"x\").concat(mapH) + \"?access_token=\".concat(mapboxApiAccessToken, \"&logo=false&attribution=false\");\n}\nfunction scaleMapStyleByResolution(mapboxStyle, scale) {\n  if (scale !== 1 && mapboxStyle) {\n    var labelLayerGroup = _constants.DEFAULT_LAYER_GROUPS.find(function (lg) {\n      return lg.slug === 'label';\n    }); // @ts-ignore\n\n    var labelLayerFilter = labelLayerGroup.filter;\n    var zoomOffset = Math.log2(scale);\n    var copyStyle = (0, _lodash2[\"default\"])(mapboxStyle);\n    (copyStyle.layers || []).forEach(function (d) {\n      // edit minzoom and maxzoom\n      if (d.maxzoom) {\n        d.maxzoom = Math.max(d.maxzoom + zoomOffset, 1);\n      }\n      if (d.minzoom) {\n        d.minzoom = Math.max(d.minzoom + zoomOffset, 1);\n      } // edit text size\n\n      if (labelLayerFilter(d)) {\n        if (d.layout && d.layout['text-size'] && Array.isArray(d.layout['text-size'].stops)) {\n          d.layout['text-size'].stops.forEach(function (stop) {\n            // zoom\n            stop[0] = Math.max(stop[0] + zoomOffset, 1); // size\n\n            stop[1] *= scale;\n          });\n        }\n      }\n    });\n    return copyStyle;\n  }\n  return mapboxStyle;\n}\n/**\n * When switch to a new style, try to keep current layer group visibility\n * by merging default and current\n * @param {Object} defaultLayerGroup\n * @param {Object} currentLayerGroup\n * @return {Object} mergedLayerGroups\n */\n\nfunction mergeLayerGroupVisibility(defaultLayerGroup, currentLayerGroup) {\n  return Object.keys(defaultLayerGroup).reduce(function (accu, key) {\n    return _objectSpread(_objectSpread({}, accu), currentLayerGroup.hasOwnProperty(key) ? (0, _defineProperty2[\"default\"])({}, key, currentLayerGroup[key]) : {});\n  }, defaultLayerGroup);\n}","map":{"version":3,"names":["exports","getDefaultLayerGroupVisibility","isValidStyleUrl","getStyleImageIcon","scaleMapStyleByResolution","mergeLayerGroupVisibility","editBottomMapStyle","editTopMapStyle","_defineProperty2","_interopRequireDefault","require","_lodash2","_constants","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","getOwnPropertyDescriptors","defineProperties","defineProperty","mapUrlRg","httpRg","_ref","_ref$layerGroups","layerGroups","reduce","accu","layer","resolver","_ref2","id","mapStyle","_ref2$visibleLayerGro","visibleLayerGroups","concat","d","sort","join","_lodash","_ref3","visibleFilters","lg","slug","map","filteredLayers","style","layers","some","match","_ref4","invisibleFilters","every","url","Boolean","getStyleDownloadUrl","styleUrl","accessToken","mapboxApiUrl","startsWith","styleId","replace","DEFAULT_MAPBOX_API_URL","_ref5","mapboxApiAccessToken","_ref5$mapboxApiUrl","mapState","_ref5$mapState","longitude","latitude","zoom","_ref5$mapW","mapW","_ref5$mapH","mapH","scale","mapboxStyle","labelLayerGroup","DEFAULT_LAYER_GROUPS","find","labelLayerFilter","zoomOffset","Math","log2","copyStyle","maxzoom","max","minzoom","layout","Array","isArray","stops","stop"],"sources":["/Users/rohinphukan/Desktop/RefugeeWebsite/node_modules/@kepler.gl/utils/src/map-style-utils/mapbox-gl-style-editor.ts"],"sourcesContent":["// Copyright (c) 2022 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\nimport memoize from 'lodash.memoize';\nimport clondDeep from 'lodash.clonedeep';\nimport {DEFAULT_LAYER_GROUPS, DEFAULT_MAPBOX_API_URL} from '@kepler.gl/constants';\nimport {BaseMapStyle, LayerGroup, MapState} from '@kepler.gl/types';\n\nconst mapUrlRg = /^mapbox:\\/\\/styles\\/[-a-z0-9]{2,256}\\/[-a-z0-9]{2,256}/;\nconst httpRg = /^(?=(http:|https:))/;\n\nexport function getDefaultLayerGroupVisibility({layerGroups = []}: {layerGroups: LayerGroup[]}) {\n  return layerGroups.reduce(\n    (accu, layer) => ({\n      ...accu,\n      [layer.slug]: layer.defaultVisibility\n    }),\n    {}\n  );\n}\n\nconst resolver = ({\n  id,\n  mapStyle,\n  visibleLayerGroups = {}\n}: {\n  id?: string;\n  mapStyle: BaseMapStyle;\n  visibleLayerGroups: {[id: string]: LayerGroup | boolean} | false;\n}) =>\n  `${id}:${Object.keys(visibleLayerGroups)\n    .filter(d => visibleLayerGroups[d])\n    .sort()\n    .join('-')}`;\n\n/**\n * Edit preset map style to keep only visible layers\n *\n * @param mapStyle - preset map style\n * @param visibleLayerGroups - visible layers of top map\n * @returns top map style\n */\nexport const editTopMapStyle = memoize(\n  ({\n    mapStyle,\n    visibleLayerGroups\n  }: {\n    mapStyle: BaseMapStyle;\n    visibleLayerGroups: {[id: string]: LayerGroup | boolean} | false;\n  }) => {\n    const visibleFilters = (mapStyle.layerGroups || [])\n      .filter(lg => visibleLayerGroups[lg.slug])\n      .map(lg => lg.filter);\n\n    // if top map\n    // keep only visible layers\n    // @ts-expect-error\n    const filteredLayers = mapStyle.style.layers.filter(layer =>\n      visibleFilters.some(match => match(layer))\n    );\n\n    return {\n      ...mapStyle.style,\n      layers: filteredLayers\n    };\n  },\n  resolver\n);\n\n/**\n * Edit preset map style to filter out invisible layers\n *\n * @param {Object} mapStyle - preset map style\n * @param {Object} visibleLayerGroups - visible layers of bottom map\n * @returns {Object} bottom map style\n */\nexport const editBottomMapStyle = memoize(({id, mapStyle, visibleLayerGroups}) => {\n  const invisibleFilters = (mapStyle.layerGroups || [])\n    .filter(lg => !visibleLayerGroups[lg.slug])\n    .map(lg => lg.filter);\n\n  // if bottom map\n  // filter out invisible layers\n  const filteredLayers = mapStyle.style.layers.filter(layer =>\n    invisibleFilters.every(match => !match(layer))\n  );\n\n  return {\n    ...mapStyle.style,\n    layers: filteredLayers\n  };\n}, resolver);\n\n// valid style url\n// mapbox://styles/uberdata/cjfyl03kp1tul2smf5v2tbdd4\n// lowercase letters, numbers and dashes only.\nexport function isValidStyleUrl(url) {\n  return typeof url === 'string' && Boolean(url.match(mapUrlRg) || url.match(httpRg));\n}\n\nexport function getStyleDownloadUrl(styleUrl, accessToken, mapboxApiUrl) {\n  if (styleUrl.startsWith('http')) {\n    return styleUrl;\n  }\n\n  // mapbox://styles/jckr/cjhcl0lxv13di2rpfoytdbdyj\n  if (styleUrl.startsWith('mapbox://styles')) {\n    const styleId = styleUrl.replace('mapbox://styles/', '');\n\n    // https://api.mapbox.com/styles/v1/heshan0131/cjg1bfumo1cwm2rlrjxkinfgw?pluginName=Keplergl&access_token=<token>\n    return `${mapboxApiUrl ||\n      DEFAULT_MAPBOX_API_URL}/styles/v1/${styleId}?pluginName=Keplergl&access_token=${accessToken}`;\n  }\n\n  // style url not recognized\n  return null;\n}\n\n/**\n * Generate static map image from style Url to be used as icon\n * @param param\n * @param param.styleUrl\n * @param param.mapboxApiAccessToken\n * @param param.mapboxApiUrl\n * @param param.mapState\n * @param param.mapW\n * @param param.mapH\n */\nexport function getStyleImageIcon({\n  styleUrl,\n  mapboxApiAccessToken,\n  mapboxApiUrl = DEFAULT_MAPBOX_API_URL,\n  mapState = {\n    longitude: -122.3391,\n    latitude: 37.7922,\n    zoom: 9\n  },\n  mapW = 400,\n  mapH = 300\n}: {\n  styleUrl: string;\n  mapboxApiAccessToken: string;\n  mapboxApiUrl?: string;\n  mapState?: Partial<MapState>;\n  mapW?: number;\n  mapH?: number;\n}) {\n  const styleId = styleUrl.replace('mapbox://styles/', '');\n\n  return (\n    `${mapboxApiUrl}/styles/v1/${styleId}/static/` +\n    `${mapState.longitude},${mapState.latitude},${mapState.zoom},0,0/` +\n    `${mapW}x${mapH}` +\n    `?access_token=${mapboxApiAccessToken}&logo=false&attribution=false`\n  );\n}\n\nexport function scaleMapStyleByResolution(mapboxStyle, scale) {\n  if (scale !== 1 && mapboxStyle) {\n    const labelLayerGroup = DEFAULT_LAYER_GROUPS.find(lg => lg.slug === 'label');\n    // @ts-ignore\n    const {filter: labelLayerFilter} = labelLayerGroup;\n    const zoomOffset = Math.log2(scale);\n\n    const copyStyle = clondDeep(mapboxStyle);\n    (copyStyle.layers || []).forEach(d => {\n      // edit minzoom and maxzoom\n      if (d.maxzoom) {\n        d.maxzoom = Math.max(d.maxzoom + zoomOffset, 1);\n      }\n\n      if (d.minzoom) {\n        d.minzoom = Math.max(d.minzoom + zoomOffset, 1);\n      }\n\n      // edit text size\n      if (labelLayerFilter(d)) {\n        if (d.layout && d.layout['text-size'] && Array.isArray(d.layout['text-size'].stops)) {\n          d.layout['text-size'].stops.forEach(stop => {\n            // zoom\n            stop[0] = Math.max(stop[0] + zoomOffset, 1);\n            // size\n            stop[1] *= scale;\n          });\n        }\n      }\n    });\n\n    return copyStyle;\n  }\n\n  return mapboxStyle;\n}\n\n/**\n * When switch to a new style, try to keep current layer group visibility\n * by merging default and current\n * @param {Object} defaultLayerGroup\n * @param {Object} currentLayerGroup\n * @return {Object} mergedLayerGroups\n */\nexport function mergeLayerGroupVisibility(defaultLayerGroup, currentLayerGroup) {\n  return Object.keys(defaultLayerGroup).reduce(\n    (accu, key) => ({\n      ...accu,\n      ...(currentLayerGroup.hasOwnProperty(key) ? {[key]: currentLayerGroup[key]} : {})\n    }),\n    defaultLayerGroup\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}