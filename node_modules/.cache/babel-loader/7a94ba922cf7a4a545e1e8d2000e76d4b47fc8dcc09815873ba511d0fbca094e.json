{"ast":null,"code":"// Copyright (c) 2022 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\nvar _taggedTemplateLiteral2 = _interopRequireDefault(require(\"@babel/runtime/helpers/taggedTemplateLiteral\"));\nvar _react = _interopRequireWildcard(require(\"react\"));\nvar _styledComponents = _interopRequireDefault(require(\"styled-components\"));\nvar _localization = require(\"@kepler.gl/localization\");\nvar _styledComponents2 = require(\"../../common/styled-components\");\nvar _columnSelector = _interopRequireDefault(require(\"./column-selector\"));\nvar _templateObject;\nvar TopRow = _styledComponents[\"default\"].div(_templateObject || (_templateObject = (0, _taggedTemplateLiteral2[\"default\"])([\"\\n  display: flex;\\n  justify-content: space-between;\\n\"])));\nLayerColumnConfigFactory.deps = [_columnSelector[\"default\"]];\nfunction LayerColumnConfigFactory(ColumnSelector) {\n  var LayerColumnConfig = function LayerColumnConfig(_ref) {\n    var columnPairs = _ref.columnPairs,\n      fieldPairs = _ref.fieldPairs,\n      columns = _ref.columns,\n      columnLabels = _ref.columnLabels,\n      fields = _ref.fields,\n      updateLayerConfig = _ref.updateLayerConfig,\n      assignColumn = _ref.assignColumn,\n      assignColumnPairs = _ref.assignColumnPairs;\n    var enhancedFieldPairs = (0, _react.useMemo)(function () {\n      return columnPairs && fieldPairs ? fieldPairs.map(function (fp) {\n        return {\n          name: fp.defaultName,\n          type: 'point',\n          pair: fp.pair\n        };\n      }) : null;\n    }, [columnPairs, fieldPairs]);\n    var onUpdateColumn = (0, _react.useCallback)(function (key, value) {\n      var assignedColumns = value && value.pair && columnPairs ? assignColumnPairs(key, value.pair) : assignColumn(key, value);\n      updateLayerConfig({\n        columns: assignedColumns\n      });\n    }, [updateLayerConfig, columnPairs, assignColumnPairs, assignColumn]);\n    if (!Object.keys(columns).length) {\n      // don't render if columns is empty\n      return /*#__PURE__*/_react[\"default\"].createElement(\"div\", null);\n    }\n    return /*#__PURE__*/_react[\"default\"].createElement(\"div\", null, /*#__PURE__*/_react[\"default\"].createElement(_styledComponents2.SidePanelSection, null, /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n      className: \"layer-config__column\"\n    }, /*#__PURE__*/_react[\"default\"].createElement(TopRow, null, /*#__PURE__*/_react[\"default\"].createElement(_styledComponents2.PanelLabel, null, /*#__PURE__*/_react[\"default\"].createElement(_localization.FormattedMessage, {\n      id: 'columns.title'\n    })), /*#__PURE__*/_react[\"default\"].createElement(_styledComponents2.PanelLabel, null, /*#__PURE__*/_react[\"default\"].createElement(_localization.FormattedMessage, {\n      id: \"layer.required\"\n    }))), Object.keys(columns).map(function (key) {\n      return /*#__PURE__*/_react[\"default\"].createElement(ColumnSelector, {\n        column: columns[key],\n        columns: columns,\n        label: columnLabels && columnLabels[key] || key,\n        key: key,\n        allFields: fields,\n        fieldPairs: enhancedFieldPairs,\n        onSelect: function onSelect(val) {\n          return onUpdateColumn(key, val);\n        }\n      });\n    }))));\n  };\n  return LayerColumnConfig;\n}\nvar _default = LayerColumnConfigFactory;\nexports[\"default\"] = _default;","map":{"version":3,"names":["value","exports","_taggedTemplateLiteral2","_interopRequireDefault","require","_react","_interopRequireWildcard","_styledComponents","_localization","_styledComponents2","_columnSelector","_templateObject","TopRow","div","LayerColumnConfigFactory","deps","ColumnSelector","LayerColumnConfig","_ref","columnPairs","fieldPairs","columns","fields","updateLayerConfig","assignColumn","assignColumnPairs","map","fp","name","defaultName","type","pair","onUpdateColumn","useCallback","key","assignedColumns","Object","keys","length","createElement","className","PanelLabel","FormattedMessage"],"sources":["/Users/rohinphukan/Desktop/RefugeeWebsite/node_modules/@kepler.gl/components/src/side-panel/layer-panel/layer-column-config.tsx"],"sourcesContent":["// Copyright (c) 2022 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\nimport React, {useCallback, useMemo} from 'react';\nimport styled from 'styled-components';\nimport {FormattedMessage} from '@kepler.gl/localization';\nimport {PanelLabel, SidePanelSection} from '../../common/styled-components';\nimport ColumnSelectorFactory from './column-selector';\nimport {ColumnPairs, Layer, LayerColumns, LayerBaseConfig} from '@kepler.gl/layers';\nimport {Field, FieldPair} from '@kepler.gl/types';\n\ntype LayerColumnConfigProps = {\n  columnPairs?: ColumnPairs | null;\n  fieldPairs?: FieldPair[];\n  columns: LayerColumns;\n  columnLabels?: Record<string, string>;\n  fields: Field[];\n  updateLayerConfig: (newConfig: Partial<LayerBaseConfig>) => void;\n  assignColumn: Layer['assignColumn'];\n  assignColumnPairs: Layer['assignColumnPairs'];\n};\n\nconst TopRow = styled.div`\n  display: flex;\n  justify-content: space-between;\n`;\n\nLayerColumnConfigFactory.deps = [ColumnSelectorFactory];\n\nfunction LayerColumnConfigFactory(ColumnSelector: ReturnType<typeof ColumnSelectorFactory>) {\n  const LayerColumnConfig: React.FC<LayerColumnConfigProps> = ({\n    columnPairs,\n    fieldPairs,\n    columns,\n    columnLabels,\n    fields,\n    updateLayerConfig,\n    assignColumn,\n    assignColumnPairs\n  }) => {\n    const enhancedFieldPairs = useMemo(\n      () =>\n        columnPairs && fieldPairs\n          ? fieldPairs.map(fp => ({\n              name: fp.defaultName,\n              type: 'point',\n              pair: fp.pair\n            }))\n          : null,\n      [columnPairs, fieldPairs]\n    );\n\n    const onUpdateColumn = useCallback(\n      (key, value) => {\n        const assignedColumns =\n          value && value.pair && columnPairs\n            ? assignColumnPairs(key, value.pair)\n            : assignColumn(key, value);\n\n        updateLayerConfig({columns: assignedColumns});\n      },\n      [updateLayerConfig, columnPairs, assignColumnPairs, assignColumn]\n    );\n\n    if (!Object.keys(columns).length) {\n      // don't render if columns is empty\n      return <div />;\n    }\n\n    return (\n      <div>\n        <SidePanelSection>\n          <div className=\"layer-config__column\">\n            <TopRow>\n              <PanelLabel>\n                <FormattedMessage id={'columns.title'} />\n              </PanelLabel>\n              <PanelLabel>\n                <FormattedMessage id=\"layer.required\" />\n              </PanelLabel>\n            </TopRow>\n            {Object.keys(columns).map(key => (\n              <ColumnSelector\n                column={columns[key]}\n                columns={columns}\n                label={(columnLabels && columnLabels[key]) || key}\n                key={key}\n                allFields={fields}\n                fieldPairs={enhancedFieldPairs}\n                onSelect={val => onUpdateColumn(key, val)}\n              />\n            ))}\n          </div>\n        </SidePanelSection>\n      </div>\n    );\n  };\n\n  return LayerColumnConfig;\n}\n\nexport default LayerColumnConfigFactory;\n"],"mappings":";;;;;;;;;;;;;AAoBA;;AACA;;AACA;;;;;;;;EAsBAA,KAAA;;AAEAC,OAAA,UAAS;AAUD,IAAAC,uBARJ,GAAAC,sBAQI,CAAAC,OAAA;AAAA,IAAAC,MANJ,GAAAC,uBAMI,CAAAF,OAAA;AAAA,IAAAG,iBAAA,GAJJJ,sBAII,CAAAC,OAAA;AAAA,IAAAI,aAFJ,GAEIJ,OAAA,CAFJ,yBAEI;AACJ,IAAAK,kBAAM,GAAAL,OAAqB,iCACzB;AAEuB,IAAAM,eAAK,GAAAP,sBAAA,CAAAC,OAAA;AAEpB,IAAAO,eAAM;AAFc,IAAAC,MAAL,GAAAL,iBAAA,YAAAM,GAAA,CAAAF,eAAA,KAAAA,eAAA,OAAAT,uBAAA;AAFvBY,wBAQc,CAAAC,IAAA,GATW,CAA3BL,eAAA;AAcI,SAAAI,wBACOA,CAAAE,cAAL;EAIF,IAAAC,iBAAiB,GAAC,SAAAA,kBAAAC,IAAA;IAAC,IAAAC,WAAS,GAAAD,IAAA,CAAAC,WAAA;MAA5BC,UAAA,GAAAF,IAAA,CAAAE,UAAA;MAEDC,OAAA,GAAAH,IAAA,CAAAG,OAAmB;;MAGlBC,MAAC,GAAOJ,IAAK,CAAAI,MAAZ;MACHC,iBAAA,GAAAL,IAAA,CAAAK,iBAAA;MACAC,YAAA,GAAAN,IAAO,CAAAM,YAAA;MACRC,iBAAA,GAAAP,IAAA,CAAAO,iBAAA;;MAED,OAAAN,WACE,IAAAC,UAAA,GAAAA,UAAA,CAAAM,GAAA,WAAAC,EAAA;QAES,OAAS;UAAdC,IAAA,EAAAD,EAAA,CAAAE,WACE;UAE0BC,IAAA;UAF1BC,IAAA,EAAAJ,EAAA,CAAAI;QAKwB;MADtB,CAJF,CADF,GASG;IAA4B,IAAAZ,WAAA,EAAAC,UAC3B;IACE,IAAAY,cAAQ,GAAQ,EAAD,EADjB3B,MAAA,CAAA4B,WAAA,YAAAC,GAAA,EAAAlC,KAAA;MAEE,IAAAmC,eAFF,GAAAnC,KAAA,IAAAA,KAAA,CAAA+B,IAAA,IAAAZ,WAAA,GAAAM,iBAAA,CAAAS,GAAA,EAAAlC,KAAA,CAAA+B,IAAA,IAAAP,YAAA,CAAAU,GAAA,EAAAlC,KAAA;MAGEuB,iBAAQ;QACRF,OAAK,EAJPc;MAKE;IACA,IAAAZ,iBAAY,EAAAJ,WANd,EAAAM,iBAAA,EAAAD,YAAA;IAOe,KAAAY,MAAA,CAAAC,IAAI,CAAAhB,OAAA,EAAAiB,MAAc,EAAM;MAAxB;MAPf,OAD2B,aAAAjC,MAAA,YAAAkC,aAAA;IAAA;;MAiBvCC,SAAO;IACR,gBAAAnC,MAAA,YAAAkC,aAAA,CAAA3B,MAAA,qBAAAP,MAAA,YAAAkC,aAAA,CAAA9B,kBAAA,CAAAgC,UAAA,qBAAApC,MAAA,YAAAkC,aAAA,CAAA/B,aAAA,CAAAkC,gBAAA;;sBAEcrC,MAAA,W"},"metadata":{},"sourceType":"script","externalDependencies":[]}