{"ast":null,"code":"// Copyright (c) 2022 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.PureFeatureActionPanelFactory = PureFeatureActionPanelFactory;\nexports[\"default\"] = FeatureActionPanelFactory;\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\nvar _taggedTemplateLiteral2 = _interopRequireDefault(require(\"@babel/runtime/helpers/taggedTemplateLiteral\"));\nvar _react = _interopRequireWildcard(require(\"react\"));\nvar _reactIntl = require(\"react-intl\");\nvar _actionPanel = _interopRequireWildcard(require(\"../common/action-panel\"));\nvar _styledComponents = _interopRequireDefault(require(\"styled-components\"));\nvar _reactOnclickoutside = _interopRequireDefault(require(\"react-onclickoutside\"));\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\nvar _icons = require(\"../common/icons\");\nvar _copyToClipboard = _interopRequireDefault(require(\"copy-to-clipboard\"));\nvar _templateObject;\nvar LAYOVER_OFFSET = 4;\nvar StyledActionsLayer = _styledComponents[\"default\"].div(_templateObject || (_templateObject = (0, _taggedTemplateLiteral2[\"default\"])([\"\\n  position: absolute;\\n\"])));\nPureFeatureActionPanelFactory.deps = [];\nfunction PureFeatureActionPanelFactory() {\n  var FeatureActionPanel = function FeatureActionPanel(_ref) {\n    var className = _ref.className,\n      datasets = _ref.datasets,\n      selectedFeature = _ref.selectedFeature,\n      position = _ref.position,\n      layers = _ref.layers,\n      currentFilter = _ref.currentFilter,\n      onToggleLayer = _ref.onToggleLayer,\n      onDeleteFeature = _ref.onDeleteFeature;\n    var _useState = (0, _react.useState)(false),\n      _useState2 = (0, _slicedToArray2[\"default\"])(_useState, 2),\n      copied = _useState2[0],\n      setCopied = _useState2[1];\n    var _ref2 = currentFilter || {},\n      _ref2$layerId = _ref2.layerId,\n      layerId = _ref2$layerId === void 0 ? [] : _ref2$layerId;\n    var intl = (0, _reactIntl.useIntl)();\n    var copyGeometry = (0, _react.useCallback)(function () {\n      if (selectedFeature !== null && selectedFeature !== void 0 && selectedFeature.geometry) (0, _copyToClipboard[\"default\"])(JSON.stringify(selectedFeature.geometry));\n      setCopied(true);\n    }, [selectedFeature === null || selectedFeature === void 0 ? void 0 : selectedFeature.geometry]);\n    if (!position) {\n      return null;\n    }\n    return /*#__PURE__*/_react[\"default\"].createElement(StyledActionsLayer, {\n      className: (0, _classnames[\"default\"])('feature-action-panel', className),\n      style: {\n        top: \"\".concat(position.y + LAYOVER_OFFSET, \"px\"),\n        left: \"\".concat(position.x + LAYOVER_OFFSET, \"px\")\n      }\n    }, /*#__PURE__*/_react[\"default\"].createElement(_actionPanel[\"default\"], null, /*#__PURE__*/_react[\"default\"].createElement(_actionPanel.ActionPanelItem, {\n      className: \"editor-layers-list\",\n      label: intl.formatMessage({\n        id: 'editor.filterLayer',\n        defaultMessage: 'Filter layers'\n      }),\n      Icon: _icons.Layers\n    }, layers.map(function (layer, index) {\n      return /*#__PURE__*/_react[\"default\"].createElement(_actionPanel.ActionPanelItem, {\n        key: index,\n        label: layer.config.label // @ts-ignore\n        ,\n\n        color: datasets[layer.config.dataId].color,\n        isSelection: true,\n        isActive: layerId.includes(layer.id),\n        onClick: function onClick() {\n          return onToggleLayer(layer);\n        },\n        className: \"layer-panel-item\"\n      });\n    })), /*#__PURE__*/_react[\"default\"].createElement(_actionPanel.ActionPanelItem, {\n      label: intl.formatMessage({\n        id: 'editor.copyGeometry',\n        defaultMessage: 'Copy Geometry'\n      }),\n      className: \"delete-panel-item\",\n      Icon: copied ? _icons.Checkmark : _icons.Copy,\n      onClick: copyGeometry\n    }), /*#__PURE__*/_react[\"default\"].createElement(_actionPanel.ActionPanelItem, {\n      label: intl.formatMessage({\n        id: 'tooltip.delete',\n        defaultMessage: 'Delete'\n      }),\n      className: \"delete-panel-item\",\n      Icon: _icons.Trash,\n      onClick: onDeleteFeature\n    })));\n  };\n  FeatureActionPanel.displayName = 'FeatureActionPanel';\n  FeatureActionPanel.defaultProps = {\n    position: null\n  };\n  return FeatureActionPanel;\n}\nFeatureActionPanelFactory.deps = PureFeatureActionPanelFactory.deps;\nfunction FeatureActionPanelFactory() {\n  var PureFeatureActionPanel = PureFeatureActionPanelFactory();\n  var ClickOutsideFeatureActionPanel = function ClickOutsideFeatureActionPanel(props) {\n    // @ts-ignore\n    ClickOutsideFeatureActionPanel.handleClickOutside = function (e) {\n      var _props$onClose;\n      e.preventDefault();\n      e.stopPropagation();\n      (_props$onClose = props.onClose) === null || _props$onClose === void 0 ? void 0 : _props$onClose.call(props);\n    };\n    return /*#__PURE__*/_react[\"default\"].createElement(PureFeatureActionPanel, props);\n  };\n  var clickOutsideConfig = {\n    // @ts-ignore\n    handleClickOutside: function handleClickOutside() {\n      return ClickOutsideFeatureActionPanel.handleClickOutside;\n    }\n  };\n  return (0, _reactOnclickoutside[\"default\"])(ClickOutsideFeatureActionPanel, clickOutsideConfig);\n}","map":{"version":3,"names":["_interopRequireDefault","require","_interopRequireWildcard","Object","defineProperty","exports","FeatureActionPanelFactory","_taggedTemplateLiteral2","_react","_reactIntl","_actionPanel","_styledComponents","_reactOnclickoutside","_classnames","_icons","_templateObject","LAYOVER_OFFSET","StyledActionsLayer","div","PureFeatureActionPanelFactory","deps","intl","FeatureActionPanel","_ref","className","datasets","selectedFeature","layers","currentFilter","onToggleLayer","_useState","useState","_useState2","_slicedToArray2","copied","setCopied","_ref2","_ref2$layerId","layerId","useIntl","copyGeometry","useCallback","geometry","_copyToClipboard","JSON","stringify","position","createElement","style","top","concat","y","left","x","ActionPanelItem","label","formatMessage","id","defaultMessage","Icon","Layers","map","layer","index","key","config","color","dataId","isSelection","isActive","includes","onClick","Checkmark","Copy","Trash","displayName","PureFeatureActionPanel","ClickOutsideFeatureActionPanel","props"],"sources":["/Users/rohinphukan/Desktop/RefugeeWebsite/node_modules/@kepler.gl/components/src/editor/feature-action-panel.tsx"],"sourcesContent":["// Copyright (c) 2022 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\nimport React, {useCallback, useState} from 'react';\nimport {useIntl} from 'react-intl';\n\nimport ActionPanel, {ActionPanelItem} from '../common/action-panel';\nimport styled from 'styled-components';\nimport onClickOutside from 'react-onclickoutside';\nimport classnames from 'classnames';\nimport {Trash, Layers, Copy, Checkmark} from '../common/icons';\nimport copy from 'copy-to-clipboard';\nimport {Layer} from '@kepler.gl/layers';\nimport {Filter} from '@kepler.gl/types';\nimport {Feature} from '@nebula.gl/edit-modes';\nimport {Datasets} from '@kepler.gl/table';\n\nconst LAYOVER_OFFSET = 4;\n\nconst StyledActionsLayer = styled.div`\n  position: absolute;\n`;\n\nPureFeatureActionPanelFactory.deps = [];\n\nexport interface FeatureActionPanelProps {\n  className?: string;\n  datasets: Datasets;\n  selectedFeature: Feature | null;\n  position: {\n    x: number;\n    y: number;\n  } | null;\n  layers: Layer[];\n  currentFilter?: Filter;\n  onToggleLayer: (l: Layer) => void;\n  onDeleteFeature: () => void;\n  onClose: () => void;\n}\n\nexport function PureFeatureActionPanelFactory(): React.FC<FeatureActionPanelProps> {\n  const FeatureActionPanel = ({\n    className,\n    datasets,\n    selectedFeature,\n    position,\n    layers,\n    currentFilter,\n    onToggleLayer,\n    onDeleteFeature\n  }: FeatureActionPanelProps) => {\n    const [copied, setCopied] = useState(false);\n    const {layerId = []} = currentFilter || {};\n    const intl = useIntl();\n\n    const copyGeometry = useCallback(() => {\n      if (selectedFeature?.geometry) copy(JSON.stringify(selectedFeature.geometry));\n      setCopied(true);\n    }, [selectedFeature?.geometry]);\n\n    if (!position) {\n      return null;\n    }\n\n    return (\n      <StyledActionsLayer\n        className={classnames('feature-action-panel', className)}\n        style={{\n          top: `${position.y + LAYOVER_OFFSET}px`,\n          left: `${position.x + LAYOVER_OFFSET}px`\n        }}\n      >\n        <ActionPanel>\n          <ActionPanelItem\n            className=\"editor-layers-list\"\n            label={intl.formatMessage({id: 'editor.filterLayer', defaultMessage: 'Filter layers'})}\n            Icon={Layers}\n          >\n            {layers.map((layer, index) => (\n              <ActionPanelItem\n                key={index}\n                label={layer.config.label}\n                // @ts-ignore\n                color={datasets[layer.config.dataId].color}\n                isSelection={true}\n                isActive={layerId.includes(layer.id)}\n                onClick={() => onToggleLayer(layer)}\n                className=\"layer-panel-item\"\n              />\n            ))}\n          </ActionPanelItem>\n          <ActionPanelItem\n            label={intl.formatMessage({id: 'editor.copyGeometry', defaultMessage: 'Copy Geometry'})}\n            className=\"delete-panel-item\"\n            Icon={copied ? Checkmark : Copy}\n            onClick={copyGeometry}\n          />\n\n          <ActionPanelItem\n            label={intl.formatMessage({id: 'tooltip.delete', defaultMessage: 'Delete'})}\n            className=\"delete-panel-item\"\n            Icon={Trash}\n            onClick={onDeleteFeature}\n          />\n        </ActionPanel>\n      </StyledActionsLayer>\n    );\n  };\n\n  FeatureActionPanel.displayName = 'FeatureActionPanel';\n  FeatureActionPanel.defaultProps = {\n    position: null\n  };\n\n  return FeatureActionPanel;\n}\n\nFeatureActionPanelFactory.deps = PureFeatureActionPanelFactory.deps;\n\nexport default function FeatureActionPanelFactory() {\n  const PureFeatureActionPanel = PureFeatureActionPanelFactory();\n\n  const ClickOutsideFeatureActionPanel: React.FC<FeatureActionPanelProps> = props => {\n    // @ts-ignore\n    ClickOutsideFeatureActionPanel.handleClickOutside = (e: Event) => {\n      e.preventDefault();\n      e.stopPropagation();\n      props.onClose?.();\n    };\n    return <PureFeatureActionPanel {...props} />;\n  };\n\n  const clickOutsideConfig = {\n    // @ts-ignore\n    handleClickOutside: () => ClickOutsideFeatureActionPanel.handleClickOutside\n  };\n\n  return onClickOutside(ClickOutsideFeatureActionPanel, clickOutsideConfig);\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}