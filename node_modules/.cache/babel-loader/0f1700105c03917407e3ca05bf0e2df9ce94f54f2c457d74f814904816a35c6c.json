{"ast":null,"code":"// Copyright (c) 2022 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.aggregate = aggregate;\nexports.getMode = exports.getFrequency = void 0;\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\nvar _d3Array = require(\"d3-array\");\nvar _constants = require(\"@kepler.gl/constants\");\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        (0, _defineProperty2[\"default\"])(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n  return target;\n}\nvar getFrequency = function getFrequency(data) {\n  return data.reduce(function (uniques, val) {\n    return _objectSpread(_objectSpread({}, uniques), {}, (0, _defineProperty2[\"default\"])({}, val, (uniques[val] || 0) + 1));\n  }, {});\n};\nexports.getFrequency = getFrequency;\nvar getMode = function getMode(data) {\n  var occur = getFrequency(data);\n  return Object.keys(occur).reduce(function (prev, key) {\n    return occur[prev] >= occur[key] ? prev : key;\n  }, Object.keys(occur)[0]);\n};\nexports.getMode = getMode;\nfunction aggregate(data, technique) {\n  switch (technique) {\n    case _constants.AGGREGATION_TYPES.average:\n      return (0, _d3Array.mean)(data);\n    case _constants.AGGREGATION_TYPES.countUnique:\n      return Object.keys(data.reduce(function (uniques, val) {\n        uniques[val] = uniques[val] || 0;\n        uniques[val] += 1;\n        return uniques;\n      }, {})).length;\n    case _constants.AGGREGATION_TYPES.mode:\n      return getMode(data);\n    case _constants.AGGREGATION_TYPES.maximum:\n      return (0, _d3Array.max)(data);\n    case _constants.AGGREGATION_TYPES.minimum:\n      return (0, _d3Array.min)(data);\n    case _constants.AGGREGATION_TYPES.median:\n      return (0, _d3Array.median)(data);\n    case _constants.AGGREGATION_TYPES.stdev:\n      return (0, _d3Array.deviation)(data);\n    case _constants.AGGREGATION_TYPES.sum:\n      return (0, _d3Array.sum)(data);\n    case _constants.AGGREGATION_TYPES.variance:\n      return (0, _d3Array.variance)(data);\n    default:\n      return data.length;\n  }\n}","map":{"version":3,"names":["_interopRequireDefault","require","Object","defineProperty","exports","getMode","getFrequency","_defineProperty2","_d3Array","_objectSpread","target","i","arguments","length","source","ownKeys","forEach","key","getOwnPropertyDescriptors","defineProperties","getOwnPropertyDescriptor","data","uniques","val","occur","keys","reduce","prev","technique","_constants","AGGREGATION_TYPES","average","countUnique","maximum","max"],"sources":["/Users/rohinphukan/Desktop/RefugeeWebsite/node_modules/@kepler.gl/utils/src/aggregate-utils.ts"],"sourcesContent":["// Copyright (c) 2022 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\nimport {deviation, min, max, mean, median, sum, variance} from 'd3-array';\nimport {AGGREGATION_TYPES} from '@kepler.gl/constants';\n\nexport const getFrequency = data =>\n  data.reduce(\n    (uniques, val) => ({\n      ...uniques,\n      [val]: (uniques[val] || 0) + 1\n    }),\n    {}\n  );\n\nexport const getMode = data => {\n  const occur = getFrequency(data);\n  return Object.keys(occur).reduce(\n    (prev, key) => (occur[prev] >= occur[key] ? prev : key),\n    Object.keys(occur)[0]\n  );\n};\n\nexport function aggregate(data, technique) {\n  switch (technique) {\n    case AGGREGATION_TYPES.average:\n      return mean(data);\n    case AGGREGATION_TYPES.countUnique:\n      return Object.keys(\n        data.reduce((uniques, val) => {\n          uniques[val] = uniques[val] || 0;\n          uniques[val] += 1;\n          return uniques;\n        }, {})\n      ).length;\n    case AGGREGATION_TYPES.mode:\n      return getMode(data);\n\n    case AGGREGATION_TYPES.maximum:\n      return max(data);\n    case AGGREGATION_TYPES.minimum:\n      return min(data);\n    case AGGREGATION_TYPES.median:\n      return median(data);\n    case AGGREGATION_TYPES.stdev:\n      return deviation(data);\n    case AGGREGATION_TYPES.sum:\n      return sum(data);\n    case AGGREGATION_TYPES.variance:\n      return variance(data);\n    default:\n      return data.length;\n  }\n}\n"],"mappings":";;;;;;;;;;;;AAoBA;;AACA;;;;;;AAEO,YAAM;;AAET,IAAAA,sBAAA,GAAAC,OAAA;AAF4BC,MAAzB,CAAAC,cAAA,CAAAC,OAAA;;;;AASAA,OAAM,CAAAC,OAAU,GAAAD,OAAV,CAAAE,YAAkB;AAE7B,IAAAC,gBAAO,GAAYP,sBAChB,CAAAC,OAAM,CAAP;AAAA,IADKO,QAEE,GAAAP,OAAP,WAFF;;;;;;;;;;;;;AAOA,SAAAQ,cAAAC,MAAA;EAAA,SAAAC,CAAA,MAAAA,CAAA,GAAAC,SAAA,CAAAC,MAAA,EAAAF,CAAA;IAAA,IAAAG,MAAA,GAAAF,SAAA,CAAAD,CAAA,YAAAC,SAAA,CAAAD,CAAA;IAAA,IAAAA,CAAA;MAAAI,OAAA,CAAAb,MAAA,CAAAY,MAAA,SAAAE,OAAA,WAAAC,GAAA;QAAA,IAAAV,gBAAA,aAAAG,MAAA,EAAAO,GAAA,EAAAH,MAAA,CAAAG,GAAA;MAAA;IAAA,WAAAf,MAAA,CAAAgB,yBAAA;MAAAhB,MAAA,CAAAiB,gBAAA,CAAAT,MAAA,EAAAR,MAAA,CAAAgB,yBAAA,CAAAJ,MAAA;IAAA;MAAAC,OAAA,CAAAb,MAAA,CAAAY,MAAA,GAAAE,OAAA,WAAAC,GAAA;QAAAf,MAAA,CAAAC,cAAA,CAAAO,MAAA,EAAAO,GAAA,EAAAf,MAAA,CAAAkB,wBAAA,CAAAN,MAAA,EAAAG,GAAA;MAAA;IAAA;EAAA;EAAA,OAAAP,MAAA;AAAA;AAEI,IAAAJ,YAAO,YAAAA,YAAPA,CAAAe,IAAA;;IACF,OAAKZ,aAAA,CAAAA,aAAkB,KAAAa,OAAvB,WAAAf,gBAAA,iBAAAgB,GAAA,GAAAD,OAAA,CAAAC,GAAA;EACE;AAEI;AAEAnB,OAAA,CAAAE,YAAO,GAAPA,YAAA;;EAGN,IAAAkB,KAAK,GAAAlB,YAAA,CAAAe,IAAA;EACH,OAAAnB,MAAO,CAAAuB,IAAO,CAACD,KAAf,EAAAE,MAAA,WAAAC,IAAA,EAAAV,GAAA;;EAEF,GAAAf,MAAK,CAAAuB,IAAA,CAAAD,KAAA;AACH;AACFpB,OAAA,CAAAC,OAAK,GAAAA,OAAA;;EAEL,QAAKuB,SAAA;IACH,KAAAC,UAAO,CAAAC,iBAAO,CAAPC,OAAP;;IAEA,KAAAF,UAAO,CAAAC,iBAAU,CAAAE,WAAjB;;QACFV,OAAK,CAAAC,GAAA,IAAAD,OAAA,CAAAC,GAAA,KAAkB;QACrBD,OAAO,CAAAC,GAAA;;MACT,GAAK,KAAAV,MAAA;;MAEL,OAAAR,OAAA,CAAAgB,IAAA;IA1BF,KAAAQ,UAAA,CAAAC,iBAAA,CAAAG,OAAA;MA6BD,WAAAzB,QAAA,CAAA0B,GAAA,EAAAb,IAAA"},"metadata":{},"sourceType":"script","externalDependencies":[]}