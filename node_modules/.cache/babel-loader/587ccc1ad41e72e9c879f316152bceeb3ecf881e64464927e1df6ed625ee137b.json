{"ast":null,"code":"import _toConsumableArray from \"/Users/rohinphukan/Desktop/RefugeeWebsite/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _createForOfIteratorHelper from \"/Users/rohinphukan/Desktop/RefugeeWebsite/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport { createElement } from 'react';\nimport { View } from '@deck.gl/core';\nimport { inheritsFrom } from './inherits-from';\nimport evaluateChildren, { isComponent } from './evaluate-children';\nexport default function positionChildrenUnderViews(_ref) {\n  var children = _ref.children,\n    deck = _ref.deck,\n    ContextProvider = _ref.ContextProvider;\n  var _ref2 = deck || {},\n    viewManager = _ref2.viewManager;\n  if (!viewManager || !viewManager.views.length) {\n    return [];\n  }\n  var views = {};\n  var defaultViewId = viewManager.views[0].id;\n  var _iterator = _createForOfIteratorHelper(children),\n    _step;\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var child = _step.value;\n      var viewId = defaultViewId;\n      var viewChildren = child;\n      if (isComponent(child) && inheritsFrom(child.type, View)) {\n        viewId = child.props.id || defaultViewId;\n        viewChildren = child.props.children;\n      }\n      var viewport = viewManager.getViewport(viewId);\n      var viewState = viewManager.getViewState(viewId);\n      if (viewport) {\n        viewState.padding = viewport.padding;\n        var x = viewport.x,\n          y = viewport.y,\n          width = viewport.width,\n          height = viewport.height;\n        viewChildren = evaluateChildren(viewChildren, {\n          x: x,\n          y: y,\n          width: width,\n          height: height,\n          viewport: viewport,\n          viewState: viewState\n        });\n        if (!views[viewId]) {\n          views[viewId] = {\n            viewport: viewport,\n            children: []\n          };\n        }\n        views[viewId].children.push(viewChildren);\n      }\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n  return Object.keys(views).map(function (viewId) {\n    var _views$viewId = views[viewId],\n      viewport = _views$viewId.viewport,\n      viewChildren = _views$viewId.children;\n    var x = viewport.x,\n      y = viewport.y,\n      width = viewport.width,\n      height = viewport.height;\n    var style = {\n      position: 'absolute',\n      left: x,\n      top: y,\n      width: width,\n      height: height\n    };\n    var key = \"view-\".concat(viewId);\n    var viewElement = createElement.apply(void 0, ['div', {\n      key: key,\n      id: key,\n      style: style\n    }].concat(_toConsumableArray(viewChildren)));\n    if (ContextProvider) {\n      var contextValue = {\n        viewport: viewport,\n        container: deck.canvas.offsetParent,\n        eventManager: deck.eventManager,\n        onViewStateChange: function onViewStateChange(params) {\n          params.viewId = viewId;\n          deck._onViewStateChange(params);\n        }\n      };\n      return createElement(ContextProvider, {\n        key: key,\n        value: contextValue\n      }, viewElement);\n    }\n    return viewElement;\n  });\n}","map":{"version":3,"names":["createElement","View","inheritsFrom","evaluateChildren","isComponent","positionChildrenUnderViews","_ref","children","deck","ContextProvider","_ref2","viewManager","views","length","defaultViewId","id","_iterator","_createForOfIteratorHelper","_step","s","n","done","child","value","viewId","viewChildren","type","props","viewport","getViewport","viewState","getViewState","padding","x","y","width","height","push","err","e","f","Object","keys","map","_views$viewId","style","position","left","top","key","concat","viewElement","apply","_toConsumableArray","contextValue","container","canvas","offsetParent","eventManager","onViewStateChange","params","_onViewStateChange"],"sources":["/Users/rohinphukan/Desktop/RefugeeWebsite/node_modules/@deck.gl/react/src/utils/position-children-under-views.ts"],"sourcesContent":["import * as React from 'react';\nimport {createElement} from 'react';\nimport {View} from '@deck.gl/core';\nimport {inheritsFrom} from './inherits-from';\nimport evaluateChildren, {isComponent} from './evaluate-children';\n\nimport type {Deck, DeckProps, Viewport} from '@deck.gl/core';\nimport type {EventManager} from 'mjolnir.js';\n\nexport type DeckGLContextValue = {\n  viewport: Viewport;\n  container: HTMLElement;\n  eventManager: EventManager;\n  onViewStateChange: DeckProps['onViewStateChange'];\n};\n\n// Iterate over views and reposition children associated with views\n// TODO - Can we supply a similar function for the non-React case?\nexport default function positionChildrenUnderViews({\n  children,\n  deck,\n  ContextProvider\n}: {\n  children: React.ReactNode[];\n  deck?: Deck;\n  ContextProvider?: React.Context<DeckGLContextValue>['Provider'];\n}): React.ReactNode[] {\n  // @ts-expect-error accessing protected property\n  const {viewManager} = deck || {};\n\n  if (!viewManager || !viewManager.views.length) {\n    return [];\n  }\n\n  const views: Record<\n    string,\n    {\n      viewport: Viewport;\n      children: React.ReactNode[];\n    }\n  > = {};\n  const defaultViewId = (viewManager.views[0] as View).id;\n\n  // Sort children by view id\n  for (const child of children) {\n    // Unless child is a View, position / render as part of the default view\n    let viewId = defaultViewId;\n    let viewChildren = child;\n\n    if (isComponent(child) && inheritsFrom(child.type, View)) {\n      viewId = child.props.id || defaultViewId;\n      viewChildren = child.props.children;\n    }\n\n    const viewport = viewManager.getViewport(viewId) as Viewport;\n    const viewState = viewManager.getViewState(viewId);\n\n    // Drop (auto-hide) elements with viewId that are not matched by any current view\n    if (viewport) {\n      viewState.padding = viewport.padding;\n      const {x, y, width, height} = viewport;\n      // Resolve potentially relative dimensions using the deck.gl container size\n      viewChildren = evaluateChildren(viewChildren, {\n        x,\n        y,\n        width,\n        height,\n        viewport,\n        viewState\n      });\n\n      if (!views[viewId]) {\n        views[viewId] = {\n          viewport,\n          children: []\n        };\n      }\n      views[viewId].children.push(viewChildren);\n    }\n  }\n\n  // Render views\n  return Object.keys(views).map(viewId => {\n    const {viewport, children: viewChildren} = views[viewId];\n    const {x, y, width, height} = viewport;\n    const style = {\n      position: 'absolute',\n      left: x,\n      top: y,\n      width,\n      height\n    };\n\n    const key = `view-${viewId}`;\n    // If children is passed as an array, React will throw the \"each element in a list needs\n    // a key\" warning. Sending each child as separate arguments removes this requirement.\n    const viewElement = createElement('div', {key, id: key, style}, ...viewChildren);\n\n    if (ContextProvider) {\n      const contextValue: DeckGLContextValue = {\n        viewport,\n        // @ts-expect-error accessing protected property\n        container: deck.canvas.offsetParent,\n        // @ts-expect-error accessing protected property\n        eventManager: deck.eventManager,\n        onViewStateChange: params => {\n          params.viewId = viewId;\n          // @ts-expect-error accessing protected method\n          deck._onViewStateChange(params);\n        }\n      };\n      return createElement(ContextProvider, {key, value: contextValue}, viewElement);\n    }\n\n    return viewElement;\n  });\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}