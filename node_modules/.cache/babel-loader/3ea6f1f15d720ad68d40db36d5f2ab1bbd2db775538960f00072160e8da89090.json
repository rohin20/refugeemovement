{"ast":null,"code":"import _classCallCheck from \"/Users/rohinphukan/Desktop/RefugeeWebsite/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/rohinphukan/Desktop/RefugeeWebsite/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _get from \"/Users/rohinphukan/Desktop/RefugeeWebsite/node_modules/@babel/runtime/helpers/esm/get.js\";\nimport _getPrototypeOf from \"/Users/rohinphukan/Desktop/RefugeeWebsite/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\";\nimport _inherits from \"/Users/rohinphukan/Desktop/RefugeeWebsite/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/Users/rohinphukan/Desktop/RefugeeWebsite/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport { TILE3D_OPTIMIZATION_HINT, TILE_REFINEMENT } from '../../constants';\nimport { TilesetTraverser } from '../tileset-traverser';\nexport var Tileset3DTraverser = /*#__PURE__*/function (_TilesetTraverser) {\n  _inherits(Tileset3DTraverser, _TilesetTraverser);\n  var _super = _createSuper(Tileset3DTraverser);\n  function Tileset3DTraverser() {\n    _classCallCheck(this, Tileset3DTraverser);\n    return _super.apply(this, arguments);\n  }\n  _createClass(Tileset3DTraverser, [{\n    key: \"compareDistanceToCamera\",\n    value: function compareDistanceToCamera(a, b) {\n      return b._distanceToCamera === 0 && a._distanceToCamera === 0 ? b._centerZDepth - a._centerZDepth : b._distanceToCamera - a._distanceToCamera;\n    }\n  }, {\n    key: \"updateTileVisibility\",\n    value: function updateTileVisibility(tile, frameState) {\n      _get(_getPrototypeOf(Tileset3DTraverser.prototype), \"updateTileVisibility\", this).call(this, tile, frameState);\n      if (!tile.isVisibleAndInRequestVolume) {\n        return;\n      }\n      var hasChildren = tile.children.length > 0;\n      if (tile.hasTilesetContent && hasChildren) {\n        var firstChild = tile.children[0];\n        this.updateTileVisibility(firstChild, frameState);\n        tile._visible = firstChild._visible;\n        return;\n      }\n      if (this.meetsScreenSpaceErrorEarly(tile, frameState)) {\n        tile._visible = false;\n        return;\n      }\n      var replace = tile.refine === TILE_REFINEMENT.REPLACE;\n      var useOptimization = tile._optimChildrenWithinParent === TILE3D_OPTIMIZATION_HINT.USE_OPTIMIZATION;\n      if (replace && useOptimization && hasChildren) {\n        if (!this.anyChildrenVisible(tile, frameState)) {\n          tile._visible = false;\n          return;\n        }\n      }\n    }\n  }, {\n    key: \"meetsScreenSpaceErrorEarly\",\n    value: function meetsScreenSpaceErrorEarly(tile, frameState) {\n      var parent = tile.parent;\n      if (!parent || parent.hasTilesetContent || parent.refine !== TILE_REFINEMENT.ADD) {\n        return false;\n      }\n      return !this.shouldRefine(tile, frameState, true);\n    }\n  }]);\n  return Tileset3DTraverser;\n}(TilesetTraverser);","map":{"version":3,"names":["TILE3D_OPTIMIZATION_HINT","TILE_REFINEMENT","TilesetTraverser","Tileset3DTraverser","_TilesetTraverser","_inherits","_super","_createSuper","_classCallCheck","apply","arguments","_createClass","key","value","compareDistanceToCamera","a","b","_distanceToCamera","_centerZDepth","updateTileVisibility","tile","frameState","_get","_getPrototypeOf","prototype","call","isVisibleAndInRequestVolume","hasChildren","children","length","hasTilesetContent","firstChild","_visible","meetsScreenSpaceErrorEarly","replace","refine","REPLACE","useOptimization","_optimChildrenWithinParent","USE_OPTIMIZATION","anyChildrenVisible","parent","ADD","shouldRefine"],"sources":["/Users/rohinphukan/Desktop/RefugeeWebsite/node_modules/@deck.gl/geo-layers/node_modules/@loaders.gl/tiles/src/tileset/format-3d-tiles/tileset-3d-traverser.ts"],"sourcesContent":["// loaders.gl, MIT license\n\n// This file is derived from the Cesium code base under Apache 2 license\n// See LICENSE.md and https://github.com/AnalyticalGraphicsInc/cesium/blob/master/LICENSE.md\n\nimport {TILE3D_OPTIMIZATION_HINT, TILE_REFINEMENT} from '../../constants';\nimport {TilesetTraverser} from '../tileset-traverser';\n\nexport class Tileset3DTraverser extends TilesetTraverser {\n  compareDistanceToCamera(a, b) {\n    // Sort by farthest child first since this is going on a stack\n    return b._distanceToCamera === 0 && a._distanceToCamera === 0\n      ? b._centerZDepth - a._centerZDepth\n      : b._distanceToCamera - a._distanceToCamera;\n  }\n\n  updateTileVisibility(tile, frameState) {\n    super.updateTileVisibility(tile, frameState);\n\n    //  Optimization - if none of the tile's children are visible then this tile isn't visible\n    if (!tile.isVisibleAndInRequestVolume) {\n      return;\n    }\n\n    const hasChildren = tile.children.length > 0;\n    if (tile.hasTilesetContent && hasChildren) {\n      // Use the root tile's visibility instead of this tile's visibility.\n      // The root tile may be culled by the children bounds optimization in which\n      // case this tile should also be culled.\n      const firstChild = tile.children[0];\n      this.updateTileVisibility(firstChild, frameState);\n      tile._visible = firstChild._visible;\n      return;\n    }\n\n    if (this.meetsScreenSpaceErrorEarly(tile, frameState)) {\n      tile._visible = false;\n      return;\n    }\n\n    const replace = tile.refine === TILE_REFINEMENT.REPLACE;\n    const useOptimization =\n      tile._optimChildrenWithinParent === TILE3D_OPTIMIZATION_HINT.USE_OPTIMIZATION;\n    if (replace && useOptimization && hasChildren) {\n      if (!this.anyChildrenVisible(tile, frameState)) {\n        tile._visible = false;\n        return;\n      }\n    }\n  }\n\n  meetsScreenSpaceErrorEarly(tile, frameState) {\n    const {parent} = tile;\n    if (!parent || parent.hasTilesetContent || parent.refine !== TILE_REFINEMENT.ADD) {\n      return false;\n    }\n\n    // Use parent's geometric error with child's box to see if the tile already meet the SSE\n    return !this.shouldRefine(tile, frameState, true);\n  }\n}\n"],"mappings":";;;;;;AAKA,SAAQA,wBAAwB,EAAEC,eAAe,QAAO,iBAAiB;AACzE,SAAQC,gBAAgB,QAAO,sBAAsB;AAErD,WAAaC,kBAAkB,0BAAAC,iBAAA;EAAAC,SAAA,CAAAF,kBAAA,EAAAC,iBAAA;EAAA,IAAAE,MAAA,GAAAC,YAAA,CAAAJ,kBAAA;EAAA,SAAAA,mBAAA;IAAAK,eAAA,OAAAL,kBAAA;IAAA,OAAAG,MAAA,CAAAG,KAAA,OAAAC,SAAA;EAAA;EAAAC,YAAA,CAAAR,kBAAA;IAAAS,GAAA;IAAAC,KAAA,EAC7B,SAAAC,wBAAwBC,CAAC,EAAEC,CAAC,EAAE;MAE5B,OAAOA,CAAC,CAACC,iBAAiB,KAAK,CAAC,IAAIF,CAAC,CAACE,iBAAiB,KAAK,CAAC,GACzDD,CAAC,CAACE,aAAa,GAAGH,CAAC,CAACG,aAAa,GACjCF,CAAC,CAACC,iBAAiB,GAAGF,CAAC,CAACE,iBAAiB;IAC/C;EAAA;IAAAL,GAAA;IAAAC,KAAA,EAEA,SAAAM,qBAAqBC,IAAI,EAAEC,UAAU,EAAE;MACrCC,IAAA,CAAAC,eAAA,CAAApB,kBAAA,CAAAqB,SAAA,iCAAAC,IAAA,OAA2BL,IAAI,EAAEC,UAAU;MAG3C,IAAI,CAACD,IAAI,CAACM,2BAA2B,EAAE;QACrC;MACF;MAEA,IAAMC,WAAW,GAAGP,IAAI,CAACQ,QAAQ,CAACC,MAAM,GAAG,CAAC;MAC5C,IAAIT,IAAI,CAACU,iBAAiB,IAAIH,WAAW,EAAE;QAIzC,IAAMI,UAAU,GAAGX,IAAI,CAACQ,QAAQ,CAAC,CAAC,CAAC;QACnC,IAAI,CAACT,oBAAoB,CAACY,UAAU,EAAEV,UAAU,CAAC;QACjDD,IAAI,CAACY,QAAQ,GAAGD,UAAU,CAACC,QAAQ;QACnC;MACF;MAEA,IAAI,IAAI,CAACC,0BAA0B,CAACb,IAAI,EAAEC,UAAU,CAAC,EAAE;QACrDD,IAAI,CAACY,QAAQ,GAAG,KAAK;QACrB;MACF;MAEA,IAAME,OAAO,GAAGd,IAAI,CAACe,MAAM,KAAKlC,eAAe,CAACmC,OAAO;MACvD,IAAMC,eAAe,GACnBjB,IAAI,CAACkB,0BAA0B,KAAKtC,wBAAwB,CAACuC,gBAAgB;MAC/E,IAAIL,OAAO,IAAIG,eAAe,IAAIV,WAAW,EAAE;QAC7C,IAAI,CAAC,IAAI,CAACa,kBAAkB,CAACpB,IAAI,EAAEC,UAAU,CAAC,EAAE;UAC9CD,IAAI,CAACY,QAAQ,GAAG,KAAK;UACrB;QACF;MACF;IACF;EAAA;IAAApB,GAAA;IAAAC,KAAA,EAEA,SAAAoB,2BAA2Bb,IAAI,EAAEC,UAAU,EAAE;MAC3C,IAAOoB,MAAA,GAAUrB,IAAI,CAAdqB,MAAA;MACP,IAAI,CAACA,MAAM,IAAIA,MAAM,CAACX,iBAAiB,IAAIW,MAAM,CAACN,MAAM,KAAKlC,eAAe,CAACyC,GAAG,EAAE;QAChF,OAAO,KAAK;MACd;MAGA,OAAO,CAAC,IAAI,CAACC,YAAY,CAACvB,IAAI,EAAEC,UAAU,EAAE,IAAI,CAAC;IACnD;EAAA;EAAA,OAAAlB,kBAAA;AAAA,EAnDsCD,gBAAgB"},"metadata":{},"sourceType":"module","externalDependencies":[]}