{"ast":null,"code":"import _objectSpread from \"/Users/rohinphukan/Desktop/RefugeeWebsite/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _defineProperty2 from \"/Users/rohinphukan/Desktop/RefugeeWebsite/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _classCallCheck from \"/Users/rohinphukan/Desktop/RefugeeWebsite/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/rohinphukan/Desktop/RefugeeWebsite/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _assertThisInitialized from \"/Users/rohinphukan/Desktop/RefugeeWebsite/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";\nimport _get from \"/Users/rohinphukan/Desktop/RefugeeWebsite/node_modules/@babel/runtime/helpers/esm/get.js\";\nimport _getPrototypeOf from \"/Users/rohinphukan/Desktop/RefugeeWebsite/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\";\nimport _inherits from \"/Users/rohinphukan/Desktop/RefugeeWebsite/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/Users/rohinphukan/Desktop/RefugeeWebsite/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { Framebuffer, Texture2D, withParameters } from '@luma.gl/core';\nimport { OPERATION } from '../lib/constants';\nimport LayersPass from './layers-pass';\nvar MaskPass = /*#__PURE__*/function (_LayersPass) {\n  _inherits(MaskPass, _LayersPass);\n  var _super = _createSuper(MaskPass);\n  function MaskPass(gl, props) {\n    var _parameters;\n    var _this;\n    _classCallCheck(this, MaskPass);\n    _this = _super.call(this, gl, props);\n    _defineProperty(_assertThisInitialized(_this), \"maskMap\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"fbo\", void 0);\n    var _props$mapSize = props.mapSize,\n      mapSize = _props$mapSize === void 0 ? 2048 : _props$mapSize;\n    _this.maskMap = new Texture2D(gl, {\n      width: mapSize,\n      height: mapSize,\n      parameters: (_parameters = {}, _defineProperty2(_parameters, 10241, 9729), _defineProperty2(_parameters, 10240, 9729), _defineProperty2(_parameters, 10242, 33071), _defineProperty2(_parameters, 10243, 33071), _parameters)\n    });\n    _this.fbo = new Framebuffer(gl, {\n      id: 'maskmap',\n      width: mapSize,\n      height: mapSize,\n      attachments: _defineProperty2({}, 36064, _this.maskMap)\n    });\n    return _this;\n  }\n  _createClass(MaskPass, [{\n    key: \"render\",\n    value: function render(options) {\n      var _this2 = this;\n      var gl = this.gl;\n      var colorMask = [false, false, false, false];\n      colorMask[options.channel] = true;\n      return withParameters(gl, {\n        clearColor: [255, 255, 255, 255],\n        blend: true,\n        blendFunc: [0, 1],\n        blendEquation: 32778,\n        colorMask: colorMask,\n        depthTest: false\n      }, function () {\n        return _get(_getPrototypeOf(MaskPass.prototype), \"render\", _this2).call(_this2, _objectSpread(_objectSpread({}, options), {}, {\n          target: _this2.fbo,\n          pass: 'mask'\n        }));\n      });\n    }\n  }, {\n    key: \"shouldDrawLayer\",\n    value: function shouldDrawLayer(layer) {\n      return layer.props.operation === OPERATION.MASK;\n    }\n  }, {\n    key: \"delete\",\n    value: function _delete() {\n      this.fbo.delete();\n      this.maskMap.delete();\n    }\n  }]);\n  return MaskPass;\n}(LayersPass);\nexport { MaskPass as default };","map":{"version":3,"names":["Framebuffer","Texture2D","withParameters","OPERATION","LayersPass","MaskPass","_LayersPass","_inherits","_super","_createSuper","gl","props","_parameters","_this","_classCallCheck","call","_defineProperty","_assertThisInitialized","_props$mapSize","mapSize","maskMap","width","height","parameters","_defineProperty2","fbo","id","attachments","_createClass","key","value","render","options","_this2","colorMask","channel","clearColor","blend","blendFunc","blendEquation","depthTest","_get","_getPrototypeOf","prototype","_objectSpread","target","pass","shouldDrawLayer","layer","operation","MASK","_delete","delete","default"],"sources":["/Users/rohinphukan/Desktop/RefugeeWebsite/node_modules/@deck.gl/core/src/passes/mask-pass.ts"],"sourcesContent":["import {Framebuffer, Texture2D, withParameters} from '@luma.gl/core';\nimport {OPERATION} from '../lib/constants';\nimport LayersPass from './layers-pass';\n\nimport type {LayersPassRenderOptions} from './layers-pass';\n\ntype MaskPassRenderOptions = LayersPassRenderOptions & {\n  /** The channel to render into, 0:red, 1:green, 2:blue, 3:alpha */\n  channel: number;\n};\n\nexport default class MaskPass extends LayersPass {\n  maskMap: Texture2D;\n  fbo: Framebuffer;\n\n  constructor(gl, props: {id: string; mapSize?: number}) {\n    super(gl, props);\n\n    const {mapSize = 2048} = props;\n\n    this.maskMap = new Texture2D(gl, {\n      width: mapSize,\n      height: mapSize,\n      parameters: {\n        [gl.TEXTURE_MIN_FILTER]: gl.LINEAR,\n        [gl.TEXTURE_MAG_FILTER]: gl.LINEAR,\n        [gl.TEXTURE_WRAP_S]: gl.CLAMP_TO_EDGE,\n        [gl.TEXTURE_WRAP_T]: gl.CLAMP_TO_EDGE\n      }\n    });\n\n    this.fbo = new Framebuffer(gl, {\n      id: 'maskmap',\n      width: mapSize,\n      height: mapSize,\n      attachments: {\n        [gl.COLOR_ATTACHMENT0]: this.maskMap\n      }\n    });\n  }\n\n  render(options: MaskPassRenderOptions) {\n    const gl = this.gl;\n\n    const colorMask = [false, false, false, false];\n    colorMask[options.channel] = true;\n\n    return withParameters(\n      gl,\n      {\n        clearColor: [255, 255, 255, 255],\n        blend: true,\n        blendFunc: [gl.ZERO, gl.ONE],\n        blendEquation: gl.FUNC_SUBTRACT,\n        colorMask,\n        depthTest: false\n      },\n      () => super.render({...options, target: this.fbo, pass: 'mask'})\n    );\n  }\n\n  shouldDrawLayer(layer) {\n    return layer.props.operation === OPERATION.MASK;\n  }\n\n  delete() {\n    this.fbo.delete();\n    this.maskMap.delete();\n  }\n}\n"],"mappings":";;;;;;;;;;AAAA,SAAQA,WAAR,EAAqBC,SAArB,EAAgCC,cAAhC,QAAqD,eAArD;AACA,SAAQC,SAAR,QAAwB,kBAAxB;AACA,OAAOC,UAAP,MAAuB,eAAvB;AAAA,IASqBC,QAAN,0BAAAC,WAAA;EAAAC,SAAA,CAAAF,QAAA,EAAAC,WAAA;EAAA,IAAAE,MAAA,GAAAC,YAAA,CAAAJ,QAAA;EAIb,SAAAA,SAAYK,EAAD,EAAKC,KAAL,EAA4C;IAAA,IAAAC,WAAA;IAAA,IAAAC,KAAA;IAAAC,eAAA,OAAAT,QAAA;IACrDQ,KAAA,GAAAL,MAAA,CAAAO,IAAA,OAAML,EAAN,EAAUC,KAAV;IADqDK,eAAA,CAAAC,sBAAA,CAAAJ,KAAA;IAAAG,eAAA,CAAAC,sBAAA,CAAAJ,KAAA;IAGrD,IAAAK,cAAA,GAAyBP,KAAzB,CAAOQ,OAAO;MAAPA,OAAO,GAAAD,cAAA,cAAG,OAAAA,cAAA;IAEjBL,KAAA,CAAKO,OAAL,GAAe,IAAInB,SAAJ,CAAcS,EAAd,EAAkB;MAC/BW,KAAK,EAAEF,OADwB;MAE/BG,MAAM,EAAEH,OAFuB;MAG/BI,UAAU,GAAAX,WAAA,OAAAY,gBAAA,CAAAZ,WAAA,EACR,WADU,GAAAY,gBAAA,CAAAZ,WAAA,EAEV,WAFU,GAAAY,gBAAA,CAAAZ,WAAA,EAGV,YAHU,GAAAY,gBAAA,CAAAZ,WAAA,EAIV,eAAAA,WAAA;IAP6B,CAAlB,CAAf;IAWAC,KAAA,CAAKY,GAAL,GAAW,IAAIzB,WAAJ,CAAgBU,EAAhB,EAAoB;MAC7BgB,EAAE,EAAE,SADyB;MAE7BL,KAAK,EAAEF,OAFsB;MAG7BG,MAAM,EAAEH,OAHqB;MAI7BQ,WAAW,EAAAH,gBAAA,KACT,OAAwBX,KAAA,CAAKO,OAAA;IALF,CAApB,CAAX;IAAA,OAAAP,KAAA;EAQD;EAAAe,YAAA,CAAAvB,QAAA;IAAAwB,GAAA;IAAAC,KAAA,EAED,SAAAC,OAAOC,OAAD,EAAiC;MAAA,IAAAC,MAAA;MACrC,IAAMvB,EAAE,GAAG,KAAKA,EAAhB;MAEA,IAAMwB,SAAS,GAAG,CAAC,KAAD,EAAQ,KAAR,EAAe,KAAf,EAAsB,KAAtB,CAAlB;MACAA,SAAS,CAACF,OAAO,CAACG,OAAT,CAAT,GAA6B,IAA7B;MAEA,OAAOjC,cAAc,CACnBQ,EADmB,EAEnB;QACE0B,UAAU,EAAE,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAgB,GAAhB,CADd;QAEEC,KAAK,EAAE,IAFT;QAGEC,SAAS,EAAE,MAHb;QAIEC,aAAa,OAJf;QAKEL,SALF,EAKEA,SALF;QAMEM,SAAS,EAAE;MANb,CAFmB,EAUnB;QAAA,OAAAC,IAAA,CAAAC,eAAA,CAAArC,QAAA,CAAAsC,SAAA,aAAAV,MAAA,EAAAlB,IAAA,CAAAkB,MAAA,EAAAW,aAAA,CAAAA,aAAA,KAAuBZ,OAAJ;UAAaa,MAAM,EAAEZ,MAAA,CAAKR,GAA1B;UAA+BqB,IAAI,EAAE;QAAA;MAAA,CAVrC,CAArB;IAYD;EAAA;IAAAjB,GAAA;IAAAC,KAAA,EAED,SAAAiB,gBAAgBC,KAAD,EAAQ;MACrB,OAAOA,KAAK,CAACrC,KAAN,CAAYsC,SAAZ,KAA0B9C,SAAS,CAAC+C,IAA3C;IACD;EAAA;IAAArB,GAAA;IAAAC,KAAA,EAED,SAAAqB,QAAA,EAAS;MACP,KAAK1B,GAAL,CAAS2B,MAAT;MACA,KAAKhC,OAAL,CAAagC,MAAb;IACD;EAAA;EAAA,OAAA/C,QAAA;AAAA,EAzDmCD,UAAvB;AAAA,SAAMC,QAAN,IAAAgD,OAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}