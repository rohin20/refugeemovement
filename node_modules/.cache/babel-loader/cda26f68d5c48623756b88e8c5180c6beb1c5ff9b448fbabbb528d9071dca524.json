{"ast":null,"code":"import _objectSpread from \"/Users/rohinphukan/Desktop/RefugeeWebsite/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _classCallCheck from \"/Users/rohinphukan/Desktop/RefugeeWebsite/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/rohinphukan/Desktop/RefugeeWebsite/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport ClarinetParser from '../clarinet/clarinet';\nimport JSONPath from '../jsonpath/jsonpath';\nvar JSONParser = /*#__PURE__*/function () {\n  function JSONParser(options) {\n    var _this = this;\n    _classCallCheck(this, JSONParser);\n    _defineProperty(this, \"parser\", void 0);\n    _defineProperty(this, \"result\", undefined);\n    _defineProperty(this, \"previousStates\", []);\n    _defineProperty(this, \"currentState\", Object.freeze({\n      container: [],\n      key: null\n    }));\n    _defineProperty(this, \"jsonpath\", new JSONPath());\n    this.reset();\n    this.parser = new ClarinetParser(_objectSpread({\n      onready: function onready() {\n        _this.jsonpath = new JSONPath();\n        _this.previousStates.length = 0;\n        _this.currentState.container.length = 0;\n      },\n      onopenobject: function onopenobject(name) {\n        _this._openObject({});\n        if (typeof name !== 'undefined') {\n          _this.parser.emit('onkey', name);\n        }\n      },\n      onkey: function onkey(name) {\n        _this.jsonpath.set(name);\n        _this.currentState.key = name;\n      },\n      oncloseobject: function oncloseobject() {\n        _this._closeObject();\n      },\n      onopenarray: function onopenarray() {\n        _this._openArray();\n      },\n      onclosearray: function onclosearray() {\n        _this._closeArray();\n      },\n      onvalue: function onvalue(value) {\n        _this._pushOrSet(value);\n      },\n      onerror: function onerror(error) {\n        throw error;\n      },\n      onend: function onend() {\n        _this.result = _this.currentState.container.pop();\n      }\n    }, options));\n  }\n  _createClass(JSONParser, [{\n    key: \"reset\",\n    value: function reset() {\n      this.result = undefined;\n      this.previousStates = [];\n      this.currentState = Object.freeze({\n        container: [],\n        key: null\n      });\n      this.jsonpath = new JSONPath();\n    }\n  }, {\n    key: \"write\",\n    value: function write(chunk) {\n      this.parser.write(chunk);\n    }\n  }, {\n    key: \"close\",\n    value: function close() {\n      this.parser.close();\n    }\n  }, {\n    key: \"_pushOrSet\",\n    value: function _pushOrSet(value) {\n      var _this$currentState = this.currentState,\n        container = _this$currentState.container,\n        key = _this$currentState.key;\n      if (key !== null) {\n        container[key] = value;\n        this.currentState.key = null;\n      } else {\n        container.push(value);\n      }\n    }\n  }, {\n    key: \"_openArray\",\n    value: function _openArray() {\n      var newContainer = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n      this.jsonpath.push(null);\n      this._pushOrSet(newContainer);\n      this.previousStates.push(this.currentState);\n      this.currentState = {\n        container: newContainer,\n        isArray: true,\n        key: null\n      };\n    }\n  }, {\n    key: \"_closeArray\",\n    value: function _closeArray() {\n      this.jsonpath.pop();\n      this.currentState = this.previousStates.pop();\n    }\n  }, {\n    key: \"_openObject\",\n    value: function _openObject() {\n      var newContainer = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      this.jsonpath.push(null);\n      this._pushOrSet(newContainer);\n      this.previousStates.push(this.currentState);\n      this.currentState = {\n        container: newContainer,\n        isArray: false,\n        key: null\n      };\n    }\n  }, {\n    key: \"_closeObject\",\n    value: function _closeObject() {\n      this.jsonpath.pop();\n      this.currentState = this.previousStates.pop();\n    }\n  }]);\n  return JSONParser;\n}();\nexport { JSONParser as default };","map":{"version":3,"names":["ClarinetParser","JSONPath","JSONParser","options","_this","_classCallCheck","_defineProperty","undefined","Object","freeze","container","key","reset","parser","_objectSpread","onready","jsonpath","previousStates","length","currentState","onopenobject","name","_openObject","emit","onkey","set","oncloseobject","_closeObject","onopenarray","_openArray","onclosearray","_closeArray","onvalue","value","_pushOrSet","onerror","error","onend","result","pop","_createClass","write","chunk","close","_this$currentState","push","newContainer","arguments","isArray","default"],"sources":["/Users/rohinphukan/Desktop/RefugeeWebsite/node_modules/@kepler.gl/processors/node_modules/@loaders.gl/json/src/lib/parser/json-parser.ts"],"sourcesContent":["// @ts-nocheck\n\nimport ClarinetParser, {ClarinetParserOptions} from '../clarinet/clarinet';\nimport JSONPath from '../jsonpath/jsonpath';\n\n// JSONParser builds a JSON object using the events emitted by the Clarinet parser\n\nexport default class JSONParser {\n  readonly parser: ClarinetParser;\n  result = undefined;\n  previousStates = [];\n  currentState = Object.freeze({container: [], key: null});\n  jsonpath: JSONPath = new JSONPath();\n\n  constructor(options: ClarinetParserOptions) {\n    this.reset();\n    this.parser = new ClarinetParser({\n      onready: () => {\n        this.jsonpath = new JSONPath();\n        this.previousStates.length = 0;\n        this.currentState.container.length = 0;\n      },\n\n      onopenobject: (name) => {\n        this._openObject({});\n        if (typeof name !== 'undefined') {\n          this.parser.emit('onkey', name);\n        }\n      },\n\n      onkey: (name) => {\n        this.jsonpath.set(name);\n        this.currentState.key = name;\n      },\n\n      oncloseobject: () => {\n        this._closeObject();\n      },\n\n      onopenarray: () => {\n        this._openArray();\n      },\n\n      onclosearray: () => {\n        this._closeArray();\n      },\n\n      onvalue: (value) => {\n        this._pushOrSet(value);\n      },\n\n      onerror: (error) => {\n        throw error;\n      },\n\n      onend: () => {\n        this.result = this.currentState.container.pop();\n      },\n\n      ...options\n    });\n  }\n\n  reset(): void {\n    this.result = undefined;\n    this.previousStates = [];\n    this.currentState = Object.freeze({container: [], key: null});\n    this.jsonpath = new JSONPath();\n  }\n\n  write(chunk): void {\n    this.parser.write(chunk);\n  }\n\n  close(): void {\n    this.parser.close();\n  }\n\n  // PRIVATE METHODS\n\n  _pushOrSet(value): void {\n    const {container, key} = this.currentState;\n    if (key !== null) {\n      container[key] = value;\n      this.currentState.key = null;\n    } else {\n      container.push(value);\n    }\n  }\n\n  _openArray(newContainer = []): void {\n    this.jsonpath.push(null);\n    this._pushOrSet(newContainer);\n    this.previousStates.push(this.currentState);\n    this.currentState = {container: newContainer, isArray: true, key: null};\n  }\n\n  _closeArray(): void {\n    this.jsonpath.pop();\n    this.currentState = this.previousStates.pop();\n  }\n\n  _openObject(newContainer = {}): void {\n    this.jsonpath.push(null);\n    this._pushOrSet(newContainer);\n    this.previousStates.push(this.currentState);\n    this.currentState = {container: newContainer, isArray: false, key: null};\n  }\n\n  _closeObject(): void {\n    this.jsonpath.pop();\n    this.currentState = this.previousStates.pop();\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}