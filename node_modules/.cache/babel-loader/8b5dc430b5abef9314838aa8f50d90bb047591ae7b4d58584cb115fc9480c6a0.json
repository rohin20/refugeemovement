{"ast":null,"code":"// Copyright (c) 2022 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\nvar _taggedTemplateLiteral2 = _interopRequireDefault(require(\"@babel/runtime/helpers/taggedTemplateLiteral\"));\nvar _react = _interopRequireWildcard(require(\"react\"));\nvar _styledComponents = _interopRequireWildcard(require(\"styled-components\"));\nvar _d3Selection = require(\"d3-selection\");\nvar _d3Brush = require(\"d3-brush\");\nvar _utils = require(\"@kepler.gl/utils\");\nvar _templateObject;\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n  return function _createSuperInternal() {\n    var Super = (0, _getPrototypeOf2[\"default\"])(Derived),\n      result;\n    if (hasNativeReflectConstruct) {\n      var NewTarget = (0, _getPrototypeOf2[\"default\"])(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return (0, _possibleConstructorReturn2[\"default\"])(this, result);\n  };\n}\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nvar StyledG = _styledComponents[\"default\"].g(_templateObject || (_templateObject = (0, _taggedTemplateLiteral2[\"default\"])([\"\\n  .selection {\\n    stroke: none;\\n    fill: \", \";\\n    fill-opacity: \", \";\\n  }\\n  .handle {\\n    fill: \", \";\\n    fill-opacity: 0.3;\\n  }\\n\"])), function (props) {\n  return props.isRanged ? props.theme.rangeBrushBgd : props.theme.BLUE2;\n}, function (props) {\n  return props.isRanged ? 0.3 : 1;\n}, function (props) {\n  return props.theme.BLUE2;\n});\nfunction moveRight(startSel, selection) {\n  var _startSel = (0, _slicedToArray2[\"default\"])(startSel, 1),\n    startSel0 = _startSel[0];\n  var _selection = (0, _slicedToArray2[\"default\"])(selection, 1),\n    sel0 = _selection[0];\n  return Boolean(startSel0 === sel0);\n} // style brush resize handle\n// https://github.com/crossfilter/crossfilter/blob/gh-pages/index.html#L466\n\nvar getHandlePath = function getHandlePath(props) {\n  return function brushResizePath(d) {\n    var e = Number(d.type === 'e');\n    var x = e ? 1 : -1;\n    var h = 39;\n    var w = 4.5;\n    var y = (props.height - h) / 2;\n    return \"M\".concat(0.5 * x, \",\").concat(y, \"c\").concat(2.5 * x, \",0,\").concat(w * x, \",2,\").concat(w * x, \",\").concat(w, \"v\").concat(h - w * 2, \"c0,2.5,\").concat(-2 * x, \",\").concat(w, \",\").concat(-w * x, \",\").concat(w, \"V\").concat(y, \"z\");\n  };\n};\nfunction RangeBrushFactory() {\n  var RangeBrush = /*#__PURE__*/function (_Component) {\n    (0, _inherits2[\"default\"])(RangeBrush, _Component);\n    var _super = _createSuper(RangeBrush);\n    function RangeBrush() {\n      var _this;\n      (0, _classCallCheck2[\"default\"])(this, RangeBrush);\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n      _this = _super.call.apply(_super, [this].concat(args));\n      (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"rootContainer\", /*#__PURE__*/(0, _react.createRef)());\n      (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"brushing\", false);\n      (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"moving\", false);\n      (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"root\", _this.rootContainer.current ? (0, _d3Selection.select)(_this.rootContainer.current) : undefined);\n      (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"brush\", void 0);\n      (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"_startSel\", void 0);\n      (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"_lastSel\", void 0);\n      (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"handle\", void 0);\n      (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"_brushed\", function (evt) {\n        var _this2;\n\n        // Ignore brush events which don't have an underlying sourceEvent\n        if (!evt.sourceEvent) return;\n        var _evt$selection = (0, _slicedToArray2[\"default\"])(evt.selection, 2),\n          sel0 = _evt$selection[0],\n          sel1 = _evt$selection[1];\n        var right = moveRight(_this._startSel, evt.selection);\n        var _this$props = _this.props,\n          _this$props$range = (0, _slicedToArray2[\"default\"])(_this$props.range, 2),\n          min = _this$props$range[0],\n          max = _this$props$range[1],\n          _this$props$step = _this$props.step,\n          step = _this$props$step === void 0 ? 0 : _this$props$step,\n          width = _this$props.width,\n          marks = _this$props.marks,\n          isRanged = _this$props.isRanged;\n        var invert = function invert(x) {\n          return x * (max - min) / width + min;\n        };\n        var d0 = invert(sel0);\n        var d1 = invert(sel1);\n        d0 = (0, _utils.normalizeSliderValue)(d0, min, step, marks);\n        d1 = (0, _utils.normalizeSliderValue)(d1, min, step, marks);\n        if (isRanged) _this._move(d0, d1);else (_this2 = _this)._move.apply(_this2, (0, _toConsumableArray2[\"default\"])(right ? [d1, d1] : [d0, d0]));\n        if (isRanged) _this._onBrush(d0, d1);else _this._onBrush(right ? d1 : d0);\n      });\n      return _this;\n    }\n    (0, _createClass2[\"default\"])(RangeBrush, [{\n      key: \"componentDidMount\",\n      value: function componentDidMount() {\n        var _this3 = this,\n          _this$root,\n          _this$root2;\n\n        // We want the React app to respond to brush state and vice-versa\n        // but d3-brush fires the same events for both user-initiated brushing\n        // and programmatic brushing (brush.move). We need these flags to\n        // distinguish between the uses.\n        //\n        // We don't use state because that would trigger another `componentDidUpdate`\n        var _this$props2 = this.props,\n          theme = _this$props2.theme,\n          isRanged = _this$props2.isRanged,\n          onMouseoverHandle = _this$props2.onMouseoverHandle,\n          onMouseoutHandle = _this$props2.onMouseoutHandle;\n        this.root = this.rootContainer.current ? (0, _d3Selection.select)(this.rootContainer.current) : undefined;\n        this.brush = (0, _d3Brush.brushX)().handleSize(3).on('start', function (event) {\n          if (typeof _this3.props.onBrushStart === 'function') _this3.props.onBrushStart();\n          _this3._startSel = event.selection;\n        }).on('brush', function (event) {\n          if (_this3.moving) {\n            return;\n          }\n          if (event.selection) {\n            _this3._lastSel = event.selection;\n            _this3.brushing = true;\n            _this3._brushed(event);\n          }\n        }).on('end', function (event) {\n          if (!event.selection) {\n            if (_this3.brushing) {\n              // handle null selection\n              _this3._click(_this3._lastSel);\n            } else if (_this3._startSel) {\n              // handle click\n              _this3._click(_this3._startSel);\n            }\n          }\n          if (typeof _this3.props.onBrushEnd === 'function') _this3.props.onBrushEnd();\n          _this3.brushing = false;\n          _this3.moving = false;\n        });\n        (_this$root = this.root) === null || _this$root === void 0 ? void 0 : _this$root.call(this.brush);\n        var brushResizePath = getHandlePath(this.props);\n        this.handle = (_this$root2 = this.root) === null || _this$root2 === void 0 ? void 0 : _this$root2.selectAll('.handle--custom').data([{\n          type: 'w'\n        }, {\n          type: 'e'\n        }]).enter().append('path').attr('class', 'handle--custom').attr('display', isRanged ? null : 'none').attr('fill', theme ? theme.sliderHandleColor : '#D3D8E0').attr('cursor', 'ew-resize').attr('d', brushResizePath).on('mouseover', function () {\n          if (onMouseoverHandle) onMouseoverHandle();\n        }).on('mouseout', function () {\n          if (onMouseoutHandle) onMouseoutHandle();\n        });\n        var _this$props$value = (0, _slicedToArray2[\"default\"])(this.props.value, 2),\n          val0 = _this$props$value[0],\n          val1 = _this$props$value[1];\n        this.moving = true;\n        this._move(val0, val1);\n      }\n    }, {\n      key: \"componentDidUpdate\",\n      value: function componentDidUpdate(prevProps) {\n        var _this$props3 = this.props,\n          _this$props3$value = (0, _slicedToArray2[\"default\"])(_this$props3.value, 2),\n          val0 = _this$props3$value[0],\n          val1 = _this$props3$value[1],\n          width = _this$props3.width;\n        var _prevProps$value = (0, _slicedToArray2[\"default\"])(prevProps.value, 2),\n          prevVal0 = _prevProps$value[0],\n          prevVal1 = _prevProps$value[1];\n        if (prevProps.width !== width) {\n          var _this$root3;\n\n          // width change should not trigger this._brushed\n          this.moving = true;\n          if (this.brush) (_this$root3 = this.root) === null || _this$root3 === void 0 ? void 0 : _this$root3.call(this.brush);\n          this._move(val0, val1);\n        }\n        if (!this.brushing && !this.moving) {\n          if (prevVal0 !== val0 || prevVal1 !== val1) {\n            this.moving = true;\n            this._move(val0, val1);\n          }\n        }\n        if (!this.props.isRanged && this.handle) {\n          this.handle.attr('display', 'none');\n        }\n      }\n    }, {\n      key: \"_click\",\n      value: function _click(selection) {\n        // fake brush\n        this.brushing = true;\n        this._brushed({\n          sourceEvent: {},\n          selection: selection\n        });\n      }\n    }, {\n      key: \"_move\",\n      value: function _move() {\n        var val0 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n        var val1 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n        var _this$props4 = this.props,\n          _this$props4$range = (0, _slicedToArray2[\"default\"])(_this$props4.range, 2),\n          min = _this$props4$range[0],\n          max = _this$props4$range[1],\n          width = _this$props4.width,\n          isRanged = _this$props4.isRanged;\n        if (width && max - min && this.brush && this.handle) {\n          var scale = function scale(x) {\n            return (x - min) * width / (max - min);\n          };\n          if (!isRanged) {\n            // only draw a 1 pixel line\n            if (this.root) this.brush.move(this.root, [scale(val0), scale(val0) + 1]);\n          } else {\n            if (this.root) this.brush.move(this.root, [scale(val0), scale(val1)]);\n            this.handle.attr('display', null).attr('transform', function (d, i) {\n              return \"translate(\".concat([i === 0 ? scale(val0) : scale(val1), 0], \")\");\n            });\n          }\n        }\n      }\n    }, {\n      key: \"_onBrush\",\n      value: function _onBrush() {\n        var val0 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n        var val1 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n        var _this$props5 = this.props,\n          isRanged = _this$props5.isRanged,\n          _this$props5$value = (0, _slicedToArray2[\"default\"])(_this$props5.value, 2),\n          currentVal0 = _this$props5$value[0],\n          currentVal1 = _this$props5$value[1];\n        if (currentVal0 === val0 && currentVal1 === val1) {\n          return;\n        }\n        if (isRanged) {\n          this.props.onBrush(val0, val1);\n        } else {\n          this.props.onBrush(val0, val0);\n        }\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        var isRanged = this.props.isRanged;\n        return /*#__PURE__*/_react[\"default\"].createElement(StyledG, {\n          className: \"kg-range-slider__brush\",\n          isRanged: isRanged,\n          ref: this.rootContainer\n        });\n      }\n    }]);\n    return RangeBrush;\n  }(_react.Component);\n  (0, _defineProperty2[\"default\"])(RangeBrush, \"defaultProps\", {\n    isRanged: true\n  });\n  return (0, _styledComponents.withTheme)(RangeBrush);\n}\nvar _default = RangeBrushFactory;\nexports[\"default\"] = _default;","map":{"version":3,"names":["_toConsumableArray2","_interopRequireDefault","require","_classCallCheck2","_createClass2","_assertThisInitialized2","_inherits2","_slicedToArray2","_taggedTemplateLiteral2","_react","_interopRequireWildcard","_styledComponents","_d3Selection","_d3Brush","_utils","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","_getPrototypeOf2","result","NewTarget","constructor","Reflect","construct","arguments","apply","_possibleConstructorReturn2","StyledG","g","_templateObject","props","isRanged","theme","rangeBrushBgd","BLUE2","moveRight","startSel","selection","_startSel","_selection","sel0","Boolean","startSel0","getHandlePath","e","Number","d","type","x","h","y","height","concat","w","RangeBrushFactory","RangeBrush","_Component","_super","_this","_len","length","args","Array","_key","_defineProperty2","createRef","rootContainer","current","select","undefined","evt","sourceEvent","_evt$selection","sel1","right","_this$props","_this$props$range","range","min","_this$props$step","step","width","marks","max","d0","invert","d1","normalizeSliderValue","_move","_this2","_onBrush","key","value","componentDidMount","_this3","_this$root","_this$root2","_this$props2","onMouseoverHandle","onMouseoutHandle","root","brush","brushX","handleSize","on","event","onBrushStart","_lastSel","brushing","_brushed","_click","onBrushEnd","moving","call","brushResizePath","handle","selectAll","data","enter","append","attr","sliderHandleColor","val0","_this$props$value","val1","_this$props3","_this$props3$value","_prevProps$value","prevProps","prevVal1","_this$root3","prevVal0","_this$props4","_this$props4$range","move","scale","i","_this$props5","_this$props5$value","currentVal0","currentVal1","onBrush"],"sources":["/Users/rohinphukan/Desktop/RefugeeWebsite/node_modules/@kepler.gl/components/src/common/range-brush.tsx"],"sourcesContent":["// Copyright (c) 2022 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\nimport React, {Component, createRef} from 'react';\nimport styled, {withTheme} from 'styled-components';\nimport {select, Selection} from 'd3-selection';\nimport {BrushBehavior, brushX} from 'd3-brush';\nimport {normalizeSliderValue} from '@kepler.gl/utils';\n\ninterface StyledGProps {\n  isRanged?: boolean;\n}\n\nconst StyledG = styled.g<StyledGProps>`\n  .selection {\n    stroke: none;\n    fill: ${props => (props.isRanged ? props.theme.rangeBrushBgd : props.theme.BLUE2)};\n    fill-opacity: ${props => (props.isRanged ? 0.3 : 1)};\n  }\n  .handle {\n    fill: ${props => props.theme.BLUE2};\n    fill-opacity: 0.3;\n  }\n`;\n\nfunction moveRight(startSel, selection) {\n  const [startSel0] = startSel;\n  const [sel0] = selection;\n\n  return Boolean(startSel0 === sel0);\n}\n// style brush resize handle\n// https://github.com/crossfilter/crossfilter/blob/gh-pages/index.html#L466\nconst getHandlePath = (props: RangeBrushProps) => {\n  return function brushResizePath(d) {\n    const e = Number(d.type === 'e');\n    const x = e ? 1 : -1;\n    const h = 39;\n    const w = 4.5;\n    const y = (props.height - h) / 2;\n    return `M${0.5 * x},${y}c${2.5 * x},0,${w * x},2,${w * x},${w}v${h - w * 2}c0,2.5,${-2 *\n      x},${w},${-w * x},${w}V${y}z`;\n  };\n};\n\nexport type OnBrush = (val0: number, val1: number) => void;\n\nexport interface RangeBrushProps {\n  isRanged?: boolean;\n  theme?: any;\n  range: number[];\n  value: number[];\n  onBrushStart: () => void;\n  onBrushEnd: () => void;\n  width: number;\n  height: number;\n  onBrush: OnBrush;\n  step?: number;\n  marks?: number[];\n  onMouseoverHandle: () => void;\n  onMouseoutHandle: () => void;\n}\n\nfunction RangeBrushFactory(): React.ComponentType<RangeBrushProps> {\n  class RangeBrush extends Component<RangeBrushProps> {\n    static defaultProps = {\n      isRanged: true\n    };\n\n    rootContainer = createRef<SVGGElement>();\n\n    brushing: boolean = false;\n    moving: boolean = false;\n\n    root = this.rootContainer.current ? select(this.rootContainer.current) : undefined;\n    brush: BrushBehavior<any> | undefined;\n    _startSel: number[] | undefined;\n    _lastSel: number[] | undefined;\n\n    handle: Selection<SVGPathElement, {type: string}, SVGGElement | null, unknown> | undefined;\n\n    componentDidMount() {\n      // We want the React app to respond to brush state and vice-versa\n      // but d3-brush fires the same events for both user-initiated brushing\n      // and programmatic brushing (brush.move). We need these flags to\n      // distinguish between the uses.\n      //\n      // We don't use state because that would trigger another `componentDidUpdate`\n      const {theme, isRanged, onMouseoverHandle, onMouseoutHandle} = this.props;\n\n      this.root = this.rootContainer.current ? select(this.rootContainer.current) : undefined;\n      this.brush = brushX()\n        .handleSize(3)\n        .on('start', event => {\n          if (typeof this.props.onBrushStart === 'function') this.props.onBrushStart();\n          this._startSel = event.selection;\n        })\n        .on('brush', event => {\n          if (this.moving) {\n            return;\n          }\n          if (event.selection) {\n            this._lastSel = event.selection;\n            this.brushing = true;\n            this._brushed(event);\n          }\n        })\n        .on('end', event => {\n          if (!event.selection) {\n            if (this.brushing) {\n              // handle null selection\n              this._click(this._lastSel);\n            } else if (this._startSel) {\n              // handle click\n              this._click(this._startSel);\n            }\n          }\n\n          if (typeof this.props.onBrushEnd === 'function') this.props.onBrushEnd();\n\n          this.brushing = false;\n          this.moving = false;\n        });\n\n      this.root?.call(this.brush);\n      const brushResizePath = getHandlePath(this.props);\n      this.handle = this.root\n        ?.selectAll('.handle--custom')\n        .data([{type: 'w'}, {type: 'e'}])\n        .enter()\n        .append('path')\n        .attr('class', 'handle--custom')\n        .attr('display', isRanged ? null : 'none')\n        .attr('fill', theme ? theme.sliderHandleColor : '#D3D8E0')\n        .attr('cursor', 'ew-resize')\n        .attr('d', brushResizePath)\n        .on('mouseover', () => {\n          if (onMouseoverHandle) onMouseoverHandle();\n        })\n        .on('mouseout', () => {\n          if (onMouseoutHandle) onMouseoutHandle();\n        });\n\n      const {\n        value: [val0, val1]\n      } = this.props;\n      this.moving = true;\n      this._move(val0, val1);\n    }\n\n    componentDidUpdate(prevProps) {\n      const {\n        value: [val0, val1],\n        width\n      } = this.props;\n      const [prevVal0, prevVal1] = prevProps.value;\n\n      if (prevProps.width !== width) {\n        // width change should not trigger this._brushed\n        this.moving = true;\n        if (this.brush) this.root?.call(this.brush);\n        this._move(val0, val1);\n      }\n\n      if (!this.brushing && !this.moving) {\n        if (prevVal0 !== val0 || prevVal1 !== val1) {\n          this.moving = true;\n          this._move(val0, val1);\n        }\n      }\n\n      if (!this.props.isRanged && this.handle) {\n        this.handle.attr('display', 'none');\n      }\n    }\n\n    _click(selection) {\n      // fake brush\n      this.brushing = true;\n      this._brushed({sourceEvent: {}, selection});\n    }\n\n    _move(val0: number = 0, val1: number = 0) {\n      const {\n        range: [min, max],\n        width,\n        isRanged\n      } = this.props;\n\n      if (width && max - min && this.brush && this.handle) {\n        const scale = (x: number) => ((x - min) * width) / (max - min);\n        if (!isRanged) {\n          // only draw a 1 pixel line\n          if (this.root) this.brush.move(this.root, [scale(val0), scale(val0) + 1]);\n        } else {\n          if (this.root) this.brush.move(this.root, [scale(val0), scale(val1)]);\n\n          this.handle\n            .attr('display', null)\n            .attr('transform', (d, i) => `translate(${[i === 0 ? scale(val0) : scale(val1), 0]})`);\n        }\n      }\n    }\n\n    _brushed = (evt: {sourceEvent: any; selection: number[]}) => {\n      // Ignore brush events which don't have an underlying sourceEvent\n      if (!evt.sourceEvent) return;\n      const [sel0, sel1] = evt.selection;\n      const right = moveRight(this._startSel, evt.selection);\n\n      const {\n        range: [min, max],\n        step = 0,\n        width,\n        marks,\n        isRanged\n      } = this.props;\n      const invert = (x: number) => (x * (max - min)) / width + min;\n      let d0 = invert(sel0);\n      let d1 = invert(sel1);\n\n      d0 = normalizeSliderValue(d0, min, step, marks);\n      d1 = normalizeSliderValue(d1, min, step, marks);\n\n      if (isRanged) this._move(d0, d1);\n      else this._move(...(right ? [d1, d1] : [d0, d0]));\n\n      if (isRanged) this._onBrush(d0, d1);\n      else this._onBrush(right ? d1 : d0);\n    };\n\n    _onBrush(val0: number = 0, val1: number = 0) {\n      const {\n        isRanged,\n        value: [currentVal0, currentVal1]\n      } = this.props;\n\n      if (currentVal0 === val0 && currentVal1 === val1) {\n        return;\n      }\n\n      if (isRanged) {\n        this.props.onBrush(val0, val1);\n      } else {\n        this.props.onBrush(val0, val0);\n      }\n    }\n\n    render() {\n      const {isRanged} = this.props;\n      return (\n        <StyledG className=\"kg-range-slider__brush\" isRanged={isRanged} ref={this.rootContainer} />\n      );\n    }\n  }\n  return withTheme(RangeBrush);\n}\n\nexport default RangeBrushFactory;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}