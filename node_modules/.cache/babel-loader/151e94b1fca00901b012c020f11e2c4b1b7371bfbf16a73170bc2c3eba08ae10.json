{"ast":null,"code":"import _createForOfIteratorHelper from \"/Users/rohinphukan/Desktop/RefugeeWebsite/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport { simplify } from './simplify';\nimport { createFeature } from './feature';\nexport function convert(data, options) {\n  var features = [];\n  if (data.type === 'FeatureCollection') {\n    for (var i = 0; i < data.features.length; i++) {\n      convertFeature(features, data.features[i], options, i);\n    }\n  } else if (data.type === 'Feature') {\n    convertFeature(features, data, options);\n  } else {\n    convertFeature(features, {\n      geometry: data\n    }, options);\n  }\n  return features;\n}\nfunction convertFeature(features, geojson, options, index) {\n  if (!geojson.geometry) {\n    return;\n  }\n  var coords = geojson.geometry.coordinates;\n  var type = geojson.geometry.type;\n  var tolerance = Math.pow(options.tolerance / ((1 << options.maxZoom) * options.extent), 2);\n  var geometry = [];\n  var id = geojson.id;\n  if (options.promoteId) {\n    id = geojson.properties[options.promoteId];\n  } else if (options.generateId) {\n    id = index || 0;\n  }\n  if (type === 'Point') {\n    convertPoint(coords, geometry);\n  } else if (type === 'MultiPoint') {\n    var _iterator = _createForOfIteratorHelper(coords),\n      _step;\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var p = _step.value;\n        convertPoint(p, geometry);\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n  } else if (type === 'LineString') {\n    convertLine(coords, geometry, tolerance, false);\n  } else if (type === 'MultiLineString') {\n    if (options.lineMetrics) {\n      var _iterator2 = _createForOfIteratorHelper(coords),\n        _step2;\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var line = _step2.value;\n          geometry = [];\n          convertLine(line, geometry, tolerance, false);\n          features.push(createFeature(id, 'LineString', geometry, geojson.properties));\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n      return;\n    } else {\n      convertLines(coords, geometry, tolerance, false);\n    }\n  } else if (type === 'Polygon') {\n    convertLines(coords, geometry, tolerance, true);\n  } else if (type === 'MultiPolygon') {\n    var _iterator3 = _createForOfIteratorHelper(coords),\n      _step3;\n    try {\n      for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n        var polygon = _step3.value;\n        var newPolygon = [];\n        convertLines(polygon, newPolygon, tolerance, true);\n        geometry.push(newPolygon);\n      }\n    } catch (err) {\n      _iterator3.e(err);\n    } finally {\n      _iterator3.f();\n    }\n  } else if (type === 'GeometryCollection') {\n    var _iterator4 = _createForOfIteratorHelper(geojson.geometry.geometries),\n      _step4;\n    try {\n      for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n        var singleGeometry = _step4.value;\n        convertFeature(features, {\n          id: id,\n          geometry: singleGeometry,\n          properties: geojson.properties\n        }, options, index);\n      }\n    } catch (err) {\n      _iterator4.e(err);\n    } finally {\n      _iterator4.f();\n    }\n    return;\n  } else {\n    throw new Error('Input data is not a valid GeoJSON object.');\n  }\n  features.push(createFeature(id, type, geometry, geojson.properties));\n}\nfunction convertPoint(coords, out) {\n  out.push(projectX(coords[0]), projectY(coords[1]), 0);\n}\nfunction convertLine(ring, out, tolerance, isPolygon) {\n  var x0, y0;\n  var size = 0;\n  for (var j = 0; j < ring.length; j++) {\n    var x = projectX(ring[j][0]);\n    var y = projectY(ring[j][1]);\n    out.push(x, y, 0);\n    if (j > 0) {\n      if (isPolygon) {\n        size += (x0 * y - x * y0) / 2;\n      } else {\n        size += Math.sqrt(Math.pow(x - x0, 2) + Math.pow(y - y0, 2));\n      }\n    }\n    x0 = x;\n    y0 = y;\n  }\n  var last = out.length - 3;\n  out[2] = 1;\n  simplify(out, 0, last, tolerance);\n  out[last + 2] = 1;\n  out.size = Math.abs(size);\n  out.start = 0;\n  out.end = out.size;\n}\nfunction convertLines(rings, out, tolerance, isPolygon) {\n  for (var i = 0; i < rings.length; i++) {\n    var geom = [];\n    convertLine(rings[i], geom, tolerance, isPolygon);\n    out.push(geom);\n  }\n}\nfunction projectX(x) {\n  return x / 360 + 0.5;\n}\nfunction projectY(y) {\n  var sin = Math.sin(y * Math.PI / 180);\n  var y2 = 0.5 - 0.25 * Math.log((1 + sin) / (1 - sin)) / Math.PI;\n  return y2 < 0 ? 0 : y2 > 1 ? 1 : y2;\n}","map":{"version":3,"names":["simplify","createFeature","convert","data","options","features","type","i","length","convertFeature","geometry","geojson","index","coords","coordinates","tolerance","Math","pow","maxZoom","extent","id","promoteId","properties","generateId","convertPoint","_iterator","_createForOfIteratorHelper","_step","s","n","done","p","value","err","e","f","convertLine","lineMetrics","_iterator2","_step2","line","push","convertLines","_iterator3","_step3","polygon","newPolygon","_iterator4","geometries","_step4","singleGeometry","Error","out","projectX","projectY","ring","isPolygon","x0","y0","size","j","x","y","sqrt","last","abs","start","end","rings","geom","sin","PI","y2","log"],"sources":["/Users/rohinphukan/Desktop/RefugeeWebsite/node_modules/@loaders.gl/mvt/src/lib/geojson-tiler/convert.ts"],"sourcesContent":["// loaders.gl, MIT license\n// Forked from https://github.com/mapbox/geojson-vt under compatible ISC license\n\n/* eslint-disable */\n// @ts-nocheck\n\nimport type {Feature} from '@loaders.gl/schema';\nimport type {GeoJSONTileFeature} from './tile';\n\nimport {simplify} from './simplify';\nimport {createFeature} from './feature';\n\n// converts GeoJSON feature into an intermediate projected JSON vector format with simplification data\n\nexport function convert(data: Feature, options): GeoJSONTileFeature[] {\n  const features = [];\n  if (data.type === 'FeatureCollection') {\n    for (let i = 0; i < data.features.length; i++) {\n      convertFeature(features, data.features[i], options, i);\n    }\n  } else if (data.type === 'Feature') {\n    convertFeature(features, data, options);\n  } else {\n    // single geometry or a geometry collection\n    convertFeature(features, {geometry: data}, options);\n  }\n\n  return features;\n}\n\nexport type ConvertFeatureOptions = {\n  maxZoom?: number;\n  tolerance: number;\n  extent: number;\n  lineMetrics: boolean;\n};\n\nfunction convertFeature(\n  features: GeoJSONTileFeature[],\n  geojson: Feature,\n  options: ConvertFeatureOptions,\n  index: number\n): void {\n  if (!geojson.geometry) {\n    return;\n  }\n\n  const coords = geojson.geometry.coordinates;\n  const type = geojson.geometry.type;\n  const tolerance = Math.pow(options.tolerance / ((1 << options.maxZoom) * options.extent), 2);\n  let geometry = [];\n  let id = geojson.id;\n  if (options.promoteId) {\n    id = geojson.properties[options.promoteId];\n  } else if (options.generateId) {\n    id = index || 0;\n  }\n  if (type === 'Point') {\n    convertPoint(coords, geometry);\n  } else if (type === 'MultiPoint') {\n    for (const p of coords) {\n      convertPoint(p, geometry);\n    }\n  } else if (type === 'LineString') {\n    convertLine(coords, geometry, tolerance, false);\n  } else if (type === 'MultiLineString') {\n    if (options.lineMetrics) {\n      // explode into linestrings to be able to track metrics\n      for (const line of coords) {\n        geometry = [];\n        convertLine(line, geometry, tolerance, false);\n        features.push(createFeature(id, 'LineString', geometry, geojson.properties));\n      }\n      return;\n    } else {\n      convertLines(coords, geometry, tolerance, false);\n    }\n  } else if (type === 'Polygon') {\n    convertLines(coords, geometry, tolerance, true);\n  } else if (type === 'MultiPolygon') {\n    for (const polygon of coords) {\n      const newPolygon = [];\n      convertLines(polygon, newPolygon, tolerance, true);\n      geometry.push(newPolygon);\n    }\n  } else if (type === 'GeometryCollection') {\n    for (const singleGeometry of geojson.geometry.geometries) {\n      convertFeature(\n        features,\n        {\n          id,\n          geometry: singleGeometry,\n          properties: geojson.properties\n        },\n        options,\n        index\n      );\n    }\n    return;\n  } else {\n    throw new Error('Input data is not a valid GeoJSON object.');\n  }\n\n  features.push(createFeature(id, type, geometry, geojson.properties));\n}\n\nfunction convertPoint(coords, out): void {\n  out.push(projectX(coords[0]), projectY(coords[1]), 0);\n}\n\nfunction convertLine(ring: number[], out, tolerance: number, isPolygon: boolean): void {\n  let x0, y0;\n  let size = 0;\n\n  for (let j = 0; j < ring.length; j++) {\n    const x = projectX(ring[j][0]);\n    const y = projectY(ring[j][1]);\n\n    out.push(x, y, 0);\n\n    if (j > 0) {\n      if (isPolygon) {\n        size += (x0 * y - x * y0) / 2; // area\n      } else {\n        size += Math.sqrt(Math.pow(x - x0, 2) + Math.pow(y - y0, 2)); // length\n      }\n    }\n    x0 = x;\n    y0 = y;\n  }\n\n  const last = out.length - 3;\n  out[2] = 1;\n  simplify(out, 0, last, tolerance);\n  out[last + 2] = 1;\n\n  out.size = Math.abs(size);\n  out.start = 0;\n  out.end = out.size;\n}\n\nfunction convertLines(rings: number[][], out, tolerance: number, isPolygon: boolean): void {\n  for (let i = 0; i < rings.length; i++) {\n    const geom = [];\n    convertLine(rings[i], geom, tolerance, isPolygon);\n    out.push(geom);\n  }\n}\n\nfunction projectX(x: number): number {\n  return x / 360 + 0.5;\n}\n\nfunction projectY(y: number): number {\n  const sin = Math.sin((y * Math.PI) / 180);\n  const y2 = 0.5 - (0.25 * Math.log((1 + sin) / (1 - sin))) / Math.PI;\n  return y2 < 0 ? 0 : y2 > 1 ? 1 : y2;\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}