{"ast":null,"code":"// Copyright (c) 2022 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = EditorFactory;\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\nvar _taggedTemplateLiteral2 = _interopRequireDefault(require(\"@babel/runtime/helpers/taggedTemplateLiteral\"));\nvar _react = _interopRequireWildcard(require(\"react\"));\nvar _styledComponents = _interopRequireDefault(require(\"styled-components\"));\nvar _reactMapGlDraw = require(\"react-map-gl-draw\");\nvar _window = _interopRequireDefault(require(\"global/window\"));\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\nvar _lodash = _interopRequireDefault(require(\"lodash.get\"));\nvar _reselect = require(\"reselect\");\nvar _featureActionPanel = _interopRequireDefault(require(\"./feature-action-panel\"));\nvar _constants = require(\"@kepler.gl/constants\");\nvar _featureStyles = require(\"./feature-styles\");\nvar _handleStyle = require(\"./handle-style\");\nvar _templateObject;\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        (0, _defineProperty2[\"default\"])(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n  return target;\n}\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n  return function _createSuperInternal() {\n    var Super = (0, _getPrototypeOf2[\"default\"])(Derived),\n      result;\n    if (hasNativeReflectConstruct) {\n      var NewTarget = (0, _getPrototypeOf2[\"default\"])(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return (0, _possibleConstructorReturn2[\"default\"])(this, result);\n  };\n}\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nvar StyledWrapper = _styledComponents[\"default\"].div(_templateObject || (_templateObject = (0, _taggedTemplateLiteral2[\"default\"])([\"\\n  cursor: \", \";\\n  position: relative;\\n\"])), function (props) {\n  return props.editor.mode === _constants.EDITOR_MODES.EDIT ? 'pointer' : 'crosshair';\n});\nvar editorLayerFilter = function editorLayerFilter(layer) {\n  return _constants.EDITOR_AVAILABLE_LAYERS.includes(layer.type);\n};\nEditorFactory.deps = [_featureActionPanel[\"default\"]];\nfunction EditorFactory(FeatureActionPanel) {\n  var EditorUnmemoized = /*#__PURE__*/function (_Component) {\n    (0, _inherits2[\"default\"])(EditorUnmemoized, _Component);\n    var _super = _createSuper(EditorUnmemoized);\n    function EditorUnmemoized() {\n      var _this;\n      (0, _classCallCheck2[\"default\"])(this, EditorUnmemoized);\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n      _this = _super.call.apply(_super, [this].concat(args));\n      (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"state\", {\n        showActions: false,\n        lastPosition: null\n      });\n      (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"layerSelector\", function (props) {\n        return props.layers;\n      });\n      (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"layersToRenderSelector\", function (props) {\n        return props.layersToRender;\n      });\n      (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"filterSelector\", function (props) {\n        return props.filters;\n      });\n      (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"selectedFeatureIdSelector\", function (props) {\n        return (0, _lodash[\"default\"])(props, ['editor', 'selectedFeature', 'id']);\n      });\n      (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"editorFeatureSelector\", function (props) {\n        return (0, _lodash[\"default\"])(props, ['editor', 'features']);\n      });\n      (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"currentFilterSelector\", (0, _reselect.createSelector)(_this.filterSelector, _this.selectedFeatureIdSelector, function (filters, selectedFeatureId) {\n        return filters.find(function (f) {\n          return f.value && f.value.id === selectedFeatureId;\n        });\n      }));\n      (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"availableLayersSeletor\", (0, _reselect.createSelector)(_this.layerSelector, _this.layersToRenderSelector, function (layers, layersToRender) {\n        return layers.filter(editorLayerFilter).filter(function (layer) {\n          return layersToRender[layer.id];\n        });\n      }));\n      (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"allFeaturesSelector\", (0, _reselect.createSelector)(_this.filterSelector, _this.editorFeatureSelector, function (filters, editorFeatures) {\n        return filters.filter(function (f) {\n          return f.type === _constants.FILTER_TYPES.polygon;\n        }).map(function (f) {\n          return f.value;\n        }).concat(editorFeatures);\n      }));\n      (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"_onKeyPressed\", function (event) {\n        var isEnabled = _this.props.isEnabled;\n        if (!isEnabled) {\n          return;\n        }\n        switch (event.keyCode) {\n          case _constants.KeyEvent.DOM_VK_DELETE:\n          case _constants.KeyEvent.DOM_VK_BACK_SPACE:\n            _this._onDeleteSelectedFeature();\n            break;\n          case _constants.KeyEvent.DOM_VK_ESCAPE:\n            _this.props.onSelect(null);\n            break;\n          default:\n            break;\n        }\n      });\n      (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"_onSelect\", function (_ref) {\n        var selectedFeatureId = _ref.selectedFeatureId,\n          sourceEvent = _ref.sourceEvent;\n        var allFeatures = _this.allFeaturesSelector(_this.props);\n        _this.setState(_objectSpread({}, sourceEvent.rightButton ? {\n          showActions: true,\n          lastPosition: {\n            x: sourceEvent.changedPointers[0].offsetX,\n            y: sourceEvent.changedPointers[0].offsetY\n          }\n        } : null), function () {\n          _this.props.onSelect(allFeatures.find(function (f) {\n            return f.id === selectedFeatureId;\n          }));\n        });\n      });\n      (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"_onDeleteSelectedFeature\", function () {\n        if (_this.state.showActions) {\n          _this.setState({\n            showActions: false\n          });\n        }\n        var editor = _this.props.editor;\n        var _editor$selectedFeatu = editor.selectedFeature,\n          selectedFeature = _editor$selectedFeatu === void 0 ? {} : _editor$selectedFeatu;\n        _this.props.onDeleteFeature(selectedFeature);\n      });\n      (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"_closeFeatureAction\", function () {\n        _this.setState({\n          showActions: false\n        });\n      });\n      (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"_onToggleLayer\", function (layer) {\n        var selectedFeature = _this.props.editor.selectedFeature;\n        if (!selectedFeature) {\n          return;\n        }\n        _this.props.onTogglePolygonFilter(layer, selectedFeature);\n      });\n      return _this;\n    }\n    (0, _createClass2[\"default\"])(EditorUnmemoized, [{\n      key: \"componentDidMount\",\n      value: function componentDidMount() {\n        _window[\"default\"].addEventListener('keydown', this._onKeyPressed);\n      }\n    }, {\n      key: \"componentWillUnmount\",\n      value: function componentWillUnmount() {\n        _window[\"default\"].removeEventListener('keydown', this._onKeyPressed);\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        var _this$props = this.props,\n          className = _this$props.className,\n          clickRadius = _this$props.clickRadius,\n          datasets = _this$props.datasets,\n          editor = _this$props.editor,\n          onUpdate = _this$props.onUpdate,\n          style = _this$props.style;\n        var _this$state = this.state,\n          lastPosition = _this$state.lastPosition,\n          showActions = _this$state.showActions;\n        var selectedFeatureId = (0, _lodash[\"default\"])(editor, ['selectedFeature', 'id']);\n        var currentFilter = this.currentFilterSelector(this.props);\n        var availableLayers = this.availableLayersSeletor(this.props);\n        var allFeatures = this.allFeaturesSelector(this.props);\n        return /*#__PURE__*/_react[\"default\"].createElement(StyledWrapper, {\n          editor: editor,\n          className: (0, _classnames[\"default\"])('editor', className),\n          style: style\n        }, /*#__PURE__*/_react[\"default\"].createElement(_reactMapGlDraw.Editor, {\n          clickRadius: clickRadius,\n          mode: editor.mode,\n          features: allFeatures,\n          selectedFeatureId: selectedFeatureId,\n          onSelect: this._onSelect,\n          onUpdate: onUpdate,\n          getEditHandleShape: _handleStyle.getEditHandleShape,\n          getFeatureStyle: _featureStyles.getStyle,\n          getEditHandleStyle: _handleStyle.getStyle\n        }), showActions && Boolean(selectedFeatureId) ? /*#__PURE__*/_react[\"default\"].createElement(FeatureActionPanel, {\n          selectedFeature: (0, _lodash[\"default\"])(editor, ['selectedFeature']),\n          datasets: datasets,\n          layers: availableLayers,\n          currentFilter: currentFilter,\n          onClose: this._closeFeatureAction,\n          onDeleteFeature: this._onDeleteSelectedFeature,\n          onToggleLayer: this._onToggleLayer,\n          position: lastPosition\n        }) : null);\n      }\n    }]);\n    return EditorUnmemoized;\n  }(_react.Component);\n  (0, _defineProperty2[\"default\"])(EditorUnmemoized, \"defaultProps\", {\n    clickRadius: _featureStyles.DEFAULT_RADIUS\n  });\n  (0, _defineProperty2[\"default\"])(EditorUnmemoized, \"displayName\", 'Editor');\n  var Editor = /*#__PURE__*/_react[\"default\"].memo(EditorUnmemoized);\n  Editor.displayName = 'Editor';\n  return Editor;\n}","map":{"version":3,"names":["value","exports","EditorFactory","_classCallCheck2","_interopRequireDefault","require","_createClass2","_assertThisInitialized2","_inherits2","_possibleConstructorReturn2","_getPrototypeOf2","_defineProperty2","_taggedTemplateLiteral2","_react","_interopRequireWildcard","_reselect","_featureActionPanel","_constants","_featureStyles","_handleStyle","_templateObject","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","getOwnPropertyDescriptors","defineProperties","defineProperty","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","result","NewTarget","constructor","Reflect","construct","props","editor","mode","EDITOR_MODES","EDIT","EDITOR_AVAILABLE_LAYERS","includes","layer","type","deps","FeatureActionPanel","EditorUnmemoized","_Component","_super","_this","_len","args","Array","_key","call","concat","showActions","lastPosition","layers","layersToRender","filters","_lodash","createSelector","filterSelector","selectedFeatureIdSelector","selectedFeatureId","find","f","id","layerSelector","layersToRenderSelector","editorLayerFilter","FILTER_TYPES","polygon","event","isEnabled","keyCode","KeyEvent","DOM_VK_BACK_SPACE","_onDeleteSelectedFeature","DOM_VK_ESCAPE","onSelect","_ref","sourceEvent","setState","rightButton","x","changedPointers","offsetX","y","offsetY","allFeatures","state","_editor$selectedFeatu","selectedFeature","onDeleteFeature","onTogglePolygonFilter","componentDidMount","_window","addEventListener","_onKeyPressed","componentWillUnmount","removeEventListener","render","_this$props","className","clickRadius","datasets","onUpdate","style","_this$state","currentFilter","currentFilterSelector","availableLayers","availableLayersSeletor","allFeaturesSelector","createElement","StyledWrapper","_classnames","_reactMapGlDraw","Editor","features","_onSelect","getEditHandleShape","getFeatureStyle","getStyle","Boolean"],"sources":["/Users/rohinphukan/Desktop/RefugeeWebsite/node_modules/@kepler.gl/components/src/editor/editor.tsx"],"sourcesContent":["// Copyright (c) 2022 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\nimport React, {Component, CSSProperties, KeyboardEvent} from 'react';\nimport styled from 'styled-components';\nimport {Editor as Draw} from 'react-map-gl-draw';\nimport window from 'global/window';\nimport classnames from 'classnames';\nimport get from 'lodash.get';\nimport {createSelector} from 'reselect';\n\nimport FeatureActionPanelFactory, {FeatureActionPanelProps} from './feature-action-panel';\nimport {\n  EDITOR_AVAILABLE_LAYERS,\n  FILTER_TYPES,\n  EDITOR_MODES,\n  KeyEvent\n} from '@kepler.gl/constants';\nimport {Layer} from '@kepler.gl/layers';\n\nimport {DEFAULT_RADIUS, getStyle as getFeatureStyle} from './feature-styles';\nimport {getStyle as getEditHandleStyle, getEditHandleShape} from './handle-style';\nimport {Filter} from '@kepler.gl/types';\nimport {Feature} from '@nebula.gl/edit-modes';\nimport {MjolnirGestureEvent} from 'mjolnir.js';\nimport {Datasets} from '@kepler.gl/table';\n\nconst StyledWrapper = styled.div`\n  cursor: ${(props: {editor: {mode: string}}) =>\n    props.editor.mode === EDITOR_MODES.EDIT ? 'pointer' : 'crosshair'};\n  position: relative;\n`;\n\nconst editorLayerFilter = (layer: Layer) => EDITOR_AVAILABLE_LAYERS.includes(layer.type!);\n\nEditorFactory.deps = [FeatureActionPanelFactory];\n\ninterface EditorProps {\n  filters: Filter[];\n  layers: Layer[];\n  datasets: Datasets;\n  editor: {selectedFeature: Feature; mode: string};\n  layersToRender: Record<string, Layer>;\n  index: number;\n  className: string;\n  clickRadius: number;\n  style: CSSProperties;\n  isEnabled: boolean;\n  onSelect: (f: Feature | null) => void;\n  onUpdate: (f: Feature[]) => void;\n  onDeleteFeature: (f: Feature) => void;\n  onTogglePolygonFilter: (l: Layer, f: Feature) => void;\n}\n\nexport default function EditorFactory(\n  FeatureActionPanel: React.FC<FeatureActionPanelProps>\n): React.ComponentClass<EditorProps> {\n  class EditorUnmemoized extends Component<EditorProps> {\n    static defaultProps = {\n      clickRadius: DEFAULT_RADIUS\n    };\n\n    static displayName = 'Editor';\n\n    state = {\n      showActions: false,\n      lastPosition: null\n    };\n\n    componentDidMount() {\n      window.addEventListener('keydown', this._onKeyPressed);\n    }\n\n    componentWillUnmount() {\n      window.removeEventListener('keydown', this._onKeyPressed);\n    }\n\n    layerSelector = (props: EditorProps) => props.layers;\n    layersToRenderSelector = (props: EditorProps) => props.layersToRender;\n    filterSelector = (props: EditorProps) => props.filters;\n    selectedFeatureIdSelector = (props: EditorProps) =>\n      get(props, ['editor', 'selectedFeature', 'id']);\n    editorFeatureSelector = (props: EditorProps) => get(props, ['editor', 'features']);\n\n    currentFilterSelector = createSelector(\n      this.filterSelector,\n      this.selectedFeatureIdSelector,\n      (filters, selectedFeatureId) => filters.find(f => f.value && f.value.id === selectedFeatureId)\n    );\n\n    availableLayersSeletor = createSelector(\n      this.layerSelector,\n      this.layersToRenderSelector,\n      (layers, layersToRender) =>\n        layers.filter(editorLayerFilter).filter(layer => {\n          return layersToRender[layer.id];\n        })\n    );\n\n    allFeaturesSelector = createSelector(\n      this.filterSelector,\n      this.editorFeatureSelector,\n      (filters, editorFeatures) =>\n        filters\n          .filter(f => f.type === FILTER_TYPES.polygon)\n          .map(f => f.value)\n          .concat(editorFeatures)\n    );\n\n    _onKeyPressed = (event: KeyboardEvent) => {\n      const {isEnabled} = this.props;\n\n      if (!isEnabled) {\n        return;\n      }\n\n      switch (event.keyCode) {\n        case KeyEvent.DOM_VK_DELETE:\n        case KeyEvent.DOM_VK_BACK_SPACE:\n          this._onDeleteSelectedFeature();\n          break;\n        case KeyEvent.DOM_VK_ESCAPE:\n          this.props.onSelect(null);\n          break;\n        default:\n          break;\n      }\n    };\n\n    _onSelect = ({\n      selectedFeatureId,\n      sourceEvent\n    }: {\n      selectedFeatureId: string | number;\n      sourceEvent: MjolnirGestureEvent;\n    }) => {\n      const allFeatures = this.allFeaturesSelector(this.props);\n      this.setState(\n        {\n          ...(sourceEvent.rightButton\n            ? {\n                showActions: true,\n                lastPosition: {\n                  x: sourceEvent.changedPointers[0].offsetX,\n                  y: sourceEvent.changedPointers[0].offsetY\n                }\n              }\n            : null)\n        },\n        () => {\n          this.props.onSelect(allFeatures.find(f => f.id === selectedFeatureId));\n        }\n      );\n    };\n\n    _onDeleteSelectedFeature = () => {\n      if (this.state.showActions) {\n        this.setState({showActions: false});\n      }\n\n      const {editor} = this.props;\n      const {selectedFeature = {}} = editor;\n      this.props.onDeleteFeature(selectedFeature);\n    };\n\n    _closeFeatureAction = () => {\n      this.setState({showActions: false});\n    };\n\n    _onToggleLayer = (layer: Layer) => {\n      const {selectedFeature} = this.props.editor;\n      if (!selectedFeature) {\n        return;\n      }\n\n      this.props.onTogglePolygonFilter(layer, selectedFeature);\n    };\n\n    render() {\n      const {className, clickRadius, datasets, editor, onUpdate, style} = this.props;\n\n      const {lastPosition, showActions} = this.state;\n      const selectedFeatureId = get(editor, ['selectedFeature', 'id']);\n      const currentFilter = this.currentFilterSelector(this.props);\n      const availableLayers = this.availableLayersSeletor(this.props);\n      const allFeatures = this.allFeaturesSelector(this.props);\n\n      return (\n        <StyledWrapper editor={editor} className={classnames('editor', className)} style={style}>\n          <Draw\n            clickRadius={clickRadius}\n            mode={editor.mode}\n            features={allFeatures}\n            selectedFeatureId={selectedFeatureId}\n            onSelect={this._onSelect}\n            onUpdate={onUpdate}\n            getEditHandleShape={getEditHandleShape}\n            getFeatureStyle={getFeatureStyle}\n            getEditHandleStyle={getEditHandleStyle}\n          />\n          {showActions && Boolean(selectedFeatureId) ? (\n            <FeatureActionPanel\n              selectedFeature={get(editor, ['selectedFeature'])}\n              datasets={datasets}\n              layers={availableLayers}\n              currentFilter={currentFilter}\n              onClose={this._closeFeatureAction}\n              onDeleteFeature={this._onDeleteSelectedFeature}\n              onToggleLayer={this._onToggleLayer}\n              position={lastPosition}\n            />\n          ) : null}\n        </StyledWrapper>\n      );\n    }\n  }\n\n  const Editor = (React.memo(EditorUnmemoized) as unknown) as typeof EditorUnmemoized;\n  Editor.displayName = 'Editor';\n  return Editor;\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}