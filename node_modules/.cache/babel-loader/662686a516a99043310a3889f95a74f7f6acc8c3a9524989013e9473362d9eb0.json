{"ast":null,"code":"// Copyright (c) 2022 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.isMSEdge = isMSEdge;\nexports.getScaleFromImageSize = getScaleFromImageSize;\nexports.calculateExportImageSize = calculateExportImageSize;\nexports.convertToPng = convertToPng;\nexports.dataURItoBlob = dataURItoBlob;\nexports.downloadFile = downloadFile;\nexports.exportImage = exportImage;\nexports.exportToJsonString = exportToJsonString;\nexports.getMapJSON = getMapJSON;\nexports.exportJson = exportJson;\nexports.exportHtml = exportHtml;\nexports.exportMap = exportMap;\nexports[\"default\"] = exports.DEFAULT_EXPORT_JSON_SETTINGS = exports.DEFAULT_DATA_NAME = exports.DEFAULT_JSON_NAME = exports.DEFAULT_HTML_NAME = exports.DEFAULT_IMAGE_NAME = void 0;\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\nvar _window = require(\"global/window\");\nvar _lodash = _interopRequireDefault(require(\"lodash.get\"));\nvar _constants = require(\"@kepler.gl/constants\");\nvar _domToImage = _interopRequireDefault(require(\"./dom-to-image\"));\nvar _utils = require(\"./utils\");\nvar _exportMapHtml = require(\"./export-map-html\");\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        (0, _defineProperty2[\"default\"])(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n  return target;\n}\n\n/**\n * Default file names\n */\nvar DEFAULT_IMAGE_NAME = 'kepler.gl.png';\nexports.DEFAULT_IMAGE_NAME = DEFAULT_IMAGE_NAME;\nvar DEFAULT_HTML_NAME = 'kepler.gl.html';\nexports.DEFAULT_HTML_NAME = DEFAULT_HTML_NAME;\nvar DEFAULT_JSON_NAME = 'kepler.gl.json';\nexports.DEFAULT_JSON_NAME = DEFAULT_JSON_NAME;\nvar DEFAULT_DATA_NAME = 'kepler.gl';\n/**\n * Default json export settings\n */\n\nexports.DEFAULT_DATA_NAME = DEFAULT_DATA_NAME;\nvar DEFAULT_EXPORT_JSON_SETTINGS = {\n  hasData: true\n};\nexports.DEFAULT_EXPORT_JSON_SETTINGS = DEFAULT_EXPORT_JSON_SETTINGS;\nvar defaultResolution = _constants.OneXResolutionOption;\nvar defaultRatio = _constants.FourByThreeRatioOption;\nfunction isMSEdge(window) {\n  // @ts-ignore msSaveOrOpenBlob was a proprietary addition to the Navigator object, added by Microsoft for Internet Explorer.\n  return Boolean(window.navigator && window.navigator.msSaveOrOpenBlob);\n}\nfunction getScaleFromImageSize() {\n  var imageW = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n  var imageH = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  var mapW = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n  var mapH = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n  if ([imageW, imageH, mapW, mapH].some(function (d) {\n    return d <= 0;\n  })) {\n    return 1;\n  }\n  var base = imageW / imageH > 1 ? imageW : imageH;\n  var mapBase = imageW / imageH > 1 ? mapW : mapH;\n  return base / mapBase;\n}\nfunction calculateExportImageSize(_ref) {\n  var mapW = _ref.mapW,\n    mapH = _ref.mapH,\n    ratio = _ref.ratio,\n    resolution = _ref.resolution;\n  if (mapW <= 0 || mapH <= 0) {\n    return null;\n  }\n  var ratioItem = _constants.EXPORT_IMG_RATIO_OPTIONS.find(function (op) {\n    return op.id === ratio;\n  }) || defaultRatio;\n  var resolutionItem = _constants.EXPORT_IMG_RESOLUTION_OPTIONS.find(function (op) {\n    return op.id === resolution;\n  }) || defaultResolution;\n  var _resolutionItem$getSi = resolutionItem.getSize(mapW, mapH),\n    scaledWidth = _resolutionItem$getSi.width,\n    scaledHeight = _resolutionItem$getSi.height;\n  var _ratioItem$getSize = ratioItem.getSize(scaledWidth, scaledHeight),\n    imageW = _ratioItem$getSize.width,\n    imageH = _ratioItem$getSize.height;\n  var _ref2 = ratioItem.id === _constants.EXPORT_IMG_RATIOS.CUSTOM ? {\n      scale: undefined\n    } : resolutionItem,\n    scale = _ref2.scale;\n  return {\n    scale: scale,\n    imageW: imageW,\n    imageH: imageH\n  };\n}\nfunction convertToPng(sourceElem, options) {\n  return _domToImage[\"default\"].toPng(sourceElem, options);\n}\nfunction dataURItoBlob(dataURI) {\n  var binary = (0, _window.atob)(dataURI.split(',')[1]); // separate out the mime component\n\n  var mimeString = dataURI.split(',')[0].split(':')[1].split(';')[0]; // write the bytes of the string to an ArrayBuffer\n\n  var ab = new _window.ArrayBuffer(binary.length); // create a view into the buffer\n\n  var ia = new _window.Uint8Array(ab);\n  for (var i = 0; i < binary.length; i++) {\n    ia[i] = binary.charCodeAt(i);\n  }\n  return new _window.Blob([ab], {\n    type: mimeString\n  });\n}\nfunction downloadFile(fileBlob, fileName) {\n  if (isMSEdge(window)) {\n    window.navigator.msSaveOrOpenBlob(fileBlob, fileName);\n  } else {\n    var url = _window.URL.createObjectURL(fileBlob);\n    var link = _window.document.createElement('a');\n    link.setAttribute('href', url);\n    link.setAttribute('download', fileName);\n    _window.document.body.appendChild(link);\n    link.click();\n    _window.document.body.removeChild(link);\n    _window.URL.revokeObjectURL(url);\n  }\n}\n/**\n * Whether color is rgb\n * @returns\n */\n\nfunction exportImage(uiStateExportImage) {\n  var filename = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : DEFAULT_IMAGE_NAME;\n  var imageDataUri = uiStateExportImage.imageDataUri;\n  if (imageDataUri) {\n    var file = dataURItoBlob(imageDataUri);\n    downloadFile(file, filename);\n  }\n}\nfunction exportToJsonString(data) {\n  try {\n    return JSON.stringify(data);\n  } catch (e) {\n    if (e instanceof TypeError) return e.message; // Non-Standard Error Object Property\n\n    return e.description;\n  }\n}\nfunction getMapJSON(state) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : DEFAULT_EXPORT_JSON_SETTINGS;\n  var hasData = options.hasData;\n  var schema = state.visState.schema;\n  if (!hasData) {\n    return schema.getConfigToSave(state);\n  }\n  var mapToSave = schema.save(state); // add file name if title is not provided\n\n  var title = (0, _lodash[\"default\"])(mapToSave, ['info', 'title']);\n  if (!title || !title.length) {\n    mapToSave = (0, _utils.set)(['info', 'title'], \"keplergl_\".concat((0, _utils.generateHashId)(6)), mapToSave);\n  }\n  return mapToSave;\n}\nfunction exportJson(state) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var map = getMapJSON(state, options);\n  var fileBlob = new _window.Blob([exportToJsonString(map)], {\n    type: 'application/json'\n  });\n  var fileName = state.appName ? \"\".concat(state.appName, \".json\") : DEFAULT_JSON_NAME;\n  downloadFile(fileBlob, fileName);\n}\nfunction exportHtml(state, options) {\n  var userMapboxToken = options.userMapboxToken,\n    exportMapboxAccessToken = options.exportMapboxAccessToken,\n    mode = options.mode;\n  var data = _objectSpread(_objectSpread({}, getMapJSON(state)), {}, {\n    mapboxApiAccessToken: (userMapboxToken || '') !== '' ? userMapboxToken : exportMapboxAccessToken,\n    mode: mode\n  });\n  var fileBlob = new _window.Blob([(0, _exportMapHtml.exportMapToHTML)(data)], {\n    type: 'text/html'\n  });\n  downloadFile(fileBlob, state.appName ? \"\".concat(state.appName, \".html\") : DEFAULT_HTML_NAME);\n}\nfunction exportMap(state) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : DEFAULT_EXPORT_JSON_SETTINGS;\n  var imageDataUri = state.uiState.exportImage.imageDataUri;\n  var thumbnail = imageDataUri ? dataURItoBlob(imageDataUri) : null;\n  var mapToSave = getMapJSON(state, options);\n  return {\n    map: mapToSave,\n    thumbnail: thumbnail\n  };\n}\nvar exporters = {\n  exportImage: exportImage,\n  exportJson: exportJson,\n  exportHtml: exportHtml\n};\nvar _default = exporters;\nexports[\"default\"] = _default;","map":{"version":3,"names":["value","exports","isMSEdge","calculateExportImageSize","dataURItoBlob","exportImage","DEFAULT_EXPORT_JSON_SETTINGS","DEFAULT_DATA_NAME","DEFAULT_JSON_NAME","DEFAULT_HTML_NAME","DEFAULT_IMAGE_NAME","_defineProperty2","_interopRequireDefault","require","_domToImage","_utils","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","hasData","defaultResolution","_constants","OneXResolutionOption","defaultRatio","FourByThreeRatioOption","window","Boolean","navigator","msSaveOrOpenBlob","getScaleFromImageSize","ratio","imageW","arguments","length","undefined","mapW","mapH","d","base","imageH","mapBase","_ref","ratioItem","EXPORT_IMG_RATIO_OPTIONS","find","op","id","resolutionItem","EXPORT_IMG_RESOLUTION_OPTIONS","resolution","_resolutionItem$getSi","getSize","scaledWidth","width","scaledHeight","height","_ratioItem$getSize","scale","_ref2","convertToPng","sourceElem","options","dataURI","binary","_window","atob","split","ia","Uint8Array","ab","i","Blob","downloadFile","fileBlob","fileName","link","document","createElement","setAttribute","url","body","appendChild","click","URL","revokeObjectURL","uiStateExportImage","filename","imageDataUri","file","e","TypeError","message","getMapJSON","exportJson","state","schema","visState","getConfigToSave","title","_lodash","mapToSave","map","exportToJsonString","type","appName","concat","exportHtml","userMapboxToken","exportMapboxAccessToken","mode","data","_objectSpread","_exportMapHtml","exportMapToHTML"],"sources":["/Users/rohinphukan/Desktop/RefugeeWebsite/node_modules/@kepler.gl/utils/src/export-utils.ts"],"sourcesContent":["// Copyright (c) 2022 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\nimport {Blob, URL, atob, Uint8Array, ArrayBuffer, document} from 'global/window';\nimport get from 'lodash.get';\n\nimport {\n  EXPORT_IMG_RESOLUTION_OPTIONS,\n  EXPORT_IMG_RATIO_OPTIONS,\n  RESOLUTIONS,\n  EXPORT_IMG_RATIOS,\n  FourByThreeRatioOption,\n  OneXResolutionOption,\n  ExportImage\n} from '@kepler.gl/constants';\nimport domtoimage from './dom-to-image';\nimport {generateHashId, set} from './utils';\nimport {exportMapToHTML} from './export-map-html';\n\n/**\n * Default file names\n */\nexport const DEFAULT_IMAGE_NAME = 'kepler.gl.png';\nexport const DEFAULT_HTML_NAME = 'kepler.gl.html';\nexport const DEFAULT_JSON_NAME = 'kepler.gl.json';\nexport const DEFAULT_DATA_NAME = 'kepler.gl';\n\n/**\n * Default json export settings\n */\nexport const DEFAULT_EXPORT_JSON_SETTINGS = {\n  hasData: true\n};\n\nconst defaultResolution = OneXResolutionOption;\n\nconst defaultRatio = FourByThreeRatioOption;\n\nexport function isMSEdge(window: Window): boolean {\n  // @ts-ignore msSaveOrOpenBlob was a proprietary addition to the Navigator object, added by Microsoft for Internet Explorer.\n  return Boolean(window.navigator && window.navigator.msSaveOrOpenBlob);\n}\n\nexport function getScaleFromImageSize(imageW = 0, imageH = 0, mapW = 0, mapH = 0) {\n  if ([imageW, imageH, mapW, mapH].some(d => d <= 0)) {\n    return 1;\n  }\n\n  const base = imageW / imageH > 1 ? imageW : imageH;\n  const mapBase = imageW / imageH > 1 ? mapW : mapH;\n  return base / mapBase;\n}\n\nexport function calculateExportImageSize({\n  mapW,\n  mapH,\n  ratio,\n  resolution\n}: {\n  mapW: number;\n  mapH: number;\n  ratio: keyof typeof EXPORT_IMG_RATIOS;\n  resolution: keyof typeof RESOLUTIONS;\n}) {\n  if (mapW <= 0 || mapH <= 0) {\n    return null;\n  }\n\n  const ratioItem = EXPORT_IMG_RATIO_OPTIONS.find(op => op.id === ratio) || defaultRatio;\n\n  const resolutionItem =\n    EXPORT_IMG_RESOLUTION_OPTIONS.find(op => op.id === resolution) || defaultResolution;\n\n  const {width: scaledWidth, height: scaledHeight} = resolutionItem.getSize(mapW, mapH);\n\n  const {width: imageW, height: imageH} = ratioItem.getSize(scaledWidth, scaledHeight);\n\n  const {scale} = ratioItem.id === EXPORT_IMG_RATIOS.CUSTOM ? {scale: undefined} : resolutionItem;\n\n  return {\n    scale,\n    imageW,\n    imageH\n  };\n}\n\nexport function convertToPng(sourceElem: HTMLElement, options) {\n  return domtoimage.toPng(sourceElem, options);\n}\n\nexport function dataURItoBlob(dataURI: string): Blob {\n  const binary = atob(dataURI.split(',')[1]);\n\n  // separate out the mime component\n  const mimeString = dataURI\n    .split(',')[0]\n    .split(':')[1]\n    .split(';')[0];\n\n  // write the bytes of the string to an ArrayBuffer\n  const ab = new ArrayBuffer(binary.length);\n\n  // create a view into the buffer\n  const ia = new Uint8Array(ab);\n\n  for (let i = 0; i < binary.length; i++) {\n    ia[i] = binary.charCodeAt(i);\n  }\n\n  return new Blob([ab], {type: mimeString});\n}\n\nexport function downloadFile(fileBlob: Blob, fileName: string) {\n  if (isMSEdge(window)) {\n    (window.navigator as any).msSaveOrOpenBlob(fileBlob, fileName);\n  } else {\n    const url = URL.createObjectURL(fileBlob);\n\n    const link = document.createElement('a');\n    link.setAttribute('href', url);\n    link.setAttribute('download', fileName);\n\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n    URL.revokeObjectURL(url);\n  }\n}\n\n/**\n * Whether color is rgb\n * @returns\n */\nexport function exportImage(uiStateExportImage: ExportImage, filename = DEFAULT_IMAGE_NAME) {\n  const {imageDataUri} = uiStateExportImage;\n  if (imageDataUri) {\n    const file = dataURItoBlob(imageDataUri);\n    downloadFile(file, filename);\n  }\n}\n\nexport function exportToJsonString(data) {\n  try {\n    return JSON.stringify(data);\n  } catch (e) {\n    if (e instanceof TypeError) return e.message;\n    // Non-Standard Error Object Property\n    return (e as any).description;\n  }\n}\n\nexport function getMapJSON(state, options = DEFAULT_EXPORT_JSON_SETTINGS) {\n  const {hasData} = options;\n  const schema = state.visState.schema;\n\n  if (!hasData) {\n    return schema.getConfigToSave(state);\n  }\n\n  let mapToSave = schema.save(state);\n  // add file name if title is not provided\n  const title = get(mapToSave, ['info', 'title']);\n  if (!title || !title.length) {\n    mapToSave = set(['info', 'title'], `keplergl_${generateHashId(6)}`, mapToSave);\n  }\n  return mapToSave;\n}\n\nexport function exportJson(state, options: any = {}) {\n  const map = getMapJSON(state, options);\n\n  const fileBlob = new Blob([exportToJsonString(map)], {type: 'application/json'});\n  const fileName = state.appName ? `${state.appName}.json` : DEFAULT_JSON_NAME;\n  downloadFile(fileBlob, fileName);\n}\n\nexport function exportHtml(state, options) {\n  const {userMapboxToken, exportMapboxAccessToken, mode} = options;\n\n  const data = {\n    ...getMapJSON(state),\n    mapboxApiAccessToken:\n      (userMapboxToken || '') !== '' ? userMapboxToken : exportMapboxAccessToken,\n    mode\n  };\n\n  const fileBlob = new Blob([exportMapToHTML(data)], {type: 'text/html'});\n  downloadFile(fileBlob, state.appName ? `${state.appName}.html` : DEFAULT_HTML_NAME);\n}\n\nexport function exportMap(state, options = DEFAULT_EXPORT_JSON_SETTINGS) {\n  const {imageDataUri} = state.uiState.exportImage;\n  const thumbnail: Blob | null = imageDataUri ? dataURItoBlob(imageDataUri) : null;\n  const mapToSave = getMapJSON(state, options);\n\n  return {\n    map: mapToSave,\n    thumbnail\n  };\n}\n\nconst exporters = {\n  exportImage,\n  exportJson,\n  exportHtml\n};\n\nexport default exporters;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}