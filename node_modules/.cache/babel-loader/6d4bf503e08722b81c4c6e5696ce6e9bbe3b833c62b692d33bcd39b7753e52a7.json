{"ast":null,"code":"// Copyright (c) 2022 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\nvar _react = _interopRequireWildcard(require(\"react\"));\nvar _localization = require(\"@kepler.gl/localization\");\nvar _styledComponents = require(\"../common/styled-components\");\nvar _icons = require(\"../common/icons\");\nvar _sourceDataCatalog = _interopRequireDefault(require(\"./common/source-data-catalog\"));\nvar _filterPanel = _interopRequireDefault(require(\"./filter-panel/filter-panel\"));\nFilterManagerFactory.deps = [_sourceDataCatalog[\"default\"], _filterPanel[\"default\"]];\nfunction FilterManagerFactory(SourceDataCatalog, FilterPanel) {\n  var FilterManager = function FilterManager(_ref) {\n    var _ref$filters = _ref.filters,\n      filters = _ref$filters === void 0 ? [] : _ref$filters,\n      datasets = _ref.datasets,\n      layers = _ref.layers,\n      showDatasetTable = _ref.showDatasetTable,\n      updateTableColor = _ref.updateTableColor,\n      visStateActions = _ref.visStateActions;\n    var addFilter = visStateActions.addFilter,\n      _enlargeFilter = visStateActions.enlargeFilter,\n      _removeFilter = visStateActions.removeFilter,\n      setFilter = visStateActions.setFilter,\n      toggleFilterAnimation = visStateActions.toggleFilterAnimation,\n      _toggleFilterFeature = visStateActions.toggleFilterFeature;\n    var isAnyFilterAnimating = filters.some(function (f) {\n      return f.isAnimating;\n    });\n    var hadEmptyFilter = filters.some(function (f) {\n      return !f.name;\n    });\n    var hadDataset = Object.keys(datasets).length;\n    var onClickAddFilter = (0, _react.useCallback)(function () {\n      var defaultDataset = Object.keys(datasets).length && Object.keys(datasets)[0] || null;\n      addFilter(defaultDataset);\n    }, [datasets, addFilter]); // render last added filter first\n\n    var reversedIndex = (0, _react.useMemo)(function () {\n      return new Array(filters.length).fill(0).map(function (d, i) {\n        return i;\n      }).reverse();\n    }, [filters.length]);\n    var filterPanelCallbacks = (0, _react.useMemo)(function () {\n      return new Array(filters.length).fill(0).map(function (d, idx) {\n        return {\n          removeFilter: function removeFilter() {\n            return _removeFilter(idx);\n          },\n          enlargeFilter: function enlargeFilter() {\n            return _enlargeFilter(idx);\n          },\n          toggleAnimation: function toggleAnimation() {\n            return toggleFilterAnimation(idx);\n          },\n          toggleFilterFeature: function toggleFilterFeature() {\n            return _toggleFilterFeature(idx);\n          }\n        };\n      });\n    }, [filters.length, _removeFilter, _enlargeFilter, toggleFilterAnimation, _toggleFilterFeature]);\n    return /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n      className: \"filter-manager\"\n    }, /*#__PURE__*/_react[\"default\"].createElement(SourceDataCatalog, {\n      datasets: datasets,\n      showDatasetTable: showDatasetTable,\n      updateTableColor: updateTableColor\n    }), /*#__PURE__*/_react[\"default\"].createElement(_styledComponents.SidePanelDivider, null), /*#__PURE__*/_react[\"default\"].createElement(_styledComponents.SidePanelSection, null, reversedIndex.map(function (idx) {\n      return /*#__PURE__*/_react[\"default\"].createElement(FilterPanel, {\n        key: \"\".concat(filters[idx].id, \"-\").concat(idx),\n        idx: idx,\n        filters: filters,\n        filter: filters[idx],\n        datasets: datasets,\n        layers: layers,\n        isAnyFilterAnimating: isAnyFilterAnimating,\n        removeFilter: filterPanelCallbacks[idx].removeFilter,\n        enlargeFilter: filterPanelCallbacks[idx].enlargeFilter,\n        toggleAnimation: filterPanelCallbacks[idx].toggleAnimation,\n        toggleFilterFeature: filterPanelCallbacks[idx].toggleFilterFeature,\n        setFilter: setFilter\n      });\n    })), /*#__PURE__*/_react[\"default\"].createElement(_styledComponents.Button, {\n      className: \"add-filter-button\",\n      inactive: hadEmptyFilter || !hadDataset,\n      width: \"105px\",\n      onClick: onClickAddFilter\n    }, /*#__PURE__*/_react[\"default\"].createElement(_icons.Add, {\n      height: \"12px\"\n    }), /*#__PURE__*/_react[\"default\"].createElement(_localization.FormattedMessage, {\n      id: 'filterManager.addFilter'\n    })));\n  };\n  return FilterManager;\n}\nvar _default = FilterManagerFactory;\nexports[\"default\"] = _default;","map":{"version":3,"names":["_interopRequireWildcard","require","Object","defineProperty","exports","value","_react","_localization","_styledComponents","_icons","_sourceDataCatalog","_interopRequireDefault","_filterPanel","FilterManagerFactory","deps","FilterManager","_ref","_ref$filters","filters","datasets","layers","showDatasetTable","updateTableColor","visStateActions","addFilter","_enlargeFilter","enlargeFilter","_removeFilter","removeFilter","setFilter","toggleFilterAnimation","_toggleFilterFeature","toggleFilterFeature","isAnyFilterAnimating","some","f","isAnimating","hadEmptyFilter","name","hadDataset","keys","length","onClickAddFilter","useCallback","defaultDataset","Array","fill","map","d","i","reverse","filterPanelCallbacks","useMemo","idx","toggleAnimation","createElement","className","SourceDataCatalog","SidePanelDivider","SidePanelSection","reversedIndex","FilterPanel","key","concat","id","filter","Button","inactive","width","onClick","Add","height","FormattedMessage","_default"],"sources":["/Users/rohinphukan/Desktop/RefugeeWebsite/node_modules/@kepler.gl/components/src/side-panel/filter-manager.tsx"],"sourcesContent":["// Copyright (c) 2022 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\nimport React, {useCallback, useMemo} from 'react';\nimport {FormattedMessage} from '@kepler.gl/localization';\nimport {Button, SidePanelDivider, SidePanelSection} from '../common/styled-components';\nimport {Add} from '../common/icons';\nimport SourceDataCatalogFactory from './common/source-data-catalog';\nimport FilterPanelFactory from './filter-panel/filter-panel';\nimport {Filter} from '@kepler.gl/types';\nimport {Layer} from '@kepler.gl/layers';\nimport {VisStateActions, ActionHandler} from '@kepler.gl/actions';\nimport {Datasets} from '@kepler.gl/table';\n\ntype FilterManagerProps = {\n  filters: Filter[];\n  datasets: Datasets;\n  layers: Layer[];\n  showDatasetTable: ActionHandler<typeof VisStateActions.showDatasetTable>;\n  updateTableColor: ActionHandler<typeof VisStateActions.updateTableColor>;\n  visStateActions: typeof VisStateActions;\n};\n\nFilterManagerFactory.deps = [SourceDataCatalogFactory, FilterPanelFactory];\n\nfunction FilterManagerFactory(\n  SourceDataCatalog: ReturnType<typeof SourceDataCatalogFactory>,\n  FilterPanel: ReturnType<typeof FilterPanelFactory>\n) {\n  const FilterManager = ({\n    filters = [],\n    datasets,\n    layers,\n    showDatasetTable,\n    updateTableColor,\n    visStateActions\n  }: FilterManagerProps) => {\n    const {\n      addFilter,\n      enlargeFilter,\n      removeFilter,\n      setFilter,\n      toggleFilterAnimation,\n      toggleFilterFeature\n    } = visStateActions;\n    const isAnyFilterAnimating = filters.some(f => f.isAnimating);\n    const hadEmptyFilter = filters.some(f => !f.name);\n    const hadDataset = Object.keys(datasets).length;\n    const onClickAddFilter = useCallback(() => {\n      const defaultDataset = (Object.keys(datasets).length && Object.keys(datasets)[0]) || null;\n      addFilter(defaultDataset);\n    }, [datasets, addFilter]);\n    // render last added filter first\n    const reversedIndex = useMemo(() => {\n      return new Array(filters.length)\n        .fill(0)\n        .map((d, i) => i)\n        .reverse();\n    }, [filters.length]);\n\n    const filterPanelCallbacks = useMemo(() => {\n      return new Array(filters.length).fill(0).map((d, idx) => ({\n        removeFilter: () => removeFilter(idx),\n        enlargeFilter: () => enlargeFilter(idx),\n        toggleAnimation: () => toggleFilterAnimation(idx),\n        toggleFilterFeature: () => toggleFilterFeature(idx)\n      }));\n    }, [filters.length, removeFilter, enlargeFilter, toggleFilterAnimation, toggleFilterFeature]);\n\n    return (\n      <div className=\"filter-manager\">\n        <SourceDataCatalog\n          datasets={datasets}\n          showDatasetTable={showDatasetTable}\n          updateTableColor={updateTableColor}\n        />\n        <SidePanelDivider />\n        <SidePanelSection>\n          {reversedIndex.map(idx => (\n            <FilterPanel\n              key={`${filters[idx].id}-${idx}`}\n              idx={idx}\n              filters={filters}\n              filter={filters[idx]}\n              datasets={datasets}\n              layers={layers}\n              isAnyFilterAnimating={isAnyFilterAnimating}\n              removeFilter={filterPanelCallbacks[idx].removeFilter}\n              enlargeFilter={filterPanelCallbacks[idx].enlargeFilter}\n              toggleAnimation={filterPanelCallbacks[idx].toggleAnimation}\n              toggleFilterFeature={filterPanelCallbacks[idx].toggleFilterFeature}\n              setFilter={setFilter}\n            />\n          ))}\n        </SidePanelSection>\n        <Button\n          className=\"add-filter-button\"\n          inactive={hadEmptyFilter || !hadDataset}\n          width=\"105px\"\n          onClick={onClickAddFilter}\n        >\n          <Add height=\"12px\" />\n          <FormattedMessage id={'filterManager.addFilter'} />\n        </Button>\n      </div>\n    );\n  };\n\n  return FilterManager;\n}\n\nexport default FilterManagerFactory;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}