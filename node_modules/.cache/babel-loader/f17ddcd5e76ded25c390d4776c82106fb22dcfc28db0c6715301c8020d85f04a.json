{"ast":null,"code":"import _classCallCheck from \"/Users/rohinphukan/Desktop/RefugeeWebsite/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/rohinphukan/Desktop/RefugeeWebsite/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nexport var I3SPendingTilesRegister = /*#__PURE__*/function () {\n  function I3SPendingTilesRegister() {\n    _classCallCheck(this, I3SPendingTilesRegister);\n    _defineProperty(this, \"frameNumberMap\", new Map());\n  }\n  _createClass(I3SPendingTilesRegister, [{\n    key: \"register\",\n    value: function register(viewportId, frameNumber) {\n      var viewportMap = this.frameNumberMap.get(viewportId) || new Map();\n      var oldCount = viewportMap.get(frameNumber) || 0;\n      viewportMap.set(frameNumber, oldCount + 1);\n      this.frameNumberMap.set(viewportId, viewportMap);\n    }\n  }, {\n    key: \"deregister\",\n    value: function deregister(viewportId, frameNumber) {\n      var viewportMap = this.frameNumberMap.get(viewportId);\n      if (!viewportMap) {\n        return;\n      }\n      var oldCount = viewportMap.get(frameNumber) || 1;\n      viewportMap.set(frameNumber, oldCount - 1);\n    }\n  }, {\n    key: \"isZero\",\n    value: function isZero(viewportId, frameNumber) {\n      var _this$frameNumberMap$;\n      var count = ((_this$frameNumberMap$ = this.frameNumberMap.get(viewportId)) === null || _this$frameNumberMap$ === void 0 ? void 0 : _this$frameNumberMap$.get(frameNumber)) || 0;\n      return count === 0;\n    }\n  }]);\n  return I3SPendingTilesRegister;\n}();","map":{"version":3,"names":["I3SPendingTilesRegister","_classCallCheck","_defineProperty","Map","_createClass","key","value","register","viewportId","frameNumber","viewportMap","frameNumberMap","get","oldCount","set","deregister","isZero","_this$frameNumberMap$","count"],"sources":["/Users/rohinphukan/Desktop/RefugeeWebsite/node_modules/@deck.gl/geo-layers/node_modules/@loaders.gl/tiles/src/tileset/format-i3s/i3s-pending-tiles-register.ts"],"sourcesContent":["/**\n * Counter to register pending tile headers for the particular frameNumber\n * Until all tiles are loaded we won't call `onTraversalEnd` callback\n */\nexport class I3SPendingTilesRegister {\n  private frameNumberMap: Map<string, Map<number, number>> = new Map();\n\n  /**\n   * Register a new pending tile header for the particular frameNumber\n   * @param viewportId\n   * @param frameNumber\n   */\n  register(viewportId: string, frameNumber: number) {\n    const viewportMap = this.frameNumberMap.get(viewportId) || new Map();\n    const oldCount = viewportMap.get(frameNumber) || 0;\n    viewportMap.set(frameNumber, oldCount + 1);\n    this.frameNumberMap.set(viewportId, viewportMap);\n  }\n\n  /**\n   * Deregister a pending tile header for the particular frameNumber\n   * @param viewportId\n   * @param frameNumber\n   */\n  deregister(viewportId: string, frameNumber: number) {\n    const viewportMap = this.frameNumberMap.get(viewportId);\n    if (!viewportMap) {\n      return;\n    }\n    const oldCount = viewportMap.get(frameNumber) || 1;\n    viewportMap.set(frameNumber, oldCount - 1);\n  }\n\n  /**\n   * Check is there are no pending tile headers registered for the particular frameNumber\n   * @param viewportId\n   * @param frameNumber\n   * @returns\n   */\n  isZero(viewportId: string, frameNumber: number) {\n    const count = this.frameNumberMap.get(viewportId)?.get(frameNumber) || 0;\n    return count === 0;\n  }\n}\n"],"mappings":";;;AAIA,WAAaA,uBAAuB;EAAC,SAAAA,wBAAA;IAAAC,eAAA,OAAAD,uBAAA;IAAAE,eAAA,yBACwB,IAAIC,GAAG,EAAE;EAAA;EAAAC,YAAA,CAAAJ,uBAAA;IAAAK,GAAA;IAAAC,KAAA,EAOpE,SAAAC,SAASC,UAAkB,EAAEC,WAAmB,EAAE;MAChD,IAAMC,WAAW,GAAG,IAAI,CAACC,cAAc,CAACC,GAAG,CAACJ,UAAU,CAAC,IAAI,IAAIL,GAAG,EAAE;MACpE,IAAMU,QAAQ,GAAGH,WAAW,CAACE,GAAG,CAACH,WAAW,CAAC,IAAI,CAAC;MAClDC,WAAW,CAACI,GAAG,CAACL,WAAW,EAAEI,QAAQ,GAAG,CAAC,CAAC;MAC1C,IAAI,CAACF,cAAc,CAACG,GAAG,CAACN,UAAU,EAAEE,WAAW,CAAC;IAClD;EAAA;IAAAL,GAAA;IAAAC,KAAA,EAOA,SAAAS,WAAWP,UAAkB,EAAEC,WAAmB,EAAE;MAClD,IAAMC,WAAW,GAAG,IAAI,CAACC,cAAc,CAACC,GAAG,CAACJ,UAAU,CAAC;MACvD,IAAI,CAACE,WAAW,EAAE;QAChB;MACF;MACA,IAAMG,QAAQ,GAAGH,WAAW,CAACE,GAAG,CAACH,WAAW,CAAC,IAAI,CAAC;MAClDC,WAAW,CAACI,GAAG,CAACL,WAAW,EAAEI,QAAQ,GAAG,CAAC,CAAC;IAC5C;EAAA;IAAAR,GAAA;IAAAC,KAAA,EAQA,SAAAU,OAAOR,UAAkB,EAAEC,WAAmB,EAAE;MAAA,IAAAQ,qBAAA;MAC9C,IAAMC,KAAK,GAAG,EAAAD,qBAAA,OAAI,CAACN,cAAc,CAACC,GAAG,CAACJ,UAAU,CAAC,cAAAS,qBAAA,uBAAnCA,qBAAA,CAAqCL,GAAG,CAACH,WAAW,CAAC,KAAI,CAAC;MACxE,OAAOS,KAAK,KAAK,CAAC;IACpB;EAAA;EAAA,OAAAlB,uBAAA;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}