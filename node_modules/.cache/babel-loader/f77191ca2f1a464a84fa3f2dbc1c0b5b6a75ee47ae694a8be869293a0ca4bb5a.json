{"ast":null,"code":"import _regeneratorRuntime from \"/Users/rohinphukan/Desktop/RefugeeWebsite/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _objectSpread from \"/Users/rohinphukan/Desktop/RefugeeWebsite/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _createForOfIteratorHelper from \"/Users/rohinphukan/Desktop/RefugeeWebsite/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport _toConsumableArray from \"/Users/rohinphukan/Desktop/RefugeeWebsite/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _asyncToGenerator from \"/Users/rohinphukan/Desktop/RefugeeWebsite/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { compareArrayBuffers, path } from '@loaders.gl/loader-utils';\nimport { normalizeLoader } from '../loader-utils/normalize-loader';\nimport { log } from '../utils/log';\nimport { getResourceUrlAndType } from '../utils/resource-utils';\nimport { getRegisteredLoaders } from './register-loaders';\nimport { isBlob } from '../../javascript-utils/is-type';\nvar EXT_PATTERN = /\\.([^.]+)$/;\nexport function selectLoader(_x) {\n  return _selectLoader.apply(this, arguments);\n}\nfunction _selectLoader() {\n  _selectLoader = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(data) {\n    var loaders,\n      options,\n      context,\n      loader,\n      _args = arguments;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          loaders = _args.length > 1 && _args[1] !== undefined ? _args[1] : [];\n          options = _args.length > 2 ? _args[2] : undefined;\n          context = _args.length > 3 ? _args[3] : undefined;\n          if (validHTTPResponse(data)) {\n            _context.next = 5;\n            break;\n          }\n          return _context.abrupt(\"return\", null);\n        case 5:\n          loader = selectLoaderSync(data, loaders, _objectSpread(_objectSpread({}, options), {}, {\n            nothrow: true\n          }), context);\n          if (!loader) {\n            _context.next = 8;\n            break;\n          }\n          return _context.abrupt(\"return\", loader);\n        case 8:\n          if (!isBlob(data)) {\n            _context.next = 13;\n            break;\n          }\n          _context.next = 11;\n          return data.slice(0, 10).arrayBuffer();\n        case 11:\n          data = _context.sent;\n          loader = selectLoaderSync(data, loaders, options, context);\n        case 13:\n          if (!(!loader && !(options !== null && options !== void 0 && options.nothrow))) {\n            _context.next = 15;\n            break;\n          }\n          throw new Error(getNoValidLoaderMessage(data));\n        case 15:\n          return _context.abrupt(\"return\", loader);\n        case 16:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee);\n  }));\n  return _selectLoader.apply(this, arguments);\n}\nexport function selectLoaderSync(data) {\n  var loaders = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  var options = arguments.length > 2 ? arguments[2] : undefined;\n  var context = arguments.length > 3 ? arguments[3] : undefined;\n  if (!validHTTPResponse(data)) {\n    return null;\n  }\n  if (loaders && !Array.isArray(loaders)) {\n    return normalizeLoader(loaders);\n  }\n  var candidateLoaders = [];\n  if (loaders) {\n    candidateLoaders = candidateLoaders.concat(loaders);\n  }\n  if (!(options !== null && options !== void 0 && options.ignoreRegisteredLoaders)) {\n    var _candidateLoaders;\n    (_candidateLoaders = candidateLoaders).push.apply(_candidateLoaders, _toConsumableArray(getRegisteredLoaders()));\n  }\n  normalizeLoaders(candidateLoaders);\n  var loader = selectLoaderInternal(data, candidateLoaders, options, context);\n  if (!loader && !(options !== null && options !== void 0 && options.nothrow)) {\n    throw new Error(getNoValidLoaderMessage(data));\n  }\n  return loader;\n}\nfunction selectLoaderInternal(data, loaders, options, context) {\n  var _getResourceUrlAndTyp = getResourceUrlAndType(data),\n    url = _getResourceUrlAndTyp.url,\n    type = _getResourceUrlAndTyp.type;\n  var testUrl = url || (context === null || context === void 0 ? void 0 : context.url);\n  var loader = null;\n  var reason = '';\n  if (options !== null && options !== void 0 && options.mimeType) {\n    loader = findLoaderByMIMEType(loaders, options === null || options === void 0 ? void 0 : options.mimeType);\n    reason = \"match forced by supplied MIME type \".concat(options === null || options === void 0 ? void 0 : options.mimeType);\n  }\n  loader = loader || findLoaderByUrl(loaders, testUrl);\n  reason = reason || (loader ? \"matched url \".concat(testUrl) : '');\n  loader = loader || findLoaderByMIMEType(loaders, type);\n  reason = reason || (loader ? \"matched MIME type \".concat(type) : '');\n  loader = loader || findLoaderByInitialBytes(loaders, data);\n  reason = reason || (loader ? \"matched initial data \".concat(getFirstCharacters(data)) : '');\n  loader = loader || findLoaderByMIMEType(loaders, options === null || options === void 0 ? void 0 : options.fallbackMimeType);\n  reason = reason || (loader ? \"matched fallback MIME type \".concat(type) : '');\n  if (reason) {\n    var _loader;\n    log.log(1, \"selectLoader selected \".concat((_loader = loader) === null || _loader === void 0 ? void 0 : _loader.name, \": \").concat(reason, \".\"));\n  }\n  return loader;\n}\nfunction validHTTPResponse(data) {\n  if (data instanceof Response) {\n    if (data.status === 204) {\n      return false;\n    }\n  }\n  return true;\n}\nfunction getNoValidLoaderMessage(data) {\n  var _getResourceUrlAndTyp2 = getResourceUrlAndType(data),\n    url = _getResourceUrlAndTyp2.url,\n    type = _getResourceUrlAndTyp2.type;\n  var message = 'No valid loader found (';\n  message += url ? \"\".concat(path.filename(url), \", \") : 'no url provided, ';\n  message += \"MIME type: \".concat(type ? \"\\\"\".concat(type, \"\\\"\") : 'not provided', \", \");\n  var firstCharacters = data ? getFirstCharacters(data) : '';\n  message += firstCharacters ? \" first bytes: \\\"\".concat(firstCharacters, \"\\\"\") : 'first bytes: not available';\n  message += ')';\n  return message;\n}\nfunction normalizeLoaders(loaders) {\n  var _iterator = _createForOfIteratorHelper(loaders),\n    _step;\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var loader = _step.value;\n      normalizeLoader(loader);\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n}\nfunction findLoaderByUrl(loaders, url) {\n  var match = url && EXT_PATTERN.exec(url);\n  var extension = match && match[1];\n  return extension ? findLoaderByExtension(loaders, extension) : null;\n}\nfunction findLoaderByExtension(loaders, extension) {\n  extension = extension.toLowerCase();\n  var _iterator2 = _createForOfIteratorHelper(loaders),\n    _step2;\n  try {\n    for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n      var loader = _step2.value;\n      var _iterator3 = _createForOfIteratorHelper(loader.extensions),\n        _step3;\n      try {\n        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n          var loaderExtension = _step3.value;\n          if (loaderExtension.toLowerCase() === extension) {\n            return loader;\n          }\n        }\n      } catch (err) {\n        _iterator3.e(err);\n      } finally {\n        _iterator3.f();\n      }\n    }\n  } catch (err) {\n    _iterator2.e(err);\n  } finally {\n    _iterator2.f();\n  }\n  return null;\n}\nfunction findLoaderByMIMEType(loaders, mimeType) {\n  var _iterator4 = _createForOfIteratorHelper(loaders),\n    _step4;\n  try {\n    for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n      var loader = _step4.value;\n      if (loader.mimeTypes && loader.mimeTypes.includes(mimeType)) {\n        return loader;\n      }\n      if (mimeType === \"application/x.\".concat(loader.id)) {\n        return loader;\n      }\n    }\n  } catch (err) {\n    _iterator4.e(err);\n  } finally {\n    _iterator4.f();\n  }\n  return null;\n}\nfunction findLoaderByInitialBytes(loaders, data) {\n  if (!data) {\n    return null;\n  }\n  var _iterator5 = _createForOfIteratorHelper(loaders),\n    _step5;\n  try {\n    for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n      var loader = _step5.value;\n      if (typeof data === 'string') {\n        if (testDataAgainstText(data, loader)) {\n          return loader;\n        }\n      } else if (ArrayBuffer.isView(data)) {\n        if (testDataAgainstBinary(data.buffer, data.byteOffset, loader)) {\n          return loader;\n        }\n      } else if (data instanceof ArrayBuffer) {\n        var byteOffset = 0;\n        if (testDataAgainstBinary(data, byteOffset, loader)) {\n          return loader;\n        }\n      }\n    }\n  } catch (err) {\n    _iterator5.e(err);\n  } finally {\n    _iterator5.f();\n  }\n  return null;\n}\nfunction testDataAgainstText(data, loader) {\n  if (loader.testText) {\n    return loader.testText(data);\n  }\n  var tests = Array.isArray(loader.tests) ? loader.tests : [loader.tests];\n  return tests.some(function (test) {\n    return data.startsWith(test);\n  });\n}\nfunction testDataAgainstBinary(data, byteOffset, loader) {\n  var tests = Array.isArray(loader.tests) ? loader.tests : [loader.tests];\n  return tests.some(function (test) {\n    return testBinary(data, byteOffset, loader, test);\n  });\n}\nfunction testBinary(data, byteOffset, loader, test) {\n  if (test instanceof ArrayBuffer) {\n    return compareArrayBuffers(test, data, test.byteLength);\n  }\n  switch (typeof test) {\n    case 'function':\n      return test(data, loader);\n    case 'string':\n      var magic = getMagicString(data, byteOffset, test.length);\n      return test === magic;\n    default:\n      return false;\n  }\n}\nfunction getFirstCharacters(data) {\n  var length = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 5;\n  if (typeof data === 'string') {\n    return data.slice(0, length);\n  } else if (ArrayBuffer.isView(data)) {\n    return getMagicString(data.buffer, data.byteOffset, length);\n  } else if (data instanceof ArrayBuffer) {\n    var byteOffset = 0;\n    return getMagicString(data, byteOffset, length);\n  }\n  return '';\n}\nfunction getMagicString(arrayBuffer, byteOffset, length) {\n  if (arrayBuffer.byteLength < byteOffset + length) {\n    return '';\n  }\n  var dataView = new DataView(arrayBuffer);\n  var magic = '';\n  for (var i = 0; i < length; i++) {\n    magic += String.fromCharCode(dataView.getUint8(byteOffset + i));\n  }\n  return magic;\n}","map":{"version":3,"names":["compareArrayBuffers","path","normalizeLoader","log","getResourceUrlAndType","getRegisteredLoaders","isBlob","EXT_PATTERN","selectLoader","_x","_selectLoader","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","data","loaders","options","context","loader","_args","wrap","_callee$","_context","prev","next","length","undefined","validHTTPResponse","abrupt","selectLoaderSync","_objectSpread","nothrow","slice","arrayBuffer","sent","Error","getNoValidLoaderMessage","stop","Array","isArray","candidateLoaders","concat","ignoreRegisteredLoaders","_candidateLoaders","push","_toConsumableArray","normalizeLoaders","selectLoaderInternal","_getResourceUrlAndTyp","url","type","testUrl","reason","mimeType","findLoaderByMIMEType","findLoaderByUrl","findLoaderByInitialBytes","getFirstCharacters","fallbackMimeType","_loader","name","Response","status","_getResourceUrlAndTyp2","message","filename","firstCharacters","_iterator","_createForOfIteratorHelper","_step","s","n","done","value","err","e","f","match","exec","extension","findLoaderByExtension","toLowerCase","_iterator2","_step2","_iterator3","extensions","_step3","loaderExtension","_iterator4","_step4","mimeTypes","includes","id","_iterator5","_step5","testDataAgainstText","ArrayBuffer","isView","testDataAgainstBinary","buffer","byteOffset","testText","tests","some","test","startsWith","testBinary","byteLength","magic","getMagicString","dataView","DataView","i","String","fromCharCode","getUint8"],"sources":["/Users/rohinphukan/Desktop/RefugeeWebsite/node_modules/@deck.gl/layers/node_modules/@loaders.gl/core/src/lib/api/select-loader.ts"],"sourcesContent":["import type {LoaderContext, LoaderOptions, Loader} from '@loaders.gl/loader-utils';\nimport {compareArrayBuffers, path} from '@loaders.gl/loader-utils';\nimport {normalizeLoader} from '../loader-utils/normalize-loader';\nimport {log} from '../utils/log';\nimport {getResourceUrlAndType} from '../utils/resource-utils';\nimport {getRegisteredLoaders} from './register-loaders';\nimport {isBlob} from '../../javascript-utils/is-type';\n\nconst EXT_PATTERN = /\\.([^.]+)$/;\n\n// TODO - Need a variant that peeks at streams for parseInBatches\n// TODO - Detect multiple matching loaders? Use heuristics to grade matches?\n// TODO - Allow apps to pass context to disambiguate between multiple matches (e.g. multiple .json formats)?\n\n/**\n * Find a loader that matches file extension and/or initial file content\n * Search the loaders array argument for a loader that matches url extension or initial data\n * Returns: a normalized loader\n * @param data data to assist\n * @param loaders\n * @param options\n * @param context used internally, applications should not provide this parameter\n */\nexport async function selectLoader(\n  data: Response | Blob | ArrayBuffer | string,\n  loaders: Loader[] | Loader = [],\n  options?: LoaderOptions,\n  context?: LoaderContext\n): Promise<Loader | null> {\n  if (!validHTTPResponse(data)) {\n    return null;\n  }\n\n  // First make a sync attempt, disabling exceptions\n  let loader = selectLoaderSync(data, loaders, {...options, nothrow: true}, context);\n  if (loader) {\n    return loader;\n  }\n\n  // For Blobs and Files, try to asynchronously read a small initial slice and test again with that\n  // to see if we can detect by initial content\n  if (isBlob(data)) {\n    data = await (data as Blob).slice(0, 10).arrayBuffer();\n    loader = selectLoaderSync(data, loaders, options, context);\n  }\n\n  // no loader available\n  if (!loader && !options?.nothrow) {\n    throw new Error(getNoValidLoaderMessage(data));\n  }\n\n  return loader;\n}\n\n/**\n * Find a loader that matches file extension and/or initial file content\n * Search the loaders array argument for a loader that matches url extension or initial data\n * Returns: a normalized loader\n * @param data data to assist\n * @param loaders\n * @param options\n * @param context used internally, applications should not provide this parameter\n */\nexport function selectLoaderSync(\n  data: Response | Blob | ArrayBuffer | string,\n  loaders: Loader[] | Loader = [],\n  options?: LoaderOptions,\n  context?: LoaderContext\n): Loader | null {\n  if (!validHTTPResponse(data)) {\n    return null;\n  }\n\n  // eslint-disable-next-line complexity\n  // if only a single loader was provided (not as array), force its use\n  // TODO - Should this behavior be kept and documented?\n  if (loaders && !Array.isArray(loaders)) {\n    // TODO - remove support for legacy loaders\n    return normalizeLoader(loaders);\n  }\n\n  // Build list of candidate loaders that will be searched in order for a match\n  let candidateLoaders: Loader[] = [];\n  // First search supplied loaders\n  if (loaders) {\n    candidateLoaders = candidateLoaders.concat(loaders);\n  }\n  // Then fall back to registered loaders\n  if (!options?.ignoreRegisteredLoaders) {\n    candidateLoaders.push(...getRegisteredLoaders());\n  }\n\n  // TODO - remove support for legacy loaders\n  normalizeLoaders(candidateLoaders);\n\n  const loader = selectLoaderInternal(data, candidateLoaders, options, context);\n\n  // no loader available\n  if (!loader && !options?.nothrow) {\n    throw new Error(getNoValidLoaderMessage(data));\n  }\n\n  return loader;\n}\n\n/** Implements loaders selection logic */\n// eslint-disable-next-line complexity\nfunction selectLoaderInternal(\n  data: Response | Blob | ArrayBuffer | string,\n  loaders: Loader[],\n  options?: LoaderOptions,\n  context?: LoaderContext\n) {\n  const {url, type} = getResourceUrlAndType(data);\n\n  const testUrl = url || context?.url;\n\n  let loader: Loader | null = null;\n  let reason: string = '';\n\n  // if options.mimeType is supplied, it takes precedence\n  if (options?.mimeType) {\n    loader = findLoaderByMIMEType(loaders, options?.mimeType);\n    reason = `match forced by supplied MIME type ${options?.mimeType}`;\n  }\n\n  // Look up loader by url\n  loader = loader || findLoaderByUrl(loaders, testUrl);\n  reason = reason || (loader ? `matched url ${testUrl}` : '');\n\n  // Look up loader by mime type\n  loader = loader || findLoaderByMIMEType(loaders, type);\n  reason = reason || (loader ? `matched MIME type ${type}` : '');\n\n  // Look for loader via initial bytes (Note: not always accessible (e.g. Response, stream, async iterator)\n  loader = loader || findLoaderByInitialBytes(loaders, data);\n  reason = reason || (loader ? `matched initial data ${getFirstCharacters(data)}` : '');\n\n  // Look up loader by fallback mime type\n  loader = loader || findLoaderByMIMEType(loaders, options?.fallbackMimeType);\n  reason = reason || (loader ? `matched fallback MIME type ${type}` : '');\n\n  if (reason) {\n    log.log(1, `selectLoader selected ${loader?.name}: ${reason}.`);\n  }\n\n  return loader;\n}\n\n/** Check HTTP Response */\nfunction validHTTPResponse(data: any): boolean {\n  // HANDLE HTTP status\n  if (data instanceof Response) {\n    // 204 - NO CONTENT. This handles cases where e.g. a tile server responds with 204 for a missing tile\n    if (data.status === 204) {\n      return false;\n    }\n  }\n  return true;\n}\n\n/** Generate a helpful message to help explain why loader selection failed. */\nfunction getNoValidLoaderMessage(data): string {\n  const {url, type} = getResourceUrlAndType(data);\n\n  let message = 'No valid loader found (';\n  message += url ? `${path.filename(url)}, ` : 'no url provided, ';\n  message += `MIME type: ${type ? `\"${type}\"` : 'not provided'}, `;\n  // First characters are only accessible when called on data (string or arrayBuffer).\n  const firstCharacters: string = data ? getFirstCharacters(data) : '';\n  message += firstCharacters ? ` first bytes: \"${firstCharacters}\"` : 'first bytes: not available';\n  message += ')';\n  return message;\n}\n\nfunction normalizeLoaders(loaders: Loader[]): void {\n  for (const loader of loaders) {\n    normalizeLoader(loader);\n  }\n}\n\n// TODO - Would be nice to support http://example.com/file.glb?parameter=1\n// E.g: x = new URL('http://example.com/file.glb?load=1'; x.pathname\nfunction findLoaderByUrl(loaders: Loader[], url?: string): Loader | null {\n  // Get extension\n  const match = url && EXT_PATTERN.exec(url);\n  const extension = match && match[1];\n  return extension ? findLoaderByExtension(loaders, extension) : null;\n}\n\nfunction findLoaderByExtension(loaders: Loader[], extension: string): Loader | null {\n  extension = extension.toLowerCase();\n\n  for (const loader of loaders) {\n    for (const loaderExtension of loader.extensions) {\n      if (loaderExtension.toLowerCase() === extension) {\n        return loader;\n      }\n    }\n  }\n  return null;\n}\n\nfunction findLoaderByMIMEType(loaders, mimeType) {\n  for (const loader of loaders) {\n    if (loader.mimeTypes && loader.mimeTypes.includes(mimeType)) {\n      return loader;\n    }\n\n    // Support referring to loaders using the \"unregistered tree\"\n    // https://en.wikipedia.org/wiki/Media_type#Unregistered_tree\n    if (mimeType === `application/x.${loader.id}`) {\n      return loader;\n    }\n  }\n  return null;\n}\n\nfunction findLoaderByInitialBytes(loaders, data) {\n  if (!data) {\n    return null;\n  }\n\n  for (const loader of loaders) {\n    if (typeof data === 'string') {\n      if (testDataAgainstText(data, loader)) {\n        return loader;\n      }\n    } else if (ArrayBuffer.isView(data)) {\n      // Typed Arrays can have offsets into underlying buffer\n      if (testDataAgainstBinary(data.buffer, data.byteOffset, loader)) {\n        return loader;\n      }\n    } else if (data instanceof ArrayBuffer) {\n      const byteOffset = 0;\n      if (testDataAgainstBinary(data, byteOffset, loader)) {\n        return loader;\n      }\n    }\n    // TODO Handle streaming case (requires creating a new AsyncIterator)\n  }\n  return null;\n}\n\nfunction testDataAgainstText(data, loader) {\n  if (loader.testText) {\n    return loader.testText(data);\n  }\n\n  const tests = Array.isArray(loader.tests) ? loader.tests : [loader.tests];\n  return tests.some((test) => data.startsWith(test));\n}\n\nfunction testDataAgainstBinary(data, byteOffset, loader) {\n  const tests = Array.isArray(loader.tests) ? loader.tests : [loader.tests];\n  return tests.some((test) => testBinary(data, byteOffset, loader, test));\n}\n\nfunction testBinary(data, byteOffset, loader, test) {\n  if (test instanceof ArrayBuffer) {\n    return compareArrayBuffers(test, data, test.byteLength);\n  }\n  switch (typeof test) {\n    case 'function':\n      return test(data, loader);\n\n    case 'string':\n      // Magic bytes check: If `test` is a string, check if binary data starts with that strings\n      const magic = getMagicString(data, byteOffset, test.length);\n      return test === magic;\n\n    default:\n      return false;\n  }\n}\n\nfunction getFirstCharacters(data, length: number = 5) {\n  if (typeof data === 'string') {\n    return data.slice(0, length);\n  } else if (ArrayBuffer.isView(data)) {\n    // Typed Arrays can have offsets into underlying buffer\n    return getMagicString(data.buffer, data.byteOffset, length);\n  } else if (data instanceof ArrayBuffer) {\n    const byteOffset = 0;\n    return getMagicString(data, byteOffset, length);\n  }\n  return '';\n}\n\nfunction getMagicString(arrayBuffer, byteOffset, length) {\n  if (arrayBuffer.byteLength < byteOffset + length) {\n    return '';\n  }\n  const dataView = new DataView(arrayBuffer);\n  let magic = '';\n  for (let i = 0; i < length; i++) {\n    magic += String.fromCharCode(dataView.getUint8(byteOffset + i));\n  }\n  return magic;\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}