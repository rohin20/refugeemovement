{"ast":null,"code":"import _createForOfIteratorHelper from \"/Users/rohinphukan/Desktop/RefugeeWebsite/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport _classCallCheck from \"/Users/rohinphukan/Desktop/RefugeeWebsite/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/rohinphukan/Desktop/RefugeeWebsite/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { deepEqual } from '../utils/deep-equal';\nimport LightingEffect from '../effects/lighting/lighting-effect';\nimport MaskEffect from '../effects/mask/mask-effect';\nvar DEFAULT_LIGHTING_EFFECT = new LightingEffect();\nvar EffectManager = /*#__PURE__*/function () {\n  function EffectManager() {\n    _classCallCheck(this, EffectManager);\n    _defineProperty(this, \"effects\", void 0);\n    _defineProperty(this, \"_internalEffects\", void 0);\n    _defineProperty(this, \"_needsRedraw\", void 0);\n    this.effects = [];\n    this._internalEffects = [];\n    this._needsRedraw = 'Initial render';\n    this.setEffects();\n  }\n  _createClass(EffectManager, [{\n    key: \"setProps\",\n    value: function setProps(props) {\n      if ('effects' in props) {\n        if (props.effects.length !== this.effects.length || !deepEqual(props.effects, this.effects)) {\n          this.setEffects(props.effects);\n          this._needsRedraw = 'effects changed';\n        }\n      }\n    }\n  }, {\n    key: \"needsRedraw\",\n    value: function needsRedraw() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n        clearRedrawFlags: false\n      };\n      var redraw = this._needsRedraw;\n      if (opts.clearRedrawFlags) {\n        this._needsRedraw = false;\n      }\n      return redraw;\n    }\n  }, {\n    key: \"getEffects\",\n    value: function getEffects() {\n      return this._internalEffects;\n    }\n  }, {\n    key: \"finalize\",\n    value: function finalize() {\n      this.cleanup();\n    }\n  }, {\n    key: \"setEffects\",\n    value: function setEffects() {\n      var effects = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n      this.cleanup();\n      this.effects = effects;\n      this._internalEffects = effects.slice();\n      this._internalEffects.push(new MaskEffect());\n      if (!effects.some(function (effect) {\n        return effect instanceof LightingEffect;\n      })) {\n        this._internalEffects.push(DEFAULT_LIGHTING_EFFECT);\n      }\n    }\n  }, {\n    key: \"cleanup\",\n    value: function cleanup() {\n      var _iterator = _createForOfIteratorHelper(this.effects),\n        _step;\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var effect = _step.value;\n          effect.cleanup();\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n      var _iterator2 = _createForOfIteratorHelper(this._internalEffects),\n        _step2;\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var _effect = _step2.value;\n          _effect.cleanup();\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n      this.effects.length = 0;\n      this._internalEffects.length = 0;\n    }\n  }]);\n  return EffectManager;\n}();\nexport { EffectManager as default };","map":{"version":3,"names":["deepEqual","LightingEffect","MaskEffect","DEFAULT_LIGHTING_EFFECT","EffectManager","_classCallCheck","_defineProperty","effects","_internalEffects","_needsRedraw","setEffects","_createClass","key","value","setProps","props","length","needsRedraw","opts","arguments","undefined","clearRedrawFlags","redraw","getEffects","finalize","cleanup","slice","push","some","effect","_iterator","_createForOfIteratorHelper","_step","s","n","done","err","e","f","_iterator2","_step2","default"],"sources":["/Users/rohinphukan/Desktop/RefugeeWebsite/node_modules/@deck.gl/core/src/lib/effect-manager.ts"],"sourcesContent":["import {deepEqual} from '../utils/deep-equal';\nimport LightingEffect from '../effects/lighting/lighting-effect';\nimport MaskEffect from '../effects/mask/mask-effect';\nimport type {Effect} from './effect';\n\nconst DEFAULT_LIGHTING_EFFECT = new LightingEffect();\n\nexport default class EffectManager {\n  effects: Effect[];\n  _internalEffects: Effect[];\n  _needsRedraw: false | string;\n\n  constructor() {\n    this.effects = [];\n    this._internalEffects = [];\n    this._needsRedraw = 'Initial render';\n    this.setEffects();\n  }\n\n  setProps(props) {\n    if ('effects' in props) {\n      if (props.effects.length !== this.effects.length || !deepEqual(props.effects, this.effects)) {\n        this.setEffects(props.effects);\n        this._needsRedraw = 'effects changed';\n      }\n    }\n  }\n\n  needsRedraw(opts = {clearRedrawFlags: false}): false | string {\n    const redraw = this._needsRedraw;\n    if (opts.clearRedrawFlags) {\n      this._needsRedraw = false;\n    }\n    return redraw;\n  }\n\n  getEffects() {\n    return this._internalEffects;\n  }\n\n  finalize() {\n    this.cleanup();\n  }\n\n  // Private\n  setEffects(effects: Effect[] = []) {\n    this.cleanup();\n    this.effects = effects;\n\n    this._internalEffects = effects.slice();\n    // Unique MaskEffect per EffectManager as GL context may be different\n    this._internalEffects.push(new MaskEffect());\n    if (!effects.some(effect => effect instanceof LightingEffect)) {\n      this._internalEffects.push(DEFAULT_LIGHTING_EFFECT);\n    }\n  }\n\n  cleanup() {\n    for (const effect of this.effects) {\n      effect.cleanup();\n    }\n\n    for (const effect of this._internalEffects) {\n      effect.cleanup();\n    }\n    this.effects.length = 0;\n    this._internalEffects.length = 0;\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}