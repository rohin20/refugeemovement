{"ast":null,"code":"// Copyright (c) 2022 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = exports.testForCoordinates = void 0;\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\nvar _taggedTemplateLiteral2 = _interopRequireDefault(require(\"@babel/runtime/helpers/taggedTemplateLiteral\"));\nvar _react = _interopRequireWildcard(require(\"react\"));\nvar _styledComponents = _interopRequireDefault(require(\"styled-components\"));\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\nvar _mapbox = _interopRequireDefault(require(\"mapbox\"));\nvar _reactIntl = require(\"react-intl\");\nvar _viewportMercatorProject = require(\"viewport-mercator-project\");\nvar _constants = require(\"@kepler.gl/constants\");\nvar _styledComponents2 = require(\"../common/styled-components\");\nvar _icons = require(\"../common/icons\");\nvar _templateObject;\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        (0, _defineProperty2[\"default\"])(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n  return target;\n}\n\n// matches only valid coordinates\nvar COORDINATE_REGEX_STRING = '^[-+]?([1-8]?\\\\d(\\\\.\\\\d+)?|90(\\\\.0+)?),\\\\s*[-+]?(180(\\\\.0+)?|((1[0-7]\\\\d)|([1-9]?\\\\d))(\\\\.\\\\d+)?)';\nvar COORDINATE_REGEX = RegExp(COORDINATE_REGEX_STRING);\nvar PLACEHOLDER = 'Enter an address or coordinates, ex 37.79,-122.40';\nvar debounceTimeout = null;\nvar testForCoordinates = function testForCoordinates(query) {\n  var isValid = COORDINATE_REGEX.test(query.trim());\n  if (!isValid) {\n    return [isValid, query];\n  }\n  var tokens = query.trim().split(',');\n  return [isValid, Number(tokens[0]), Number(tokens[1])];\n};\nexports.testForCoordinates = testForCoordinates;\nvar StyledContainer = _styledComponents[\"default\"].div(_templateObject || (_templateObject = (0, _taggedTemplateLiteral2[\"default\"])([\"\\n  position: relative;\\n  color: \", \";\\n\\n  .geocoder-input {\\n    box-shadow: \", \";\\n\\n    .geocoder-input__search {\\n      position: absolute;\\n      height: \", \"px;\\n      width: 30px;\\n      padding-left: 6px;\\n      display: flex;\\n      align-items: center;\\n      justify-content: center;\\n      color: \", \";\\n    }\\n\\n    input {\\n      padding: 4px 36px;\\n      height: \", \"px;\\n      caret-color: unset;\\n    }\\n  }\\n\\n  .geocoder-results {\\n    box-shadow: \", \";\\n    background-color: \", \";\\n    position: absolute;\\n    width: \", \"px;\\n    margin-top: \", \"px;\\n  }\\n\\n  .geocoder-item {\\n    \", \";\\n    \", \";\\n\\n    &.active {\\n      background-color: \", \";\\n    }\\n  }\\n\\n  .remove-result {\\n    position: absolute;\\n    right: 16px;\\n    top: 0px;\\n    height: \", \"px;\\n    display: flex;\\n    align-items: center;\\n\\n    :hover {\\n      cursor: pointer;\\n      color: \", \";\\n    }\\n  }\\n\"])), function (props) {\n  return props.theme.textColor;\n}, function (props) {\n  return props.theme.boxShadow;\n}, function (props) {\n  return props.theme.geocoderInputHeight;\n}, function (props) {\n  return props.theme.subtextColor;\n}, function (props) {\n  return props.theme.geocoderInputHeight;\n}, function (props) {\n  return props.theme.boxShadow;\n}, function (props) {\n  return props.theme.panelBackground;\n}, function (props) {\n  return Number.isFinite(props.width) ? props.width : props.theme.geocoderWidth;\n}, function (props) {\n  return props.theme.dropdownWapperMargin;\n}, function (props) {\n  return props.theme.dropdownListItem;\n}, function (props) {\n  return props.theme.textTruncate;\n}, function (props) {\n  return props.theme.dropdownListHighlightBg;\n}, function (props) {\n  return props.theme.geocoderInputHeight;\n}, function (props) {\n  return props.theme.textColorHl;\n});\n\n/** @type {import('./geocoder').GeocoderComponent} */\nvar GeoCoder = function GeoCoder(_ref) {\n  var mapboxApiAccessToken = _ref.mapboxApiAccessToken,\n    _ref$className = _ref.className,\n    className = _ref$className === void 0 ? '' : _ref$className,\n    _ref$limit = _ref.limit,\n    limit = _ref$limit === void 0 ? 5 : _ref$limit,\n    _ref$timeout = _ref.timeout,\n    timeout = _ref$timeout === void 0 ? 300 : _ref$timeout,\n    _ref$formatItem = _ref.formatItem,\n    formatItem = _ref$formatItem === void 0 ? function (item) {\n      return item.place_name;\n    } : _ref$formatItem,\n    viewport = _ref.viewport,\n    onSelected = _ref.onSelected,\n    onDeleteMarker = _ref.onDeleteMarker,\n    transitionDuration = _ref.transitionDuration,\n    pointZoom = _ref.pointZoom,\n    width = _ref.width,\n    intl = _ref.intl;\n  var _useState = (0, _react.useState)(''),\n    _useState2 = (0, _slicedToArray2[\"default\"])(_useState, 2),\n    inputValue = _useState2[0],\n    setInputValue = _useState2[1];\n  var _useState3 = (0, _react.useState)(false),\n    _useState4 = (0, _slicedToArray2[\"default\"])(_useState3, 2),\n    showResults = _useState4[0],\n    setShowResults = _useState4[1];\n  var _useState5 = (0, _react.useState)(false),\n    _useState6 = (0, _slicedToArray2[\"default\"])(_useState5, 2),\n    showDelete = _useState6[0],\n    setShowDelete = _useState6[1];\n  /** @type {import('./geocoder').Results} */\n\n  var initialResults = [];\n  var _useState7 = (0, _react.useState)(initialResults),\n    _useState8 = (0, _slicedToArray2[\"default\"])(_useState7, 2),\n    results = _useState8[0],\n    setResults = _useState8[1];\n  var _useState9 = (0, _react.useState)(0),\n    _useState10 = (0, _slicedToArray2[\"default\"])(_useState9, 2),\n    selectedIndex = _useState10[0],\n    setSelectedIndex = _useState10[1];\n  var client = (0, _react.useMemo)(function () {\n    return new _mapbox[\"default\"](mapboxApiAccessToken);\n  }, [mapboxApiAccessToken]);\n  var onChange = (0, _react.useCallback)(function (event) {\n    var queryString = event.target.value;\n    setInputValue(queryString);\n    var resultCoordinates = testForCoordinates(queryString);\n    if (resultCoordinates[0]) {\n      var _resultCoordinates = (0, _slicedToArray2[\"default\"])(resultCoordinates, 3),\n        _ = _resultCoordinates[0],\n        latitude = _resultCoordinates[1],\n        longitude = _resultCoordinates[2];\n      setResults([{\n        center: [latitude, longitude],\n        place_name: queryString\n      }]);\n    } else {\n      if (debounceTimeout) {\n        clearTimeout(debounceTimeout);\n      }\n      debounceTimeout = setTimeout( /*#__PURE__*/(0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee() {\n        var response;\n        return _regenerator[\"default\"].wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!(limit > 0 && Boolean(queryString))) {\n                  _context.next = 11;\n                  break;\n                }\n                _context.prev = 1;\n                _context.next = 4;\n                return client.geocodeForward(queryString, {\n                  limit: limit\n                });\n              case 4:\n                response = _context.sent;\n                if (response.entity.features) {\n                  setShowResults(true);\n                  setResults(response.entity.features);\n                }\n                _context.next = 11;\n                break;\n              case 8:\n                _context.prev = 8;\n                _context.t0 = _context[\"catch\"](1);\n                // TODO: show geocode error\n                // eslint-disable-next-line no-console\n                console.log(_context.t0);\n              case 11:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[1, 8]]);\n      })), timeout);\n    }\n  }, [client, limit, timeout, setResults, setShowResults]);\n  var onBlur = (0, _react.useCallback)(function () {\n    setTimeout(function () {\n      setShowResults(false);\n    }, timeout);\n  }, [setShowResults, timeout]);\n  var onFocus = (0, _react.useCallback)(function () {\n    return setShowResults(true);\n  }, [setShowResults]);\n  var onItemSelected = (0, _react.useCallback)(function (item) {\n    var newViewport = new _viewportMercatorProject.WebMercatorViewport(viewport);\n    var bbox = item.bbox,\n      center = item.center;\n    var gotoViewport = bbox ? newViewport.fitBounds([[bbox[0], bbox[1]], [bbox[2], bbox[3]]]) : {\n      longitude: center[0],\n      latitude: center[1],\n      zoom: pointZoom\n    };\n    var longitude = gotoViewport.longitude,\n      latitude = gotoViewport.latitude,\n      zoom = gotoViewport.zoom;\n    onSelected(_objectSpread(_objectSpread({}, viewport), {\n      longitude: longitude,\n      latitude: latitude,\n      zoom: zoom,\n      transitionDuration: transitionDuration\n    }), item);\n    setShowResults(false);\n    setInputValue(formatItem(item));\n    setShowDelete(true);\n  }, [viewport, onSelected, transitionDuration, pointZoom, formatItem]);\n  var onMarkDeleted = (0, _react.useCallback)(function () {\n    setShowDelete(false);\n    setInputValue('');\n    onDeleteMarker === null || onDeleteMarker === void 0 ? void 0 : onDeleteMarker();\n  }, [onDeleteMarker]);\n  var onKeyDown = (0, _react.useCallback)(function (e) {\n    if (!results || results.length === 0) {\n      return;\n    }\n    switch (e.keyCode) {\n      case _constants.KeyEvent.DOM_VK_UP:\n        setSelectedIndex(selectedIndex > 0 ? selectedIndex - 1 : selectedIndex);\n        break;\n      case _constants.KeyEvent.DOM_VK_DOWN:\n        setSelectedIndex(selectedIndex < results.length - 1 ? selectedIndex + 1 : selectedIndex);\n        break;\n      case _constants.KeyEvent.DOM_VK_ENTER:\n      case _constants.KeyEvent.DOM_VK_RETURN:\n        if (results[selectedIndex]) {\n          onItemSelected(results[selectedIndex]);\n        }\n        break;\n      default:\n        break;\n    }\n  }, [results, selectedIndex, setSelectedIndex, onItemSelected]);\n  return /*#__PURE__*/_react[\"default\"].createElement(StyledContainer, {\n    className: className,\n    width: width\n  }, /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    className: \"geocoder-input\"\n  }, /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    className: \"geocoder-input__search\"\n  }, /*#__PURE__*/_react[\"default\"].createElement(_icons.Search, {\n    height: \"20px\"\n  })), /*#__PURE__*/_react[\"default\"].createElement(_styledComponents2.Input, {\n    type: \"text\",\n    onChange: onChange,\n    onBlur: onBlur,\n    onFocus: onFocus,\n    onKeyDown: onKeyDown,\n    value: inputValue,\n    placeholder: intl ? intl.formatMessage({\n      id: 'geocoder.title',\n      defaultMessage: PLACEHOLDER\n    }) : PLACEHOLDER\n  }), showDelete ? /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    className: \"remove-result\"\n  }, /*#__PURE__*/_react[\"default\"].createElement(_icons.Delete, {\n    height: \"12px\",\n    onClick: onMarkDeleted\n  })) : null), showResults ? /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    className: \"geocoder-results\"\n  }, results.map(function (item, index) {\n    return /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n      key: index,\n      className: (0, _classnames[\"default\"])('geocoder-item', {\n        active: selectedIndex === index\n      }),\n      onClick: function onClick() {\n        return onItemSelected(item);\n      }\n    }, formatItem(item));\n  })) : null);\n};\nvar _default = (0, _reactIntl.injectIntl)(GeoCoder);\nexports[\"default\"] = _default;","map":{"version":3,"names":["value","exports","testForCoordinates","_regenerator","_interopRequireDefault","require","_defineProperty2","_asyncToGenerator2","_slicedToArray2","_classnames","_mapbox","_reactIntl","_viewportMercatorProject","_styledComponents2","_templateObject","COORDINATE_REGEX_STRING","COORDINATE_REGEX","RegExp","PLACEHOLDER","debounceTimeout","query","isValid","test","trim","tokens","split","Number","StyledContainer","_styledComponents","div","_taggedTemplateLiteral2","props","theme","textColor","boxShadow","geocoderInputHeight","subtextColor","panelBackground","isFinite","width","geocoderWidth","dropdownWapperMargin","dropdownListItem","textTruncate","dropdownListHighlightBg","textColorHl","GeoCoder","_ref","mapboxApiAccessToken","_ref$className","className","limit","_ref$limit","_ref$timeout","timeout","_ref$formatItem","formatItem","item","place_name","viewport","onSelected","onDeleteMarker","_useState","_react","useState","_useState2","inputValue","_useState3","_useState4","showResults","_useState5","_useState6","showDelete","setShowDelete","initialResults","_useState7","_useState8","results","_useState9","_useState10","selectedIndex","setSelectedIndex","client","useMemo","onChange","useCallback","event","queryString","target","setInputValue","resultCoordinates","_resultCoordinates","_","latitude","longitude","setResults","center","clearTimeout","setTimeout","mark","_callee","response","wrap","_callee$","_context","Boolean","prev","next","geocodeForward","sent","entity","features","setShowResults","t0","console","log","stop","onBlur","onFocus","onItemSelected","newViewport","WebMercatorViewport","bbox","gotoViewport","fitBounds","zoom","pointZoom","_objectSpread","transitionDuration","onMarkDeleted","onKeyDown","e","keyCode","_constants","KeyEvent","DOM_VK_UP","DOM_VK_DOWN","length","DOM_VK_ENTER","DOM_VK_RETURN","createElement","_icons","Search","height","Input","type","placeholder","intl","formatMessage","id","defaultMessage"],"sources":["/Users/rohinphukan/Desktop/RefugeeWebsite/node_modules/@kepler.gl/components/src/geocoder/geocoder.tsx"],"sourcesContent":["// Copyright (c) 2022 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\nimport React, {useCallback, useMemo, useState} from 'react';\nimport styled from 'styled-components';\nimport classnames from 'classnames';\nimport MapboxClient from 'mapbox';\nimport {injectIntl, IntlShape} from 'react-intl';\nimport {WebMercatorViewport} from 'viewport-mercator-project';\nimport {KeyEvent} from '@kepler.gl/constants';\nimport {Input} from '../common/styled-components';\nimport {Search, Delete} from '../common/icons';\nimport {Viewport} from '@kepler.gl/types';\n\ntype StyledContainerProps = {\n  width?: number;\n};\n\n// matches only valid coordinates\nconst COORDINATE_REGEX_STRING =\n  '^[-+]?([1-8]?\\\\d(\\\\.\\\\d+)?|90(\\\\.0+)?),\\\\s*[-+]?(180(\\\\.0+)?|((1[0-7]\\\\d)|([1-9]?\\\\d))(\\\\.\\\\d+)?)';\nconst COORDINATE_REGEX = RegExp(COORDINATE_REGEX_STRING);\n\nconst PLACEHOLDER = 'Enter an address or coordinates, ex 37.79,-122.40';\n\nlet debounceTimeout: NodeJS.Timeout | null = null;\n\nexport const testForCoordinates = (query: string): [true, number, number] | [false, string] => {\n  const isValid = COORDINATE_REGEX.test(query.trim());\n\n  if (!isValid) {\n    return [isValid, query];\n  }\n\n  const tokens = query.trim().split(',');\n\n  return [isValid, Number(tokens[0]), Number(tokens[1])];\n};\n\nconst StyledContainer = styled.div<StyledContainerProps>`\n  position: relative;\n  color: ${props => props.theme.textColor};\n\n  .geocoder-input {\n    box-shadow: ${props => props.theme.boxShadow};\n\n    .geocoder-input__search {\n      position: absolute;\n      height: ${props => props.theme.geocoderInputHeight}px;\n      width: 30px;\n      padding-left: 6px;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      color: ${props => props.theme.subtextColor};\n    }\n\n    input {\n      padding: 4px 36px;\n      height: ${props => props.theme.geocoderInputHeight}px;\n      caret-color: unset;\n    }\n  }\n\n  .geocoder-results {\n    box-shadow: ${props => props.theme.boxShadow};\n    background-color: ${props => props.theme.panelBackground};\n    position: absolute;\n    width: ${props => (Number.isFinite(props.width) ? props.width : props.theme.geocoderWidth)}px;\n    margin-top: ${props => props.theme.dropdownWapperMargin}px;\n  }\n\n  .geocoder-item {\n    ${props => props.theme.dropdownListItem};\n    ${props => props.theme.textTruncate};\n\n    &.active {\n      background-color: ${props => props.theme.dropdownListHighlightBg};\n    }\n  }\n\n  .remove-result {\n    position: absolute;\n    right: 16px;\n    top: 0px;\n    height: ${props => props.theme.geocoderInputHeight}px;\n    display: flex;\n    align-items: center;\n\n    :hover {\n      cursor: pointer;\n      color: ${props => props.theme.textColorHl};\n    }\n  }\n`;\n\nexport interface Result {\n  center: [number, number];\n  place_name: string;\n  bbox?: [number, number, number, number];\n  text?: string;\n}\n\nexport type Results = ReadonlyArray<Result>;\n\ntype GeocoderProps = {\n  mapboxApiAccessToken: string;\n  className?: string;\n  limit?: number;\n  timeout?: number;\n  formatItem?: (item: Result) => string;\n  viewport?: Viewport;\n  onSelected: (viewport: Viewport | null, item: Result) => void;\n  onDeleteMarker?: () => void;\n  transitionDuration?: number;\n  pointZoom?: number;\n  width?: number;\n};\n\ntype IntlProps = {\n  intl: IntlShape;\n};\n\n/** @type {import('./geocoder').GeocoderComponent} */\nconst GeoCoder: React.FC<GeocoderProps & IntlProps> = ({\n  mapboxApiAccessToken,\n  className = '',\n  limit = 5,\n  timeout = 300,\n  formatItem = item => item.place_name,\n  viewport,\n  onSelected,\n  onDeleteMarker,\n  transitionDuration,\n  pointZoom,\n  width,\n  intl\n}) => {\n  const [inputValue, setInputValue] = useState('');\n  const [showResults, setShowResults] = useState(false);\n  const [showDelete, setShowDelete] = useState(false);\n  /** @type {import('./geocoder').Results} */\n  const initialResults: Result[] = [];\n  const [results, setResults] = useState(initialResults);\n  const [selectedIndex, setSelectedIndex] = useState(0);\n\n  const client = useMemo(() => new MapboxClient(mapboxApiAccessToken), [mapboxApiAccessToken]);\n\n  const onChange = useCallback(\n    event => {\n      const queryString = event.target.value;\n      setInputValue(queryString);\n      const resultCoordinates = testForCoordinates(queryString);\n      if (resultCoordinates[0]) {\n        const [_, latitude, longitude] = resultCoordinates;\n        setResults([{center: [latitude, longitude], place_name: queryString}]);\n      } else {\n        if (debounceTimeout) {\n          clearTimeout(debounceTimeout);\n        }\n        debounceTimeout = setTimeout(async () => {\n          if (limit > 0 && Boolean(queryString)) {\n            try {\n              const response = await client.geocodeForward(queryString, {limit});\n              if (response.entity.features) {\n                setShowResults(true);\n                setResults(response.entity.features);\n              }\n            } catch (e) {\n              // TODO: show geocode error\n              // eslint-disable-next-line no-console\n              console.log(e);\n            }\n          }\n        }, timeout);\n      }\n    },\n    [client, limit, timeout, setResults, setShowResults]\n  );\n\n  const onBlur = useCallback(() => {\n    setTimeout(() => {\n      setShowResults(false);\n    }, timeout);\n  }, [setShowResults, timeout]);\n\n  const onFocus = useCallback(() => setShowResults(true), [setShowResults]);\n\n  const onItemSelected = useCallback(\n    item => {\n      const newViewport = new WebMercatorViewport(viewport);\n      const {bbox, center} = item;\n\n      const gotoViewport = bbox\n        ? newViewport.fitBounds([\n            [bbox[0], bbox[1]],\n            [bbox[2], bbox[3]]\n          ])\n        : {\n            longitude: center[0],\n            latitude: center[1],\n            zoom: pointZoom\n          };\n\n      const {longitude, latitude, zoom} = gotoViewport;\n\n      onSelected({...viewport, ...{longitude, latitude, zoom, transitionDuration}}, item);\n\n      setShowResults(false);\n      setInputValue(formatItem(item));\n      setShowDelete(true);\n    },\n    [viewport, onSelected, transitionDuration, pointZoom, formatItem]\n  );\n\n  const onMarkDeleted = useCallback(() => {\n    setShowDelete(false);\n    setInputValue('');\n    onDeleteMarker?.();\n  }, [onDeleteMarker]);\n\n  const onKeyDown = useCallback(\n    e => {\n      if (!results || results.length === 0) {\n        return;\n      }\n      switch (e.keyCode) {\n        case KeyEvent.DOM_VK_UP:\n          setSelectedIndex(selectedIndex > 0 ? selectedIndex - 1 : selectedIndex);\n          break;\n        case KeyEvent.DOM_VK_DOWN:\n          setSelectedIndex(selectedIndex < results.length - 1 ? selectedIndex + 1 : selectedIndex);\n          break;\n        case KeyEvent.DOM_VK_ENTER:\n        case KeyEvent.DOM_VK_RETURN:\n          if (results[selectedIndex]) {\n            onItemSelected(results[selectedIndex]);\n          }\n          break;\n        default:\n          break;\n      }\n    },\n    [results, selectedIndex, setSelectedIndex, onItemSelected]\n  );\n\n  return (\n    <StyledContainer className={className} width={width}>\n      <div className=\"geocoder-input\">\n        <div className=\"geocoder-input__search\">\n          <Search height=\"20px\" />\n        </div>\n        <Input\n          type=\"text\"\n          onChange={onChange}\n          onBlur={onBlur}\n          onFocus={onFocus}\n          onKeyDown={onKeyDown}\n          value={inputValue}\n          placeholder={\n            intl\n              ? intl.formatMessage({id: 'geocoder.title', defaultMessage: PLACEHOLDER})\n              : PLACEHOLDER\n          }\n        />\n        {showDelete ? (\n          <div className=\"remove-result\">\n            <Delete height=\"12px\" onClick={onMarkDeleted} />\n          </div>\n        ) : null}\n      </div>\n\n      {showResults ? (\n        <div className=\"geocoder-results\">\n          {results.map((item, index) => (\n            <div\n              key={index}\n              className={classnames('geocoder-item', {active: selectedIndex === index})}\n              onClick={() => onItemSelected(item)}\n            >\n              {formatItem(item)}\n            </div>\n          ))}\n        </div>\n      ) : null}\n    </StyledContainer>\n  );\n};\n\nexport default injectIntl(GeoCoder);\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;EAuBAA,KAAA;;AACAC,OAAA,cAAAA,OAAA,CAAAC,kBAAA;AACA,IAAAC,YAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,gBAAA,GAAAF,sBAAA,CAAAC,OAAA;AACA,IAAAE,kBAAA,GAAAH,sBAAA,CAAAC,OAAA;AACA,IAAAG,eAAA,GAAAJ,sBAAA,CAAAC,OAAA;;;;AAOA,IAAAI,WAAA,GAAAL,sBAAA,CAAAC,OAAA;AAGA,IAAMK,OAAA,GAAAN,sBAA0B,CAAAC,OAAA,SAAD,CAA/B;AAIA,IAAIM,UAAA,GAAAN,OAAyC,aAA7C;AAEO,IAAMO,wBAAqB,GAAAP,OAArB,4BAAkF;;AAI3F,IAAAQ,kBAAiB,GAAAR,OAAjB;;AAKF,IAAAS,eAAiB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAKH;AAAA,IAGEC,uBAAK;AAAA,IAAAC,gBAAI,GAAYC,MAAA,CAAhBF,uBAAA;AAAA,IAIPG,WAAA,GAAK;AAAA,IAAAC,eAAU,GAAM;AAMjB,IAAAjB,kBAAgB,YAAhBA,mBAAAkB,KAAA;EAfC,IAoBLC,OAAA,GAAAL,gBAAK,CAAAM,IAAA,CAAAF,KAAA,CAAAG,IAAA;EApBA,IA0BH,CAAAF,OAAA;IAAK,OAAI,CAAAA,OAAM,EAAMD,KAAA;EA1BlB;EAAA,IA6BRI,MAAA,GAAAJ,KAAK,CAAAG,IAAA,GAAAE,KAAA;EAAA,OAAK,CAAAJ,OAAO,EAAAK,MAAS,CAAAF,MAAM,IAAtB,EAAAE,MAA+B,CAAKF,MAApC,GAA6C;AAAlD,CA7BG;AA8BEvB,OAIjB,CAAAC,kBAAK,GAAAA,kBAAA;AAAA,IACLyB,eAAK,GAAAC,iBAAA,YAAAC,GAAA,CAAAf,eAAA,KAAAA,eAAA,OAAAgB,uBAAA,u6BAAAC,KAAA;EAAA,OAAIA,KAAK,CAACC,KAAN,CAAYC,SAAA;AAAhB,CAnCU,EAsCK,UAAAF,KAAK;EAAA,OAAIA,KAAK,CAACC,KAAN,CAAYE,SAAA;AAAhB,CAtCV,EA8CP,UAAAH,KAAK;EAAA,OAAIA,KAAK,CAACC,KAAN,CAAYG,mBAAhB;AAAA,CA9CE,EAoDN,UAAAJ,KAAK;EAAA,OAAIA,KAAK,CAACC,KAAN,CAAYI,YAAhB;AAAA,CApDC,EAArB,UAAAL,KAAA;;AAoFA,aAAAA,KAAA;EACA,OAAMA,KAA6C,CAAGC,KAAA,CAAAE,SAAhD;AAaA,aAZJH,KAAA;EAYI,OAAAA,KAAA,CAAAC,KAAA,CAAAK,eAXJ;AAWI,aAXJN,KAWI;EAAA,OAAAL,MAAA,CAAAY,QAVJ,CAAAP,KAUI,CAAAQ,KAAA,IAAAR,KAAA,CAAAQ,KAAA,GAAAR,KAAA,CAAAC,KAAA,CAAAQ,aAAA;AAAA,aAAAT,KAAA;EAAA,OAAAA,KAAA,CAAAC,KAAA,CAAAS,oBAAA;AAAA,aAAAV,KAAA;EAAA,OAAAA,KAAA,CAAAC,KAAA,CAAAU,gBARJ;AAQI,aARJX,KAQI;EARa,OAAAA,KAAI,CAAIC,KAAC,CAAAW,YAAT;AAAA,GAQb,UAAAZ,KAAA;EAAA,OAPJA,KAOI,CAAAC,KAAA,CAAAY,uBAAA;AAAA,aANJb,KAMI;EAAA,OALJA,KAAA,CAAAC,KAKI,CAAAG,mBALJ;AAKI,aAJJJ,KAAA;EAII,OAHJA,KAAA,CAGIC,KAAA,CAAAa,WAAA;AAAA;;;AAAA,IAAAC,QAAA,YACgCA,SAAAC,IAAA,EAAS;EADzC,IAAAC,oBAAA,GAAAD,IAAA,CAAAC,oBAAA;IACGC,cADH,GAAAF,IAAA,CAAAG,SAAA;IACeA,SAAA,GAAAD,cADf,mBAAAA,cAAA;;IAAAE,KAAA,GAAAC,UAEkC,kBAASA,UAF3C;IAAAC,YAAA,GAAAN,IAAA,CAAAO,OAAA;IAEGA,OAAA,GAAAD,YAFH,oBAAAA,YAAA;IAEgBE,eAFhB,GAAAR,IAAA,CAAAS,UAAA;;MAAA,OAAAC,IAAA,CAAAC,UAGgC;IAHhC,IAAAH,eAAA;IAGGI,QAAA,GAHHZ,IAAA,CAAAY,QAAA;IAGeC,UAAA,GAHfb,IAAA,CAAAa,UAAA;IAIJC,cAAA,GAAAd,IAAA,CAAAc,cAAA;;;IACMtB,KAAA,GAAAQ,IAAA,CAAAR,KAA2B;;EAL7B,IAAAuB,SAAA,OAAAC,MAAA,CAAAC,QAAA;IAMGC,UANH,OAAAzD,eAAA,aAAAsD,SAAA;IAMYI,UANZ,GAAAD,UAAA;;EAAA,IAAAE,UAAA,OAAAJ,MAAA,CAAAC,QAAA;IAOGI,UAAA,GAPH,IAAA5D,eAAA,aAAA2D,UAAA;IAOkBE,WAAA,GAAAD,UAPlB;;EASmB,IAAAE,UAAU,OAAAP,MAAA,CAAAC,QAAa;IAAwBO,UAAA,OAAA/D,eAAtE,aAAA8D,UAAA;IAEME,UAAQ,GAAGD,UAAA;IAEbE,aAAiB,GAAGF,UAAM,EAAN,CAAa;EACjC;;EAEA,IAAAG,cAAI,KAAiB;EAAK,IAAAC,UAAA,OAAAZ,MAAA,CAAAC,QAAA,EAAAU,cAAA;IAAAE,UACd,GADc,IAAApE,eAAA,aAAAmE,UAAA;IAAAE,OACJ,GAAAD,UADI;;EAEX,IAAAE,UAAQ,GAAC,IAAAf,MAAU,CAAAC,QAApB;IAAgCe,WAAA,GAAY,IAAAvE,eAAA,aAAAsE,UAAA;IAA5CE,aAAZ,GAAAD,WAAA;IAFFE,gBAGO,GAAAF,WAAA;EAEH,IAAAG,MAAA,OAAAnB,MAAa,CAAAoB,OAAA,cAAb;IACD,WAAAzE,OAAA,YAAAsC,oBAAA;;EACD,IAAAoC,QAAA,OAAerB,MAAG,CAAAsB,WAAU,YAAAC,KAAA;IAAC,IAAAC,WAAA,GAAAD,KAAA,CAAAE,MAAA,CAAAxF,KAAA;IAAAyF,aAAA,CAAAF,WAAA;IAAA,IAAAG,iBAAA,GAAAxF,kBAAA,CAAAqF,WAAA;IAAA,IAAAG,iBAAA;MAAA,IAAAC,kBAClB,GAAL,IAAanF,eAAQ,UADE,GAAAkF,iBAAA;QAAAE,CAAA,GAAAD,kBAAA;QAAAE,QAAA,GAAAF,kBAAA;QAAAG,SAAA,GAAAH,kBAAA;MAAAI,UAAA;QAAAC,MAAA,GAAAH,QAAA,EAAAC,SAAA;QAAApC,UAAA,EAAA6B;MAGoC;IAAD;;QAHnCU,YAAA,CAAA9E,eAAA;MAGjB;MACNA,eAAI,GAAA+E,UAAS,EAAO,aAAU,IAAA3F,kBAAA,2BAAAJ,YAAA,YAAAgG,IAAA,UAAAC,QAAA;QAC5B,IAAAC,QAAA;QACA,OAAAlG,YAAA,CAAU,SAAS,CAAC,CAAAmG,IAAA,CAAT,SAADC,QAAVA,CAAAC,QAAA;UACD;;cAPsB;gBAAA,MAAArD,KAAA,QAAAsD,OAAA,CAAAlB,WAAA;;kBAAA;gBAAA;gBASvBiB,QAAA,CAAAE,IAAA;gBACAF,QAAA,CAAAG,IAAA;gBACA,OAAOzB,MAAP,CAAA0B,cAAA,CAAArB,WAAA;;gBAXuB;cAAA;gBAAAc,QAAA,GAAAG,QAAA,CAAAK,IAAA;gBAAA,IAAAR,QAAA,CAAAS,MAAA,CAAAC,QAAA;kBAADC,cAA5B;kBAeDjB,UAAA,CAAAM,QAAA,CAAAS,MAAA,CAAAC,QAAA;gBAEM;gBAIEP,QAAA,CAAAG,IAAM;gBACf;cAEA,MAAD;gBAEaH,QAAA,CAAAE,IAAA;gBAAkBF,QAAA,CAAcS,EAAC,GAADT,QAApB;gBAA6B;gBAEnD;gBAEIU,OAAc,CAAAC,GAAI,CAAAX,QAAA,CAAAS,EAAA;cADlB,KAEiB,EAFjB;cAIA,UAAe;gBAMN,OAAQT,QADnB,CAAAY,IAAA;YAAA;UAGM;QARV,GAAAhB,OAAA;MAJM,EAeC,GAAA9C,OAfD;IAAA;EAAA,IAAA4B,MAAA,EAAA/B,KAe8B,EAAAG,OAAR,EAAAyC,UAftB,EAAAiB,cAAA;EAiBN,IAAAK,MAAA,GAAU,IAAAtD,MAAA,CAAAsB,WAAA,cAAK;IAAca,UAAA,CAAS,YAAV;MAAYc,cAAA,MAAZ;IAAsB,GAAA1D,OAAA;EAAM,IAAA0D,cAAA,EAAA1D,OAAA;EAA5B,IAAlBgE,OAAV,OAAAvD,MAAA,CAAAsB,WAAA;IAEA,OAAA2B,cAAA;EACA,IAAAA,cAAc;EACd,IAAAO,cAAc,GAAd,IAAAxD,MAAA,CAAAsB,WAAA,YAAA5B,IAAA;IAtBmB,IAwBpB+D,WAAU,OAAX5G,wBAA2C,CAAA6G,mBAxBtB,CAAvB9D,QAAA;IA2BA,IAAM+D,IAAA,GAAAjE,IAAa,CAAAiE,IAAG;MACpB1B,MAAA,GAAavC,IAAC,CAAAuC,MAAd;IACA,IAAA2B,YAAa,GAAbD,IAAA,GAAAF,WAAA,CAAAI,SAAA,GAAAF,IAAA,KAAAA,IAAA,OAAAA,IAAA,KAAAA,IAAA;MACA5B,SAAA,EAAAE,MAAc;MACZH,QAAA,EAAAG,MAJJ;MAMM6B,IAAA,EAAAC;IAEF;IACE,IAAAhC,SAAA,GAAA6B,YAAA,CAAA7B,SAAA;MACDD,QAAA,GAAA8B,YAAA,CAAA9B,QAAA;;IACDjC,UAAU,CAAAmE,aAAV,CAAAA,aAAA,KAAApE,QAAA;MACEmC,SAAK,EAAAA,SAAA;MACHD,QAAA,EAAAA,QAAgB;MAChBgC,IAAA,EAAAA,IAAA;;IACF,IAAApE,IAAK;IACHuD,cAAA,MAAgB,CAAC;IACjBvB,aAAA,CAAAjC,UAAA,CAAAC,IAAA;;EACF,IAAAE,QAAK,EAAAC,UAAA,EAAAoE,kBAAL,EAAAF,SAAA,EAAAtE,UAAA;EACA,IAAAyE,aAAK,OAAAlE,MAAS,CAAAsB,WAAd;IACEZ,aAAI,MAAQ;IACVgB,aAAA;IACD5B,cAAA,aAAAA,cAAA,uBAAAA,cAAA;;EACD,IAAAqE,SAAA,OAAAnE,MAAA,CAAAsB,WAAA,YAAA8C,CAAA;;MACF;IACE;IAnBU,QAsBfA,CAAD,CAAAC,OAAU;MAGZ,KAAAC,UAAA,CACEC,QAAA,CAAAC,SAAA;QAAiBtD,gBAAjB,CAAAD,aAAA,OAAAA,aAAA,OAAAA,aAAA;QAAuC;MAChC,KAAAqD,UAAU,CAAAC,QAAA,CAAAE,WAAA;QAAfvD,gBACE,CAAAD,aAAA,GAAAH,OAAA,CAAA4D,MAAA,OAAAzD,aAAA,OAAAA,aAAA;QAAK;MACK,KAAMqD,UAAC,CAAAC,QAAA,CAAAI,YAAA;MAFnB,KAAAL,UAIE,CAAAC,QAAA,CAAAK,aAAA;QACM,IAAC9D,OADP,CAAAG,aAAA;UAEEuC,cAFF,CAAA1C,OAAA,CAAAG,aAAA;QAGE;QAEA;MAEA;QAE4B;IAAE;EAAL,GAAnB,CADAH,OAEA,EAAAG,aAAA,EAAAC,gBAAA,EAAAsC,cAAA;EAVR,OAaC,aAAUxD,MAAA,UACT,EAAA6E,aAAA,CAAAjH,eAAA;IAAKuB,SAAS,EAACA,SAAA;IAAfX,KAAA,EAAAA;EACU,gBAARwB,MAAA,YAAA6E,aAAA;IAAsB1F,SAAS;EAA/B,GAFO,aAOZa,MAAA,UAAW,EAAA6E,aACV;IAAK1F,SAAS,EAAC;EAAf,GACG,aAAYa,MAAA,UAAO,EAAA6E,aAAP,CAAAC,MAAA,CAAAC,MAAA;IAAAC,MAAA;EAET,kBADFhF,MAAA,YAAA6E,aAAA,CAAA/H,kBAAA,CAAAmI,KAAA;IAEEC,IAAA,QAAS;IAA+B7D,QAAA,EAAMA,QAAE;IAATiC,MAFzC,EAAAA,MAAA;IAGEC,OAAA,EAAOA,OAAE;IAAAY,SAAA,EAAMA,SAAA;IAANlI,KAAA,EAAAkE,UAAA;IAHXgF,WAKG,EAAUC,IAAC,GANHA,IAAA,CAAAC,aAAA;MAFLC,EAYR,kBAtCR;MA1HFC,cAAA,EAAApI;;gBAqKe,gBAAA6C,MAAA,UAAW,EAAX6E,a"},"metadata":{},"sourceType":"script","externalDependencies":[]}