{"ast":null,"code":"/*\n * Copyright 2012-2016 the original author or authors\n * @license MIT, see LICENSE.txt for details\n *\n * @author Scott Andrews\n */\n\n'use strict';\n\nvar normalizeHeaderName, responsePromise, client, headerSplitRE;\nnormalizeHeaderName = require('../util/normalizeHeaderName');\nresponsePromise = require('../util/responsePromise');\nclient = require('../client');\n\n// according to the spec, the line break is '\\r\\n', but doesn't hold true in practice\nheaderSplitRE = /[\\r|\\n]+/;\nfunction parseHeaders(raw) {\n  // Note: Set-Cookie will be removed by the browser\n  var headers = {};\n  if (!raw) {\n    return headers;\n  }\n  raw.trim().split(headerSplitRE).forEach(function (header) {\n    var boundary, name, value;\n    boundary = header.indexOf(':');\n    name = normalizeHeaderName(header.substring(0, boundary).trim());\n    value = header.substring(boundary + 1).trim();\n    if (headers[name]) {\n      if (Array.isArray(headers[name])) {\n        // add to an existing array\n        headers[name].push(value);\n      } else {\n        // convert single value to array\n        headers[name] = [headers[name], value];\n      }\n    } else {\n      // new, single value\n      headers[name] = value;\n    }\n  });\n  return headers;\n}\nfunction safeMixin(target, source) {\n  Object.keys(source || {}).forEach(function (prop) {\n    // make sure the property already exists as\n    // IE 6 will blow up if we add a new prop\n    if (source.hasOwnProperty(prop) && prop in target) {\n      try {\n        target[prop] = source[prop];\n      } catch (e) {\n        // ignore, expected for some properties at some points in the request lifecycle\n      }\n    }\n  });\n  return target;\n}\nmodule.exports = client(function xhr(request) {\n  return responsePromise.promise(function (resolve, reject) {\n    /*jshint maxcomplexity:20 */\n\n    var client, method, url, headers, entity, headerName, response, XHR;\n    request = typeof request === 'string' ? {\n      path: request\n    } : request || {};\n    response = {\n      request: request\n    };\n    if (request.canceled) {\n      response.error = 'precanceled';\n      reject(response);\n      return;\n    }\n    XHR = request.engine || XMLHttpRequest;\n    if (!XHR) {\n      reject({\n        request: request,\n        error: 'xhr-not-available'\n      });\n      return;\n    }\n    entity = request.entity;\n    request.method = request.method || (entity ? 'POST' : 'GET');\n    method = request.method;\n    url = response.url = request.path || '';\n    try {\n      client = response.raw = new XHR();\n\n      // mixin extra request properties before and after opening the request as some properties require being set at different phases of the request\n      safeMixin(client, request.mixin);\n      client.open(method, url, true);\n      safeMixin(client, request.mixin);\n      headers = request.headers;\n      for (headerName in headers) {\n        /*jshint forin:false */\n        if (headerName === 'Content-Type' && headers[headerName] === 'multipart/form-data') {\n          // XMLHttpRequest generates its own Content-Type header with the\n          // appropriate multipart boundary when sending multipart/form-data.\n          continue;\n        }\n        client.setRequestHeader(headerName, headers[headerName]);\n      }\n      request.canceled = false;\n      request.cancel = function cancel() {\n        request.canceled = true;\n        client.abort();\n        reject(response);\n      };\n      client.onreadystatechange = function /* e */\n      () {\n        if (request.canceled) {\n          return;\n        }\n        if (client.readyState === (XHR.DONE || 4)) {\n          response.status = {\n            code: client.status,\n            text: client.statusText\n          };\n          response.headers = parseHeaders(client.getAllResponseHeaders());\n          response.entity = client.responseText;\n\n          // #125 -- Sometimes IE8-9 uses 1223 instead of 204\n          // http://stackoverflow.com/questions/10046972/msie-returns-status-code-of-1223-for-ajax-request\n          if (response.status.code === 1223) {\n            response.status.code = 204;\n          }\n          if (response.status.code > 0) {\n            // check status code as readystatechange fires before error event\n            resolve(response);\n          } else {\n            // give the error callback a chance to fire before resolving\n            // requests for file:// URLs do not have a status code\n            setTimeout(function () {\n              resolve(response);\n            }, 0);\n          }\n        }\n      };\n      try {\n        client.onerror = function /* e */\n        () {\n          response.error = 'loaderror';\n          reject(response);\n        };\n      } catch (e) {\n        // IE 6 will not support error handling\n      }\n      client.send(entity);\n    } catch (e) {\n      response.error = 'loaderror';\n      reject(response);\n    }\n  });\n});","map":{"version":3,"names":["normalizeHeaderName","responsePromise","client","headerSplitRE","require","parseHeaders","raw","headers","trim","split","forEach","header","boundary","name","value","indexOf","substring","Array","isArray","push","safeMixin","target","source","Object","keys","prop","hasOwnProperty","e","module","exports","xhr","request","promise","resolve","reject","method","url","entity","headerName","response","XHR","path","canceled","error","engine","XMLHttpRequest","mixin","open","setRequestHeader","cancel","abort","onreadystatechange","readyState","DONE","status","code","text","statusText","getAllResponseHeaders","responseText","setTimeout","onerror","send"],"sources":["/Users/rohinphukan/Desktop/RefugeeWebsite/node_modules/rest/client/xhr.js"],"sourcesContent":["/*\n * Copyright 2012-2016 the original author or authors\n * @license MIT, see LICENSE.txt for details\n *\n * @author Scott Andrews\n */\n\n'use strict';\n\nvar normalizeHeaderName, responsePromise, client, headerSplitRE;\n\nnormalizeHeaderName = require('../util/normalizeHeaderName');\nresponsePromise = require('../util/responsePromise');\nclient = require('../client');\n\n// according to the spec, the line break is '\\r\\n', but doesn't hold true in practice\nheaderSplitRE = /[\\r|\\n]+/;\n\nfunction parseHeaders(raw) {\n\t// Note: Set-Cookie will be removed by the browser\n\tvar headers = {};\n\n\tif (!raw) { return headers; }\n\n\traw.trim().split(headerSplitRE).forEach(function (header) {\n\t\tvar boundary, name, value;\n\t\tboundary = header.indexOf(':');\n\t\tname = normalizeHeaderName(header.substring(0, boundary).trim());\n\t\tvalue = header.substring(boundary + 1).trim();\n\t\tif (headers[name]) {\n\t\t\tif (Array.isArray(headers[name])) {\n\t\t\t\t// add to an existing array\n\t\t\t\theaders[name].push(value);\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// convert single value to array\n\t\t\t\theaders[name] = [headers[name], value];\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\t// new, single value\n\t\t\theaders[name] = value;\n\t\t}\n\t});\n\n\treturn headers;\n}\n\nfunction safeMixin(target, source) {\n\tObject.keys(source || {}).forEach(function (prop) {\n\t\t// make sure the property already exists as\n\t\t// IE 6 will blow up if we add a new prop\n\t\tif (source.hasOwnProperty(prop) && prop in target) {\n\t\t\ttry {\n\t\t\t\ttarget[prop] = source[prop];\n\t\t\t}\n\t\t\tcatch (e) {\n\t\t\t\t// ignore, expected for some properties at some points in the request lifecycle\n\t\t\t}\n\t\t}\n\t});\n\n\treturn target;\n}\n\nmodule.exports = client(function xhr(request) {\n\treturn responsePromise.promise(function (resolve, reject) {\n\t\t/*jshint maxcomplexity:20 */\n\n\t\tvar client, method, url, headers, entity, headerName, response, XHR;\n\n\t\trequest = typeof request === 'string' ? { path: request } : request || {};\n\t\tresponse = { request: request };\n\n\t\tif (request.canceled) {\n\t\t\tresponse.error = 'precanceled';\n\t\t\treject(response);\n\t\t\treturn;\n\t\t}\n\n\t\tXHR = request.engine || XMLHttpRequest;\n\t\tif (!XHR) {\n\t\t\treject({ request: request, error: 'xhr-not-available' });\n\t\t\treturn;\n\t\t}\n\n\t\tentity = request.entity;\n\t\trequest.method = request.method || (entity ? 'POST' : 'GET');\n\t\tmethod = request.method;\n\t\turl = response.url = request.path || '';\n\n\t\ttry {\n\t\t\tclient = response.raw = new XHR();\n\n\t\t\t// mixin extra request properties before and after opening the request as some properties require being set at different phases of the request\n\t\t\tsafeMixin(client, request.mixin);\n\t\t\tclient.open(method, url, true);\n\t\t\tsafeMixin(client, request.mixin);\n\n\t\t\theaders = request.headers;\n\t\t\tfor (headerName in headers) {\n\t\t\t\t/*jshint forin:false */\n\t\t\t\tif (headerName === 'Content-Type' && headers[headerName] === 'multipart/form-data') {\n\t\t\t\t\t// XMLHttpRequest generates its own Content-Type header with the\n\t\t\t\t\t// appropriate multipart boundary when sending multipart/form-data.\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tclient.setRequestHeader(headerName, headers[headerName]);\n\t\t\t}\n\n\t\t\trequest.canceled = false;\n\t\t\trequest.cancel = function cancel() {\n\t\t\t\trequest.canceled = true;\n\t\t\t\tclient.abort();\n\t\t\t\treject(response);\n\t\t\t};\n\n\t\t\tclient.onreadystatechange = function (/* e */) {\n\t\t\t\tif (request.canceled) { return; }\n\t\t\t\tif (client.readyState === (XHR.DONE || 4)) {\n\t\t\t\t\tresponse.status = {\n\t\t\t\t\t\tcode: client.status,\n\t\t\t\t\t\ttext: client.statusText\n\t\t\t\t\t};\n\t\t\t\t\tresponse.headers = parseHeaders(client.getAllResponseHeaders());\n\t\t\t\t\tresponse.entity = client.responseText;\n\n\t\t\t\t\t// #125 -- Sometimes IE8-9 uses 1223 instead of 204\n\t\t\t\t\t// http://stackoverflow.com/questions/10046972/msie-returns-status-code-of-1223-for-ajax-request\n\t\t\t\t\tif (response.status.code === 1223) {\n\t\t\t\t\t\tresponse.status.code = 204;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (response.status.code > 0) {\n\t\t\t\t\t\t// check status code as readystatechange fires before error event\n\t\t\t\t\t\tresolve(response);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\t// give the error callback a chance to fire before resolving\n\t\t\t\t\t\t// requests for file:// URLs do not have a status code\n\t\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\t\tresolve(response);\n\t\t\t\t\t\t}, 0);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\n\t\t\ttry {\n\t\t\t\tclient.onerror = function (/* e */) {\n\t\t\t\t\tresponse.error = 'loaderror';\n\t\t\t\t\treject(response);\n\t\t\t\t};\n\t\t\t}\n\t\t\tcatch (e) {\n\t\t\t\t// IE 6 will not support error handling\n\t\t\t}\n\n\t\t\tclient.send(entity);\n\t\t}\n\t\tcatch (e) {\n\t\t\tresponse.error = 'loaderror';\n\t\t\treject(response);\n\t\t}\n\n\t});\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}