{"ast":null,"code":"/*\n * Copyright 2014-2016 the original author or authors\n * @license MIT, see LICENSE.txt for details\n *\n * @author Scott Andrews\n */\n\n'use strict';\n\n/*jshint latedef: nofunc */\nvar normalizeHeaderName = require('./normalizeHeaderName');\nfunction property(promise, name) {\n  return promise.then(function (value) {\n    return value && value[name];\n  }, function (value) {\n    return Promise.reject(value && value[name]);\n  });\n}\n\n/**\n * Obtain the response entity\n *\n * @returns {Promise} for the response entity\n */\nfunction entity() {\n  /*jshint validthis:true */\n  return property(this, 'entity');\n}\n\n/**\n * Obtain the response status\n *\n * @returns {Promise} for the response status\n */\nfunction status() {\n  /*jshint validthis:true */\n  return property(property(this, 'status'), 'code');\n}\n\n/**\n * Obtain the response headers map\n *\n * @returns {Promise} for the response headers map\n */\nfunction headers() {\n  /*jshint validthis:true */\n  return property(this, 'headers');\n}\n\n/**\n * Obtain a specific response header\n *\n * @param {String} headerName the header to retrieve\n * @returns {Promise} for the response header's value\n */\nfunction header(headerName) {\n  /*jshint validthis:true */\n  headerName = normalizeHeaderName(headerName);\n  return property(this.headers(), headerName);\n}\n\n/**\n * Follow a related resource\n *\n * The relationship to follow may be define as a plain string, an object\n * with the rel and params, or an array containing one or more entries\n * with the previous forms.\n *\n * Examples:\n *   response.follow('next')\n *\n *   response.follow({ rel: 'next', params: { pageSize: 100 } })\n *\n *   response.follow([\n *       { rel: 'items', params: { projection: 'noImages' } },\n *       'search',\n *       { rel: 'findByGalleryIsNull', params: { projection: 'noImages' } },\n *       'items'\n *   ])\n *\n * @param {String|Object|Array} rels one, or more, relationships to follow\n * @returns ResponsePromise<Response> related resource\n */\nfunction follow(rels) {\n  /*jshint validthis:true */\n  rels = [].concat(rels);\n  return make(rels.reduce(function (response, rel) {\n    return response.then(function (response) {\n      if (typeof rel === 'string') {\n        rel = {\n          rel: rel\n        };\n      }\n      if (typeof response.entity.clientFor !== 'function') {\n        throw new Error('Hypermedia response expected');\n      }\n      var client = response.entity.clientFor(rel.rel);\n      return client({\n        params: rel.params\n      });\n    });\n  }, this));\n}\n\n/**\n * Wrap a Promise as an ResponsePromise\n *\n * @param {Promise<Response>} promise the promise for an HTTP Response\n * @returns {ResponsePromise<Response>} wrapped promise for Response with additional helper methods\n */\nfunction make(promise) {\n  promise.status = status;\n  promise.headers = headers;\n  promise.header = header;\n  promise.entity = entity;\n  promise.follow = follow;\n  return promise;\n}\nfunction responsePromise(obj, callback, errback) {\n  return make(Promise.resolve(obj).then(callback, errback));\n}\nresponsePromise.make = make;\nresponsePromise.reject = function (val) {\n  return make(Promise.reject(val));\n};\nresponsePromise.promise = function (func) {\n  return make(new Promise(func));\n};\nmodule.exports = responsePromise;","map":{"version":3,"names":["normalizeHeaderName","require","property","promise","name","then","value","Promise","reject","entity","status","headers","header","headerName","follow","rels","concat","make","reduce","response","rel","clientFor","Error","client","params","responsePromise","obj","callback","errback","resolve","val","func","module","exports"],"sources":["/Users/rohinphukan/Desktop/RefugeeWebsite/node_modules/rest/util/responsePromise.js"],"sourcesContent":["/*\n * Copyright 2014-2016 the original author or authors\n * @license MIT, see LICENSE.txt for details\n *\n * @author Scott Andrews\n */\n\n'use strict';\n\n/*jshint latedef: nofunc */\n\nvar normalizeHeaderName = require('./normalizeHeaderName');\n\nfunction property(promise, name) {\n\treturn promise.then(\n\t\tfunction (value) {\n\t\t\treturn value && value[name];\n\t\t},\n\t\tfunction (value) {\n\t\t\treturn Promise.reject(value && value[name]);\n\t\t}\n\t);\n}\n\n/**\n * Obtain the response entity\n *\n * @returns {Promise} for the response entity\n */\nfunction entity() {\n\t/*jshint validthis:true */\n\treturn property(this, 'entity');\n}\n\n/**\n * Obtain the response status\n *\n * @returns {Promise} for the response status\n */\nfunction status() {\n\t/*jshint validthis:true */\n\treturn property(property(this, 'status'), 'code');\n}\n\n/**\n * Obtain the response headers map\n *\n * @returns {Promise} for the response headers map\n */\nfunction headers() {\n\t/*jshint validthis:true */\n\treturn property(this, 'headers');\n}\n\n/**\n * Obtain a specific response header\n *\n * @param {String} headerName the header to retrieve\n * @returns {Promise} for the response header's value\n */\nfunction header(headerName) {\n\t/*jshint validthis:true */\n\theaderName = normalizeHeaderName(headerName);\n\treturn property(this.headers(), headerName);\n}\n\n/**\n * Follow a related resource\n *\n * The relationship to follow may be define as a plain string, an object\n * with the rel and params, or an array containing one or more entries\n * with the previous forms.\n *\n * Examples:\n *   response.follow('next')\n *\n *   response.follow({ rel: 'next', params: { pageSize: 100 } })\n *\n *   response.follow([\n *       { rel: 'items', params: { projection: 'noImages' } },\n *       'search',\n *       { rel: 'findByGalleryIsNull', params: { projection: 'noImages' } },\n *       'items'\n *   ])\n *\n * @param {String|Object|Array} rels one, or more, relationships to follow\n * @returns ResponsePromise<Response> related resource\n */\nfunction follow(rels) {\n\t/*jshint validthis:true */\n\trels = [].concat(rels);\n\n\treturn make(rels.reduce(function (response, rel) {\n\t\treturn response.then(function (response) {\n\t\t\tif (typeof rel === 'string') {\n\t\t\t\trel = { rel: rel };\n\t\t\t}\n\t\t\tif (typeof response.entity.clientFor !== 'function') {\n\t\t\t\tthrow new Error('Hypermedia response expected');\n\t\t\t}\n\t\t\tvar client = response.entity.clientFor(rel.rel);\n\t\t\treturn client({ params: rel.params });\n\t\t});\n\t}, this));\n}\n\n/**\n * Wrap a Promise as an ResponsePromise\n *\n * @param {Promise<Response>} promise the promise for an HTTP Response\n * @returns {ResponsePromise<Response>} wrapped promise for Response with additional helper methods\n */\nfunction make(promise) {\n\tpromise.status = status;\n\tpromise.headers = headers;\n\tpromise.header = header;\n\tpromise.entity = entity;\n\tpromise.follow = follow;\n\treturn promise;\n}\n\nfunction responsePromise(obj, callback, errback) {\n\treturn make(Promise.resolve(obj).then(callback, errback));\n}\n\nresponsePromise.make = make;\nresponsePromise.reject = function (val) {\n\treturn make(Promise.reject(val));\n};\nresponsePromise.promise = function (func) {\n\treturn make(new Promise(func));\n};\n\nmodule.exports = responsePromise;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}