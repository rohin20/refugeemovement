{"ast":null,"code":"import _objectSpread from \"/Users/rohinphukan/Desktop/RefugeeWebsite/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport { calculatePickingColors } from './geojson-binary';\nfunction createEmptyLayerProps() {\n  return {\n    points: {},\n    lines: {},\n    polygons: {},\n    polygonsOutline: {}\n  };\n}\nfunction getCoordinates(f) {\n  return f.geometry.coordinates;\n}\nexport function createLayerPropsFromFeatures(features, featuresDiff) {\n  var layerProps = createEmptyLayerProps();\n  var pointFeatures = features.pointFeatures,\n    lineFeatures = features.lineFeatures,\n    polygonFeatures = features.polygonFeatures,\n    polygonOutlineFeatures = features.polygonOutlineFeatures;\n  layerProps.points.data = pointFeatures;\n  layerProps.points._dataDiff = featuresDiff.pointFeatures && function () {\n    return featuresDiff.pointFeatures;\n  };\n  layerProps.points.getPosition = getCoordinates;\n  layerProps.lines.data = lineFeatures;\n  layerProps.lines._dataDiff = featuresDiff.lineFeatures && function () {\n    return featuresDiff.lineFeatures;\n  };\n  layerProps.lines.getPath = getCoordinates;\n  layerProps.polygons.data = polygonFeatures;\n  layerProps.polygons._dataDiff = featuresDiff.polygonFeatures && function () {\n    return featuresDiff.polygonFeatures;\n  };\n  layerProps.polygons.getPolygon = getCoordinates;\n  layerProps.polygonsOutline.data = polygonOutlineFeatures;\n  layerProps.polygonsOutline._dataDiff = featuresDiff.polygonOutlineFeatures && function () {\n    return featuresDiff.polygonOutlineFeatures;\n  };\n  layerProps.polygonsOutline.getPath = getCoordinates;\n  return layerProps;\n}\nexport function createLayerPropsFromBinary(geojsonBinary, encodePickingColor) {\n  var layerProps = createEmptyLayerProps();\n  var points = geojsonBinary.points,\n    lines = geojsonBinary.lines,\n    polygons = geojsonBinary.polygons;\n  var customPickingColors = calculatePickingColors(geojsonBinary, encodePickingColor);\n  layerProps.points.data = {\n    length: points.positions.value.length / points.positions.size,\n    attributes: _objectSpread(_objectSpread({}, points.attributes), {}, {\n      getPosition: points.positions,\n      instancePickingColors: {\n        size: 3,\n        value: customPickingColors.points\n      }\n    }),\n    properties: points.properties,\n    numericProps: points.numericProps,\n    featureIds: points.featureIds\n  };\n  layerProps.lines.data = {\n    length: lines.pathIndices.value.length - 1,\n    startIndices: lines.pathIndices.value,\n    attributes: _objectSpread(_objectSpread({}, lines.attributes), {}, {\n      getPath: lines.positions,\n      instancePickingColors: {\n        size: 3,\n        value: customPickingColors.lines\n      }\n    }),\n    properties: lines.properties,\n    numericProps: lines.numericProps,\n    featureIds: lines.featureIds\n  };\n  layerProps.lines._pathType = 'open';\n  layerProps.polygons.data = {\n    length: polygons.polygonIndices.value.length - 1,\n    startIndices: polygons.polygonIndices.value,\n    attributes: _objectSpread(_objectSpread({}, polygons.attributes), {}, {\n      getPolygon: polygons.positions,\n      pickingColors: {\n        size: 3,\n        value: customPickingColors.polygons\n      }\n    }),\n    properties: polygons.properties,\n    numericProps: polygons.numericProps,\n    featureIds: polygons.featureIds\n  };\n  layerProps.polygons._normalize = false;\n  if (polygons.triangles) {\n    layerProps.polygons.data.attributes.indices = polygons.triangles.value;\n  }\n  layerProps.polygonsOutline.data = {\n    length: polygons.primitivePolygonIndices.value.length - 1,\n    startIndices: polygons.primitivePolygonIndices.value,\n    attributes: _objectSpread(_objectSpread({}, polygons.attributes), {}, {\n      getPath: polygons.positions,\n      instancePickingColors: {\n        size: 3,\n        value: customPickingColors.polygons\n      }\n    }),\n    properties: polygons.properties,\n    numericProps: polygons.numericProps,\n    featureIds: polygons.featureIds\n  };\n  layerProps.polygonsOutline._pathType = 'open';\n  return layerProps;\n}","map":{"version":3,"names":["calculatePickingColors","createEmptyLayerProps","points","lines","polygons","polygonsOutline","getCoordinates","f","geometry","coordinates","createLayerPropsFromFeatures","features","featuresDiff","layerProps","pointFeatures","lineFeatures","polygonFeatures","polygonOutlineFeatures","data","_dataDiff","getPosition","getPath","getPolygon","createLayerPropsFromBinary","geojsonBinary","encodePickingColor","customPickingColors","length","positions","value","size","attributes","_objectSpread","instancePickingColors","properties","numericProps","featureIds","pathIndices","startIndices","_pathType","polygonIndices","pickingColors","_normalize","triangles","indices","primitivePolygonIndices"],"sources":["/Users/rohinphukan/Desktop/RefugeeWebsite/node_modules/@deck.gl/layers/src/geojson-layer/geojson-layer-props.ts"],"sourcesContent":["import {BinaryAttribute, LayerData, LayerProps} from '@deck.gl/core';\nimport {PolygonLayerProps, ScatterplotLayerProps} from '..';\nimport {calculatePickingColors} from './geojson-binary';\nimport {BinaryFeatures} from '@loaders.gl/schema';\nimport {SeparatedGeometries} from './geojson';\n\n// TODO: PathLayer is not yet typed\ntype PathLayerProps = LayerProps & Record<string, any>;\n\ntype SubLayersProps = {\n  points: Partial<ScatterplotLayerProps>;\n  lines: Partial<PathLayerProps>;\n  polygons: Partial<PolygonLayerProps>;\n  polygonsOutline: Partial<PathLayerProps>;\n};\n\ntype ExtendedBinaryFeatures = {\n  [P in keyof BinaryFeatures]: BinaryFeatures[P] & {attributes?: Record<string, BinaryAttribute>};\n};\n\nfunction createEmptyLayerProps(): SubLayersProps {\n  return {\n    points: {},\n    lines: {},\n    polygons: {},\n    polygonsOutline: {}\n  };\n}\n\nfunction getCoordinates(f) {\n  return f.geometry.coordinates;\n}\n\nexport function createLayerPropsFromFeatures(\n  features: SeparatedGeometries,\n  featuresDiff\n): SubLayersProps {\n  const layerProps = createEmptyLayerProps();\n  const {pointFeatures, lineFeatures, polygonFeatures, polygonOutlineFeatures} = features;\n\n  layerProps.points.data = pointFeatures;\n  layerProps.points._dataDiff = featuresDiff.pointFeatures && (() => featuresDiff.pointFeatures);\n  layerProps.points.getPosition = getCoordinates;\n\n  layerProps.lines.data = lineFeatures;\n  layerProps.lines._dataDiff = featuresDiff.lineFeatures && (() => featuresDiff.lineFeatures);\n  layerProps.lines.getPath = getCoordinates;\n\n  layerProps.polygons.data = polygonFeatures;\n  layerProps.polygons._dataDiff =\n    featuresDiff.polygonFeatures && (() => featuresDiff.polygonFeatures);\n  layerProps.polygons.getPolygon = getCoordinates;\n\n  layerProps.polygonsOutline.data = polygonOutlineFeatures;\n  layerProps.polygonsOutline._dataDiff =\n    featuresDiff.polygonOutlineFeatures && (() => featuresDiff.polygonOutlineFeatures);\n  layerProps.polygonsOutline.getPath = getCoordinates;\n\n  return layerProps;\n}\n\nexport function createLayerPropsFromBinary(\n  geojsonBinary: Required<ExtendedBinaryFeatures>,\n  encodePickingColor\n): SubLayersProps {\n  // The binary data format is documented here\n  // https://github.com/visgl/loaders.gl/blob/master/modules/gis/docs/api-reference/geojson-to-binary.md\n  // It is the default output from the `MVTLoader` and can also be obtained\n  // from GeoJSON by using the `geojsonToBinary` utility function.\n  const layerProps = createEmptyLayerProps();\n  const {points, lines, polygons} = geojsonBinary;\n\n  const customPickingColors = calculatePickingColors(geojsonBinary, encodePickingColor);\n\n  layerProps.points.data = {\n    length: points.positions.value.length / points.positions.size,\n    attributes: {\n      ...points.attributes,\n      getPosition: points.positions,\n      instancePickingColors: {\n        size: 3,\n        value: customPickingColors.points!\n      }\n    },\n    properties: points.properties,\n    numericProps: points.numericProps,\n    featureIds: points.featureIds\n  } as LayerData<any>;\n\n  layerProps.lines.data = {\n    length: lines.pathIndices.value.length - 1,\n    startIndices: lines.pathIndices.value,\n    attributes: {\n      ...lines.attributes,\n      getPath: lines.positions,\n      instancePickingColors: {\n        size: 3,\n        value: customPickingColors.lines!\n      }\n    },\n    properties: lines.properties,\n    numericProps: lines.numericProps,\n    featureIds: lines.featureIds\n  } as LayerData<any>;\n  layerProps.lines._pathType = 'open';\n\n  layerProps.polygons.data = {\n    length: polygons.polygonIndices.value.length - 1,\n    startIndices: polygons.polygonIndices.value,\n    attributes: {\n      ...polygons.attributes,\n      getPolygon: polygons.positions,\n      pickingColors: {\n        size: 3,\n        value: customPickingColors.polygons!\n      }\n    },\n    properties: polygons.properties,\n    numericProps: polygons.numericProps,\n    featureIds: polygons.featureIds\n  } as LayerData<any>;\n  layerProps.polygons._normalize = false;\n  if (polygons.triangles) {\n    (layerProps.polygons.data as any).attributes.indices = polygons.triangles.value;\n  }\n\n  layerProps.polygonsOutline.data = {\n    length: polygons.primitivePolygonIndices.value.length - 1,\n    startIndices: polygons.primitivePolygonIndices.value,\n    attributes: {\n      ...polygons.attributes,\n      getPath: polygons.positions,\n      instancePickingColors: {\n        size: 3,\n        value: customPickingColors.polygons!\n      }\n    },\n    properties: polygons.properties,\n    numericProps: polygons.numericProps,\n    featureIds: polygons.featureIds\n  } as LayerData<any>;\n  layerProps.polygonsOutline._pathType = 'open';\n\n  return layerProps;\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}