{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n  return target;\n}\nvar DEFAULT_BATCH_SIZE = 100;\nvar DEFAULT_OPTIONS = {\n  batchSize: DEFAULT_BATCH_SIZE\n};\nvar TableBatchBuilder = function () {\n  function TableBatchBuilder(TableBatchType, schema) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    _classCallCheck(this, TableBatchBuilder);\n    this.TableBatchType = TableBatchType;\n    this.schema = schema;\n    this.options = _objectSpread(_objectSpread({}, DEFAULT_OPTIONS), options);\n    this.batch = null;\n    this.batchCount = 0;\n    this.bytesUsed = 0;\n  }\n  _createClass(TableBatchBuilder, [{\n    key: \"addRow\",\n    value: function addRow(row) {\n      if (!this.batch) {\n        var TableBatchType = this.TableBatchType;\n        this.batch = new TableBatchType(this.schema, this.options);\n      }\n      this.batch.addRow(row);\n    }\n  }, {\n    key: \"chunkComplete\",\n    value: function chunkComplete(chunk) {\n      this.bytesUsed += chunk.byteLength || chunk.length || 0;\n      if (this.batch) {\n        this.batch.chunkComplete();\n      }\n    }\n  }, {\n    key: \"isFull\",\n    value: function isFull() {\n      return this.batch && this.batch.isFull();\n    }\n  }, {\n    key: \"hasBatch\",\n    value: function hasBatch() {\n      return Boolean(this.batch);\n    }\n  }, {\n    key: \"getBatch\",\n    value: function getBatch() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      if (Number.isFinite(options.bytesUsed)) {\n        this.bytesUsed = options.bytesUsed;\n      }\n      if (this.batch) {\n        var normalizedBatch = this.batch.getBatch();\n        this.batch = null;\n        normalizedBatch.count = this.batchCount;\n        this.batchCount++;\n        normalizedBatch.bytesUsed = this.bytesUsed;\n        Object.assign(normalizedBatch, options);\n        return normalizedBatch;\n      }\n      return null;\n    }\n  }]);\n  return TableBatchBuilder;\n}();\nexport { TableBatchBuilder as default };","map":{"version":3,"names":["DEFAULT_BATCH_SIZE","DEFAULT_OPTIONS","batchSize","TableBatchBuilder","TableBatchType","schema","options","arguments","length","undefined","_classCallCheck","_objectSpread","batch","batchCount","bytesUsed","row","addRow","chunk","byteLength","chunkComplete","isFull","Boolean","Number","isFinite","normalizedBatch","getBatch","count","Object","assign"],"sources":["/Users/rohinphukan/Desktop/RefugeeWebsite/node_modules/@loaders.gl/tables/src/lib/table/table-batch-builder.js"],"sourcesContent":["const DEFAULT_BATCH_SIZE = 100;\n\nconst DEFAULT_OPTIONS = {\n  batchSize: DEFAULT_BATCH_SIZE\n};\n\nexport default class TableBatchBuilder {\n  constructor(TableBatchType, schema, options = {}) {\n    this.TableBatchType = TableBatchType;\n    this.schema = schema;\n    this.options = {...DEFAULT_OPTIONS, ...options};\n\n    this.batch = null;\n    this.batchCount = 0;\n    this.bytesUsed = 0;\n  }\n\n  addRow(row) {\n    if (!this.batch) {\n      const {TableBatchType} = this;\n      this.batch = new TableBatchType(this.schema, this.options);\n    }\n\n    this.batch.addRow(row);\n  }\n\n  chunkComplete(chunk) {\n    this.bytesUsed += chunk.byteLength || chunk.length || 0;\n    if (this.batch) {\n      this.batch.chunkComplete();\n    }\n  }\n\n  isFull() {\n    return this.batch && this.batch.isFull();\n  }\n\n  hasBatch() {\n    return Boolean(this.batch);\n  }\n\n  getBatch(options = {}) {\n    if (Number.isFinite(options.bytesUsed)) {\n      this.bytesUsed = options.bytesUsed;\n    }\n\n    if (this.batch) {\n      const normalizedBatch = this.batch.getBatch();\n      this.batch = null;\n      normalizedBatch.count = this.batchCount;\n      this.batchCount++;\n      normalizedBatch.bytesUsed = this.bytesUsed;\n      Object.assign(normalizedBatch, options);\n      return normalizedBatch;\n    }\n\n    return null;\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,IAAMA,kBAAkB,GAAG,GAA3B;AAEA,IAAMC,eAAe,GAAG;EACtBC,SAAS,EAAEF;AADW,CAAxB;IAIqBG,iB;EACnB,SAAAA,kBAAYC,cAAZ,EAA4BC,MAA5B,EAAkD;IAAA,IAAdC,OAAc,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAJ,EAAI;IAAAG,eAAA,OAAAP,iBAAA;IAChD,KAAKC,cAAL,GAAsBA,cAAtB;IACA,KAAKC,MAAL,GAAcA,MAAd;IACA,KAAKC,OAAL,GAAAK,aAAA,CAAAA,aAAA,KAAmBV,eAAnB,GAAuCK,OAAvC;IAEA,KAAKM,KAAL,GAAa,IAAb;IACA,KAAKC,UAAL,GAAkB,CAAlB;IACA,KAAKC,SAAL,GAAiB,CAAjB;EACD;;;2BAEMC,G,EAAK;MACV,IAAI,CAAC,KAAKH,KAAV,EAAiB;QAAA,IACRR,cADQ,GACU,IADV,CACRA,cADQ;QAEf,KAAKQ,KAAL,GAAa,IAAIR,cAAJ,CAAmB,KAAKC,MAAxB,EAAgC,KAAKC,OAArC,CAAb;MACD;MAED,KAAKM,KAAL,CAAWI,MAAX,CAAkBD,GAAlB;IACD;;;kCAEaE,K,EAAO;MACnB,KAAKH,SAAL,IAAkBG,KAAK,CAACC,UAAN,IAAoBD,KAAK,CAACT,MAA1B,IAAoC,CAAtD;MACA,IAAI,KAAKI,KAAT,EAAgB;QACd,KAAKA,KAAL,CAAWO,aAAX;MACD;IACF;;;6BAEQ;MACP,OAAO,KAAKP,KAAL,IAAc,KAAKA,KAAL,CAAWQ,MAAX,EAArB;IACD;;;+BAEU;MACT,OAAOC,OAAO,CAAC,KAAKT,KAAN,CAAd;IACD;;;+BAEsB;MAAA,IAAdN,OAAc,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAJ,EAAI;MACrB,IAAIe,MAAM,CAACC,QAAP,CAAgBjB,OAAO,CAACQ,SAAxB,CAAJ,EAAwC;QACtC,KAAKA,SAAL,GAAiBR,OAAO,CAACQ,SAAzB;MACD;MAED,IAAI,KAAKF,KAAT,EAAgB;QACd,IAAMY,eAAe,GAAG,KAAKZ,KAAL,CAAWa,QAAX,EAAxB;QACA,KAAKb,KAAL,GAAa,IAAb;QACAY,eAAe,CAACE,KAAhB,GAAwB,KAAKb,UAA7B;QACA,KAAKA,UAAL;QACAW,eAAe,CAACV,SAAhB,GAA4B,KAAKA,SAAjC;QACAa,MAAM,CAACC,MAAP,CAAcJ,eAAd,EAA+BlB,OAA/B;QACA,OAAOkB,eAAP;MACD;MAED,OAAO,IAAP;IACD;;;;SAnDkBrB,iB"},"metadata":{},"sourceType":"module","externalDependencies":[]}