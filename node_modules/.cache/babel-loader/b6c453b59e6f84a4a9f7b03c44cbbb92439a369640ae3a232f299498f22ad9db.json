{"ast":null,"code":"// Copyright (c) 2022 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = exports.StyledDropdownSelect = void 0;\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\nvar _taggedTemplateLiteral2 = _interopRequireDefault(require(\"@babel/runtime/helpers/taggedTemplateLiteral\"));\nvar _react = _interopRequireWildcard(require(\"react\"));\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\nvar _lodash = _interopRequireDefault(require(\"lodash.uniqby\"));\nvar _styledComponents = _interopRequireDefault(require(\"styled-components\"));\nvar _accessor = _interopRequireDefault(require(\"./accessor\"));\nvar _chickletedInput = _interopRequireDefault(require(\"./chickleted-input\"));\nvar _typeahead = _interopRequireDefault(require(\"./typeahead\"));\nvar _icons = require(\"../icons\");\nvar _dropdownList = _interopRequireWildcard(require(\"./dropdown-list\"));\nvar _portaled = _interopRequireDefault(require(\"../../common/portaled\"));\nvar _utils = require(\"@kepler.gl/utils\");\nvar _reactIntl = require(\"react-intl\");\nvar _localization = require(\"@kepler.gl/localization\");\nvar _templateObject, _templateObject2, _templateObject3, _templateObject4;\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n  return function _createSuperInternal() {\n    var Super = (0, _getPrototypeOf2[\"default\"])(Derived),\n      result;\n    if (hasNativeReflectConstruct) {\n      var NewTarget = (0, _getPrototypeOf2[\"default\"])(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return (0, _possibleConstructorReturn2[\"default\"])(this, result);\n  };\n}\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nvar StyledDropdownSelect = _styledComponents[\"default\"].div.attrs(function (props) {\n  return {\n    className: (0, _classnames[\"default\"])('item-selector__dropdown', props.className)\n  };\n})(_templateObject || (_templateObject = (0, _taggedTemplateLiteral2[\"default\"])([\"\\n  \", \";\\n\\n  height: \", \";\\n\\n  .list__item__anchor {\\n    \", \";\\n  }\\n\"])), function (props) {\n  return props.inputTheme === 'secondary' ? props.theme.secondaryInput : props.inputTheme === 'light' ? props.theme.inputLT : props.theme.input;\n}, function (props) {\n  return props.size === 'small' ? props.theme.inputBoxHeightSmall : props.theme.inputBoxHeight;\n}, function (props) {\n  return props.theme.dropdownListAnchor;\n});\nexports.StyledDropdownSelect = StyledDropdownSelect;\nvar DropdownSelectValue = _styledComponents[\"default\"].span(_templateObject2 || (_templateObject2 = (0, _taggedTemplateLiteral2[\"default\"])([\"\\n  color: \", \";\\n  overflow: hidden;\\n  text-overflow: ellipsis;\\n  white-space: nowrap;\\n\\n  .list__item {\\n    \", \";\\n  }\\n\\n  .list__item__anchor {\\n    \", \";\\n  }\\n\"])), function (props) {\n  return props.hasPlaceholder && props.inputTheme === 'light' ? props.theme.selectColorPlaceHolderLT : props.hasPlaceholder ? props.theme.selectColorPlaceHolder : props.inputTheme === 'light' ? props.theme.selectColorLT : props.theme.selectColor;\n}, function (props) {\n  return props.inputTheme === 'light' ? props.theme.dropdownListItemLT : props.theme.dropdownListItem;\n}, function (props) {\n  return props.inputTheme === 'light' ? props.theme.dropdownListAnchorLT : props.theme.dropdownListAnchor;\n});\nvar DropdownSelectActionRight = _styledComponents[\"default\"].div(_templateObject3 || (_templateObject3 = (0, _taggedTemplateLiteral2[\"default\"])([\"\\n  margin-right: 6px;\\n  display: flex;\\n  color: \", \";\\n\\n  :hover {\\n    color: \", \";\\n  }\\n\"])), function (props) {\n  return props.theme.subtextColor;\n}, function (props) {\n  return props.theme.textColor;\n});\nvar DropdownWrapper = _styledComponents[\"default\"].div(_templateObject4 || (_templateObject4 = (0, _taggedTemplateLiteral2[\"default\"])([\"\\n  border: 0;\\n  width: 100%;\\n  left: 0;\\n  z-index: \", \";\\n  width: \", \"px;\\n\"])), function (props) {\n  return props.theme.dropdownWrapperZ;\n}, function (props) {\n  return props.width;\n});\nvar ItemSelectorUnmemoized = /*#__PURE__*/function (_Component) {\n  (0, _inherits2[\"default\"])(ItemSelectorUnmemoized, _Component);\n  var _super = _createSuper(ItemSelectorUnmemoized);\n  function ItemSelectorUnmemoized() {\n    var _this;\n    (0, _classCallCheck2[\"default\"])(this, ItemSelectorUnmemoized);\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _super.call.apply(_super, [this].concat(args));\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"state\", {\n      showTypeahead: false,\n      dimensions: {\n        width: 200\n      }\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"root\", /*#__PURE__*/(0, _react.createRef)());\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"handleClickOutside\", function () {\n      _this._hideTypeahead();\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"_handleResize\", function (dimensions) {\n      _this.setState({\n        dimensions: dimensions\n      });\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"_hideTypeahead\", function () {\n      _this.setState({\n        showTypeahead: false\n      });\n      _this._onBlur();\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"_onBlur\", function () {\n      // note: chickleted input is not a real form element so we call onBlur()\n      // when we feel the events are appropriate\n      if (_this.props.onBlur) {\n        _this.props.onBlur();\n      }\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"_removeItem\", function (item, e) {\n      // only used when multiSelect = true\n      e.preventDefault();\n      e.stopPropagation();\n      var multiSelectedItems = (0, _utils.toArray)(_this.props.selectedItems);\n      var index = multiSelectedItems.findIndex(function (t) {\n        return t === item;\n      });\n      if (index < 0) {\n        return;\n      }\n      var items = [].concat((0, _toConsumableArray2[\"default\"])(multiSelectedItems.slice(0, index)), (0, _toConsumableArray2[\"default\"])(multiSelectedItems.slice(index + 1, multiSelectedItems.length)));\n      _this.props.onChange(items);\n      if (_this.props.closeOnSelect) {\n        _this.setState({\n          showTypeahead: false\n        });\n        _this._onBlur();\n      }\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"_selectItem\", function (item) {\n      var getValue = _accessor[\"default\"].generateOptionToStringFor(_this.props.getOptionValue || _this.props.displayOption);\n      var previousSelected = (0, _utils.toArray)(_this.props.selectedItems);\n      if (_this.props.multiSelect) {\n        var _items = (0, _lodash[\"default\"])(previousSelected.concat((0, _utils.toArray)(item)), getValue);\n        _this.props.onChange(_items);\n      } else {\n        _this.props.onChange(getValue(item));\n      }\n      if (_this.props.closeOnSelect) {\n        _this.setState({\n          showTypeahead: false\n        });\n        _this._onBlur();\n      }\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"_onErase\", function (e) {\n      e.stopPropagation();\n      _this.props.onChange(null);\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"_showTypeahead\", function (e) {\n      e.stopPropagation();\n      if (!_this.props.disabled) {\n        _this.setState({\n          showTypeahead: true\n        });\n      }\n    });\n    return _this;\n  }\n  (0, _createClass2[\"default\"])(ItemSelectorUnmemoized, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (this.props.showDropdownOnMount) {\n        this.setState({\n          showTypeahead: true\n        });\n      }\n      if (this.root.current instanceof HTMLElement) {\n        (0, _utils.observeDimensions)(this.root.current, this._handleResize);\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      if (this.root.current instanceof HTMLElement) {\n        (0, _utils.unobserveDimensions)(this.root.current);\n      }\n    }\n  }, {\n    key: \"_renderDropdown\",\n    value: function _renderDropdown(intl) {\n      var _this$props$placement = this.props.placement,\n        placement = _this$props$placement === void 0 ? 'bottom' : _this$props$placement;\n      var dimensions = this.state.dimensions;\n      return /*#__PURE__*/_react[\"default\"].createElement(_portaled[\"default\"], {\n        left: 0,\n        top: 0,\n        isOpened: this.state.showTypeahead,\n        onClose: this._hideTypeahead\n      }, /*#__PURE__*/_react[\"default\"].createElement(DropdownWrapper, {\n        placement: placement,\n        width: dimensions === null || dimensions === void 0 ? void 0 : dimensions.width\n      }, /*#__PURE__*/_react[\"default\"].createElement(_typeahead[\"default\"], {\n        customClasses: {\n          results: 'list-selector',\n          input: 'typeahead__input',\n          listItem: 'list__item',\n          listAnchor: 'list__item__anchor'\n        },\n        options: this.props.options,\n        filterOption: this.props.filterOption,\n        fixedOptions: this.props.fixedOptions,\n        placeholder: this.props.typeaheadPlaceholder || intl ? intl.formatMessage({\n          id: 'placeholder.search'\n        }) : 'Search',\n        onOptionSelected: this._selectItem,\n        customListComponent: this.props.DropDownRenderComponent,\n        customListHeaderComponent: this.props.DropdownHeaderComponent,\n        customListItemComponent: this.props.DropDownLineItemRenderComponent,\n        displayOption: _accessor[\"default\"].generateOptionToStringFor(this.props.displayOption),\n        searchable: this.props.searchable,\n        showOptionsWhenEmpty: true,\n        selectedItems: (0, _utils.toArray)(this.props.selectedItems),\n        light: this.props.inputTheme === 'light'\n      })));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var selected = (0, _utils.toArray)(this.props.selectedItems);\n      var hasValue = selected.length;\n      var displayOption = _accessor[\"default\"].generateOptionToStringFor(this.props.displayOption);\n      var _this$props = this.props,\n        _this$props$inputThem = _this$props.inputTheme,\n        inputTheme = _this$props$inputThem === void 0 ? 'primary' : _this$props$inputThem,\n        _this$props$DropDownL = _this$props.DropDownLineItemRenderComponent,\n        DropDownLineItemRenderComponent = _this$props$DropDownL === void 0 ? _dropdownList.ListItem : _this$props$DropDownL;\n      var dropdownSelectProps = {\n        className: (0, _classnames[\"default\"])({\n          active: this.state.showTypeahead\n        }),\n        displayOption: displayOption,\n        disabled: this.props.disabled,\n        onClick: this._showTypeahead,\n        error: this.props.isError,\n        inputTheme: inputTheme,\n        size: this.props.size\n      };\n      var intl = this.props.intl;\n      return /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        className: (0, _classnames[\"default\"])('item-selector', this.props.className),\n        ref: this.root\n      }, /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        style: {\n          position: 'relative'\n        }\n      }, this.props.multiSelect ? /*#__PURE__*/_react[\"default\"].createElement(_chickletedInput[\"default\"], (0, _extends2[\"default\"])({}, dropdownSelectProps, {\n        selectedItems: (0, _utils.toArray)(this.props.selectedItems),\n        placeholder: this.props.placeholder,\n        removeItem: this._removeItem,\n        CustomChickletComponent: this.props.CustomChickletComponent,\n        inputTheme: inputTheme\n      })) : /*#__PURE__*/_react[\"default\"].createElement(StyledDropdownSelect, dropdownSelectProps, /*#__PURE__*/_react[\"default\"].createElement(DropdownSelectValue, {\n        hasPlaceholder: !hasValue,\n        inputTheme: inputTheme,\n        className: \"item-selector__dropdown__value\"\n      }, hasValue ? /*#__PURE__*/_react[\"default\"].createElement(DropDownLineItemRenderComponent, {\n        displayOption: displayOption,\n        value: selected[0],\n        light: inputTheme === 'light'\n      }) : /*#__PURE__*/_react[\"default\"].createElement(_localization.FormattedMessage, {\n        id: this.props.placeholder || 'placeholder.selectValue'\n      })), this.props.erasable && hasValue ? /*#__PURE__*/_react[\"default\"].createElement(DropdownSelectActionRight, null, /*#__PURE__*/_react[\"default\"].createElement(_icons.Delete, {\n        height: \"12px\",\n        onClick: this._onErase\n      })) : this.props.showArrow ? /*#__PURE__*/_react[\"default\"].createElement(DropdownSelectActionRight, null, /*#__PURE__*/_react[\"default\"].createElement(_icons.ArrowDown, {\n        height: \"14px\",\n        onClick: this._showTypeahead\n      })) : null), this._renderDropdown(intl)));\n    }\n  }]);\n  return ItemSelectorUnmemoized;\n}(_react.Component);\n(0, _defineProperty2[\"default\"])(ItemSelectorUnmemoized, \"defaultProps\", {\n  multiSelect: true,\n  placeholder: 'placeholder.enterValue',\n  closeOnSelect: true,\n  searchable: true,\n  DropDownRenderComponent: _dropdownList[\"default\"],\n  DropDownLineItemRenderComponent: _dropdownList.ListItem\n});\nvar ItemSelector = /*#__PURE__*/_react[\"default\"].memo(ItemSelectorUnmemoized);\nItemSelector.displayName = 'ItemSelector';\nvar _default = (0, _reactIntl.injectIntl)(ItemSelectorUnmemoized);\nexports[\"default\"] = _default;","map":{"version":3,"names":["_extends2","_interopRequireDefault","require","_toConsumableArray2","_classCallCheck2","_createClass2","_assertThisInitialized2","_inherits2","_possibleConstructorReturn2","_getPrototypeOf2","_defineProperty2","_taggedTemplateLiteral2","_react","_interopRequireWildcard","_classnames","_lodash","_typeahead","_icons","_dropdownList","_portaled","_utils","_reactIntl","_templateObject","_templateObject2","_templateObject3","_templateObject4","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","result","NewTarget","constructor","Reflect","construct","arguments","apply","sham","Proxy","Boolean","prototype","valueOf","call","e","StyledDropdownSelect","_styledComponents","div","attrs","props","className","inputTheme","theme","secondaryInput","inputLT","input","dropdownListAnchor","exports","DropdownSelectValue","width","ItemSelectorUnmemoized","_super","_this","args","_key","createRef","dimensions","setState","_onBlur","onBlur","item","preventDefault","stopPropagation","t","items","concat","multiSelectedItems","slice","index","length","onChange","showTypeahead","displayOption","getValue","closeOnSelect","disabled","componentDidMount","showDropdownOnMount","root","current","HTMLElement","observeDimensions","_handleResize","key","value","componentWillUnmount","unobserveDimensions","_renderDropdown","intl","_this$props$placement","placement","state","createElement","left","top","isOpened","onClose","_hideTypeahead","DropdownWrapper","customClasses","results","options","filterOption","placeholder","typeaheadPlaceholder","formatMessage","onOptionSelected","_selectItem","customListComponent","DropDownRenderComponent","customListHeaderComponent","DropdownHeaderComponent","customListItemComponent","DropDownLineItemRenderComponent","_accessor","generateOptionToStringFor","searchable","showOptionsWhenEmpty","selectedItems","toArray","light","render","selected","hasValue","_this$props","_this$props$inputThem","_this$props$DropDownL","ListItem","dropdownSelectProps","active","onClick","_showTypeahead","error","isError","size","ref","style","position","multiSelect","_chickletedInput","removeItem","_removeItem","_localization","FormattedMessage","height","showArrow","DropdownSelectActionRight","ArrowDown"],"sources":["/Users/rohinphukan/Desktop/RefugeeWebsite/node_modules/@kepler.gl/components/src/common/item-selector/item-selector.tsx"],"sourcesContent":["// Copyright (c) 2022 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\nimport React, {Component, createRef, ComponentType, MouseEventHandler, RefObject} from 'react';\nimport classnames from 'classnames';\nimport uniqBy from 'lodash.uniqby';\nimport styled from 'styled-components';\n\nimport Accessor from './accessor';\nimport ChickletedInput from './chickleted-input';\nimport Typeahead from './typeahead';\nimport {Delete, ArrowDown} from '../icons';\nimport DropdownList, {ListItem} from './dropdown-list';\nimport Portaled from '../../common/portaled';\nimport {toArray, observeDimensions, unobserveDimensions} from '@kepler.gl/utils';\nimport {injectIntl, IntlShape} from 'react-intl';\nimport {FormattedMessage} from '@kepler.gl/localization';\n\ninterface StyledDropdownSelectProps {\n  inputTheme?: string;\n  size?: string;\n  className?: string;\n}\n\nexport const StyledDropdownSelect = styled.div.attrs(props => ({\n  className: classnames('item-selector__dropdown', props.className)\n}))<StyledDropdownSelectProps>`\n  ${props =>\n    props.inputTheme === 'secondary'\n      ? props.theme.secondaryInput\n      : props.inputTheme === 'light'\n      ? props.theme.inputLT\n      : props.theme.input};\n\n  height: ${props =>\n    props.size === 'small' ? props.theme.inputBoxHeightSmall : props.theme.inputBoxHeight};\n\n  .list__item__anchor {\n    ${props => props.theme.dropdownListAnchor};\n  }\n`;\n\ninterface DropdownSelectValueProps {\n  hasPlaceholder?: boolean;\n  inputTheme?: string;\n}\n\nconst DropdownSelectValue = styled.span<DropdownSelectValueProps>`\n  color: ${props =>\n    props.hasPlaceholder && props.inputTheme === 'light'\n      ? props.theme.selectColorPlaceHolderLT\n      : props.hasPlaceholder\n      ? props.theme.selectColorPlaceHolder\n      : props.inputTheme === 'light'\n      ? props.theme.selectColorLT\n      : props.theme.selectColor};\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n\n  .list__item {\n    ${props =>\n      props.inputTheme === 'light' ? props.theme.dropdownListItemLT : props.theme.dropdownListItem};\n  }\n\n  .list__item__anchor {\n    ${props =>\n      props.inputTheme === 'light'\n        ? props.theme.dropdownListAnchorLT\n        : props.theme.dropdownListAnchor};\n  }\n`;\n\nconst DropdownSelectActionRight = styled.div`\n  margin-right: 6px;\n  display: flex;\n  color: ${props => props.theme.subtextColor};\n\n  :hover {\n    color: ${props => props.theme.textColor};\n  }\n`;\n\ninterface DropdownWrapperProps {\n  placement?: string;\n  width: number;\n}\n\nconst DropdownWrapper = styled.div<DropdownWrapperProps>`\n  border: 0;\n  width: 100%;\n  left: 0;\n  z-index: ${props => props.theme.dropdownWrapperZ};\n  width: ${props => props.width}px;\n`;\n\nexport type ItemSelectorProps = {\n  selectedItems?:\n    | ReadonlyArray<string | number | boolean | object>\n    | string\n    | number\n    | boolean\n    | object\n    | null;\n  options: ReadonlyArray<string | number | boolean | object>;\n  onChange: (\n    items:\n      | ReadonlyArray<string | number | boolean | object>\n      | string\n      | number\n      | boolean\n      | object\n      | null\n  ) => void;\n  fixedOptions?: ReadonlyArray<string | number | boolean | object> | null;\n  erasable?: boolean;\n  showArrow?: boolean;\n  searchable?: boolean;\n  displayOption?: string | ((opt: any) => any);\n  getOptionValue?: string | ((opt: any) => any);\n  filterOption?: string | ((opt: any) => any);\n  placement?: string;\n  disabled?: boolean;\n  isError?: boolean;\n  multiSelect?: boolean;\n  inputTheme?: string;\n  size?: string;\n  onBlur?: () => void;\n  placeholder?: string;\n  closeOnSelect?: boolean;\n  typeaheadPlaceholder?: string;\n  DropdownHeaderComponent?: ComponentType<any> | null;\n  DropDownRenderComponent?: ComponentType<any>;\n  DropDownLineItemRenderComponent?: ComponentType<any>;\n  CustomChickletComponent?: ComponentType<any>;\n  intl: IntlShape;\n  className?: string;\n  showDropdownOnMount?: boolean;\n};\n\nclass ItemSelectorUnmemoized extends Component<ItemSelectorProps> {\n  static defaultProps = {\n    multiSelect: true,\n    placeholder: 'placeholder.enterValue',\n    closeOnSelect: true,\n    searchable: true,\n    DropDownRenderComponent: DropdownList,\n    DropDownLineItemRenderComponent: ListItem\n  };\n\n  state = {\n    showTypeahead: false,\n    dimensions: {\n      width: 200\n    }\n  };\n\n  componentDidMount() {\n    if (this.props.showDropdownOnMount) {\n      this.setState({showTypeahead: true});\n    }\n\n    if (this.root.current instanceof HTMLElement) {\n      observeDimensions(this.root.current, this._handleResize);\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.root.current instanceof HTMLElement) {\n      unobserveDimensions(this.root.current);\n    }\n  }\n\n  root: RefObject<HTMLDivElement> = createRef();\n\n  handleClickOutside = () => {\n    this._hideTypeahead();\n  };\n\n  _handleResize = dimensions => {\n    this.setState({dimensions});\n  };\n\n  _hideTypeahead = () => {\n    this.setState({showTypeahead: false});\n    this._onBlur();\n  };\n\n  _onBlur = () => {\n    // note: chickleted input is not a real form element so we call onBlur()\n    // when we feel the events are appropriate\n    if (this.props.onBlur) {\n      this.props.onBlur();\n    }\n  };\n\n  _removeItem = (item, e) => {\n    // only used when multiSelect = true\n    e.preventDefault();\n    e.stopPropagation();\n    const multiSelectedItems = toArray(this.props.selectedItems);\n    const index = multiSelectedItems.findIndex(t => t === item);\n\n    if (index < 0) {\n      return;\n    }\n\n    const items = [\n      ...multiSelectedItems.slice(0, index),\n      ...multiSelectedItems.slice(index + 1, multiSelectedItems.length)\n    ];\n\n    this.props.onChange(items);\n\n    if (this.props.closeOnSelect) {\n      this.setState({showTypeahead: false});\n      this._onBlur();\n    }\n  };\n\n  _selectItem = item => {\n    const getValue = Accessor.generateOptionToStringFor(\n      this.props.getOptionValue || this.props.displayOption\n    );\n\n    const previousSelected = toArray(this.props.selectedItems);\n\n    if (this.props.multiSelect) {\n      const items = uniqBy(previousSelected.concat(toArray(item)), getValue);\n      this.props.onChange(items);\n    } else {\n      this.props.onChange(getValue(item));\n    }\n\n    if (this.props.closeOnSelect) {\n      this.setState({showTypeahead: false});\n      this._onBlur();\n    }\n  };\n\n  _onErase: MouseEventHandler = e => {\n    e.stopPropagation();\n    this.props.onChange(null);\n  };\n\n  _showTypeahead: MouseEventHandler = e => {\n    e.stopPropagation();\n    if (!this.props.disabled) {\n      this.setState({\n        showTypeahead: true\n      });\n    }\n  };\n\n  _renderDropdown(intl: IntlShape) {\n    const {placement = 'bottom'} = this.props;\n    const {dimensions} = this.state;\n\n    return (\n      <Portaled left={0} top={0} isOpened={this.state.showTypeahead} onClose={this._hideTypeahead}>\n        <DropdownWrapper placement={placement} width={dimensions?.width}>\n          <Typeahead\n            customClasses={{\n              results: 'list-selector',\n              input: 'typeahead__input',\n              listItem: 'list__item',\n              listAnchor: 'list__item__anchor'\n            }}\n            options={this.props.options}\n            filterOption={this.props.filterOption}\n            fixedOptions={this.props.fixedOptions}\n            placeholder={\n              this.props.typeaheadPlaceholder || intl\n                ? intl.formatMessage({id: 'placeholder.search'})\n                : 'Search'\n            }\n            onOptionSelected={this._selectItem}\n            customListComponent={this.props.DropDownRenderComponent}\n            customListHeaderComponent={this.props.DropdownHeaderComponent}\n            customListItemComponent={this.props.DropDownLineItemRenderComponent}\n            displayOption={Accessor.generateOptionToStringFor(this.props.displayOption)}\n            searchable={this.props.searchable}\n            showOptionsWhenEmpty\n            selectedItems={toArray(this.props.selectedItems)}\n            light={this.props.inputTheme === 'light'}\n          />\n        </DropdownWrapper>\n      </Portaled>\n    );\n  }\n\n  render() {\n    const selected = toArray(this.props.selectedItems);\n    const hasValue = selected.length;\n    const displayOption = Accessor.generateOptionToStringFor(this.props.displayOption);\n    const {inputTheme = 'primary', DropDownLineItemRenderComponent = ListItem} = this.props;\n\n    const dropdownSelectProps = {\n      className: classnames({\n        active: this.state.showTypeahead\n      }),\n      displayOption,\n      disabled: this.props.disabled,\n      onClick: this._showTypeahead,\n      error: this.props.isError,\n      inputTheme,\n      size: this.props.size\n    };\n    const intl = this.props.intl;\n\n    return (\n      <div className={classnames('item-selector', this.props.className)} ref={this.root}>\n        <div style={{position: 'relative'}}>\n          {/* this part is used to display the label */}\n          {this.props.multiSelect ? (\n            <ChickletedInput\n              {...dropdownSelectProps}\n              selectedItems={toArray(this.props.selectedItems)}\n              placeholder={this.props.placeholder}\n              removeItem={this._removeItem}\n              CustomChickletComponent={this.props.CustomChickletComponent}\n              inputTheme={inputTheme}\n            />\n          ) : (\n            <StyledDropdownSelect {...dropdownSelectProps}>\n              <DropdownSelectValue\n                hasPlaceholder={!hasValue}\n                inputTheme={inputTheme}\n                className=\"item-selector__dropdown__value\"\n              >\n                {hasValue ? (\n                  <DropDownLineItemRenderComponent\n                    displayOption={displayOption}\n                    value={selected[0]}\n                    light={inputTheme === 'light'}\n                  />\n                ) : (\n                  <FormattedMessage id={this.props.placeholder || 'placeholder.selectValue'} />\n                )}\n              </DropdownSelectValue>\n              {this.props.erasable && hasValue ? (\n                <DropdownSelectActionRight>\n                  <Delete height=\"12px\" onClick={this._onErase} />\n                </DropdownSelectActionRight>\n              ) : this.props.showArrow ? (\n                <DropdownSelectActionRight>\n                  <ArrowDown height=\"14px\" onClick={this._showTypeahead} />\n                </DropdownSelectActionRight>\n              ) : null}\n            </StyledDropdownSelect>\n          )}\n          {/* this part is used to built the list */}\n          {this._renderDropdown(intl)}\n        </div>\n      </div>\n    );\n  }\n}\n\nconst ItemSelector = React.memo(ItemSelectorUnmemoized);\nItemSelector.displayName = 'ItemSelector';\n\nexport default injectIntl(ItemSelectorUnmemoized);\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}