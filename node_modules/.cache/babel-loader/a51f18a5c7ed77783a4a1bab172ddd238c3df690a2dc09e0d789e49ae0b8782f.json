{"ast":null,"code":"// Copyright (c) 2022 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\nvar _react = _interopRequireWildcard(require(\"react\"));\nvar _styledComponents = require(\"../../common/styled-components\");\nvar _filterPanelHeader = _interopRequireDefault(require(\"../../side-panel/filter-panel/filter-panel-header\"));\nvar _panelHeaderAction = _interopRequireDefault(require(\"../../side-panel/panel-header-action\"));\nvar _sourceDataSelector = _interopRequireDefault(require(\"../../side-panel/common/source-data-selector\"));\nvar _fieldSelector = _interopRequireDefault(require(\"../../common/field-selector\"));\nvar _newFilterPanel = require(\"./new-filter-panel\");\nFieldPanelWithFieldSelectFactory.deps = [_filterPanelHeader[\"default\"], _sourceDataSelector[\"default\"], _fieldSelector[\"default\"], _panelHeaderAction[\"default\"]];\nfunction FieldPanelWithFieldSelectFactory(FilterPanelHeader, SourceDataSelector, FieldSelector, PanelHeaderAction) {\n  var FilterPanelWithFieldSelect = /*#__PURE__*/_react[\"default\"].memo(function (_ref) {\n    var children = _ref.children,\n      allAvailableFields = _ref.allAvailableFields,\n      datasets = _ref.datasets,\n      filter = _ref.filter,\n      idx = _ref.idx,\n      removeFilter = _ref.removeFilter,\n      setFilter = _ref.setFilter,\n      _ref$panelActions = _ref.panelActions,\n      panelActions = _ref$panelActions === void 0 ? [] : _ref$panelActions;\n    var onFieldSelector = (0, _react.useCallback)(function (field) {\n      return setFilter(idx, 'name', field.name);\n    }, [idx, setFilter]);\n    var onSourceDataSelector = (0, _react.useCallback)(function (value) {\n      return setFilter(idx, 'dataId', [value]);\n    }, [idx, setFilter]);\n    var fieldValue = (0, _react.useMemo)(function () {\n      return Array.isArray(filter.name) ? filter.name[0] : filter.name;\n    }, [filter.name]);\n    var dataset = datasets[filter.dataId[0]];\n    var supportedFields = (0, _react.useMemo)(function () {\n      return (0, _newFilterPanel.getSupportedFilterFields)(dataset.supportedFilterTypes, allAvailableFields);\n    }, [dataset.supportedFilterTypes, allAvailableFields]);\n    return /*#__PURE__*/_react[\"default\"].createElement(_react[\"default\"].Fragment, null, /*#__PURE__*/_react[\"default\"].createElement(FilterPanelHeader, {\n      datasets: [dataset],\n      filter: filter,\n      removeFilter: removeFilter\n    }, /*#__PURE__*/_react[\"default\"].createElement(FieldSelector, {\n      inputTheme: \"secondary\",\n      fields: supportedFields,\n      value: fieldValue,\n      erasable: false,\n      onSelect: onFieldSelector\n    }), panelActions === null || panelActions === void 0 ? void 0 : panelActions.map(function (panelAction) {\n      return /*#__PURE__*/_react[\"default\"].createElement(PanelHeaderAction, {\n        id: panelAction.id,\n        key: panelAction.id,\n        onClick: panelAction.onClick,\n        tooltip: panelAction.tooltip,\n        IconComponent: panelAction.iconComponent,\n        active: panelAction.active\n      });\n    })), /*#__PURE__*/_react[\"default\"].createElement(_styledComponents.StyledFilterContent, {\n      className: \"filter-panel__content\"\n    }, Object.keys(datasets).length > 1 && /*#__PURE__*/_react[\"default\"].createElement(SourceDataSelector, {\n      inputTheme: \"secondary\",\n      datasets: datasets,\n      disabled: filter.freeze,\n      dataId: filter.dataId,\n      onSelect: onSourceDataSelector\n    }), children));\n  });\n  FilterPanelWithFieldSelect.displayName = 'FilterPanelWithFieldSelect';\n  return FilterPanelWithFieldSelect;\n}\nvar _default = FieldPanelWithFieldSelectFactory;\nexports[\"default\"] = _default;","map":{"version":3,"names":["Object","defineProperty","exports","value","_react","_interopRequireWildcard","require","_styledComponents","_filterPanelHeader","_interopRequireDefault","_panelHeaderAction","_sourceDataSelector","_fieldSelector","_newFilterPanel","FieldPanelWithFieldSelectFactory","deps","FilterPanelWithFieldSelect","memo","_ref","children","allAvailableFields","datasets","filter","idx","removeFilter","setFilter","_ref$panelActions","panelActions","onFieldSelector","useCallback","field","name","onSourceDataSelector","fieldValue","useMemo","Array","isArray","dataset","dataId","supportedFields","getSupportedFilterFields","supportedFilterTypes","createElement","Fragment","FilterPanelHeader","FieldSelector","inputTheme","fields","erasable","onSelect","map","panelAction","PanelHeaderAction","id","key","onClick","tooltip","IconComponent","iconComponent","active","StyledFilterContent","className","keys","length","SourceDataSelector","disabled","freeze","_default"],"sources":["/Users/rohinphukan/Desktop/RefugeeWebsite/node_modules/@kepler.gl/components/src/filters/filter-panels/filter-panel-with-field-select.tsx"],"sourcesContent":["// Copyright (c) 2022 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\nimport React, {useCallback, useMemo} from 'react';\nimport {StyledFilterContent} from '../../common/styled-components';\nimport FilterPanelHeaderFactory from '../../side-panel/filter-panel/filter-panel-header';\nimport PanelHeaderActionFactory from '../../side-panel/panel-header-action';\nimport SourceDataSelectorFactory from '../../side-panel/common/source-data-selector';\nimport FieldSelectorFactory from '../../common/field-selector';\nimport {getSupportedFilterFields} from './new-filter-panel';\nimport {FilterPanelWithFieldSelectComponent} from './types';\nimport {KeplerTable} from '@kepler.gl/table';\n\nFieldPanelWithFieldSelectFactory.deps = [\n  FilterPanelHeaderFactory,\n  SourceDataSelectorFactory,\n  FieldSelectorFactory,\n  PanelHeaderActionFactory\n];\n\nfunction FieldPanelWithFieldSelectFactory(\n  FilterPanelHeader: ReturnType<typeof FilterPanelHeaderFactory>,\n  SourceDataSelector: ReturnType<typeof SourceDataSelectorFactory>,\n  FieldSelector: ReturnType<typeof FieldSelectorFactory>,\n  PanelHeaderAction: ReturnType<typeof PanelHeaderActionFactory>\n) {\n  const FilterPanelWithFieldSelect: FilterPanelWithFieldSelectComponent = React.memo(\n    ({\n      children,\n      allAvailableFields,\n      datasets,\n      filter,\n      idx,\n      removeFilter,\n      setFilter,\n      panelActions = []\n    }) => {\n      const onFieldSelector = useCallback(field => setFilter(idx, 'name', field.name), [\n        idx,\n        setFilter\n      ]);\n\n      const onSourceDataSelector = useCallback(value => setFilter(idx, 'dataId', [value]), [\n        idx,\n        setFilter\n      ]);\n\n      const fieldValue = useMemo(\n        () => (Array.isArray(filter.name) ? filter.name[0] : filter.name),\n        [filter.name]\n      );\n\n      const dataset: KeplerTable = datasets[filter.dataId[0]];\n      const supportedFields = useMemo(\n        () => getSupportedFilterFields(dataset.supportedFilterTypes, allAvailableFields),\n        [dataset.supportedFilterTypes, allAvailableFields]\n      );\n      return (\n        <>\n          <FilterPanelHeader datasets={[dataset]} filter={filter} removeFilter={removeFilter}>\n            <FieldSelector\n              inputTheme=\"secondary\"\n              fields={supportedFields}\n              value={fieldValue}\n              erasable={false}\n              onSelect={onFieldSelector}\n            />\n            {panelActions?.map(panelAction => (\n              <PanelHeaderAction\n                id={panelAction.id}\n                key={panelAction.id}\n                onClick={panelAction.onClick}\n                tooltip={panelAction.tooltip}\n                IconComponent={panelAction.iconComponent}\n                active={panelAction.active}\n              />\n            ))}\n          </FilterPanelHeader>\n          <StyledFilterContent className=\"filter-panel__content\">\n            {Object.keys(datasets).length > 1 && (\n              <SourceDataSelector\n                inputTheme=\"secondary\"\n                datasets={datasets}\n                disabled={filter.freeze}\n                dataId={filter.dataId}\n                onSelect={onSourceDataSelector}\n              />\n            )}\n            {children}\n          </StyledFilterContent>\n        </>\n      );\n    }\n  );\n\n  FilterPanelWithFieldSelect.displayName = 'FilterPanelWithFieldSelect';\n\n  return FilterPanelWithFieldSelect;\n}\n\nexport default FieldPanelWithFieldSelectFactory;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}