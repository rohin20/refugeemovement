{"ast":null,"code":"import _regeneratorRuntime from \"/Users/rohinphukan/Desktop/RefugeeWebsite/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/rohinphukan/Desktop/RefugeeWebsite/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { isBrowser } from '@loaders.gl/loader-utils';\nimport * as fs from '../node/fs';\nexport function makeWritableFile(pathOrStream, options) {\n  if (isBrowser) {\n    return {\n      write: function () {\n        var _write = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n          return _regeneratorRuntime().wrap(function _callee$(_context) {\n            while (1) switch (_context.prev = _context.next) {\n              case 0:\n              case \"end\":\n                return _context.stop();\n            }\n          }, _callee);\n        }));\n        function write() {\n          return _write.apply(this, arguments);\n        }\n        return write;\n      }(),\n      close: function () {\n        var _close = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n          return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n            while (1) switch (_context2.prev = _context2.next) {\n              case 0:\n              case \"end\":\n                return _context2.stop();\n            }\n          }, _callee2);\n        }));\n        function close() {\n          return _close.apply(this, arguments);\n        }\n        return close;\n      }()\n    };\n  }\n  var outputStream = typeof pathOrStream === 'string' ? fs.createWriteStream(pathOrStream, options) : pathOrStream;\n  return {\n    write: function () {\n      var _write2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3(buffer) {\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) switch (_context3.prev = _context3.next) {\n            case 0:\n              return _context3.abrupt(\"return\", new Promise(function (resolve, reject) {\n                outputStream.write(buffer, function (err) {\n                  return err ? reject(err) : resolve();\n                });\n              }));\n            case 1:\n            case \"end\":\n              return _context3.stop();\n          }\n        }, _callee3);\n      }));\n      function write(_x) {\n        return _write2.apply(this, arguments);\n      }\n      return write;\n    }(),\n    close: function close() {\n      return new Promise(function (resolve, reject) {\n        outputStream.close(function (err) {\n          return err ? reject(err) : resolve();\n        });\n      });\n    }\n  };\n}","map":{"version":3,"names":["isBrowser","fs","makeWritableFile","pathOrStream","options","write","_write","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","stop","apply","arguments","close","_close","_callee2","_callee2$","_context2","outputStream","createWriteStream","_write2","_callee3","buffer","_callee3$","_context3","abrupt","Promise","resolve","reject","err","_x"],"sources":["/Users/rohinphukan/Desktop/RefugeeWebsite/node_modules/@loaders.gl/loader-utils/src/lib/filesystems/writable-file.ts"],"sourcesContent":["// Forked from https://github.com/kbajalc/parquets under MIT license (Copyright (c) 2017 ironSource Ltd.)\nimport {isBrowser} from '@loaders.gl/loader-utils';\nimport * as fs from '../node/fs';\nimport type {Writable} from 'stream';\n\nexport type WritableFile = {\n  write: (buf: Buffer) => Promise<void>;\n  close: () => Promise<void>;\n};\n\nexport interface WriteStreamOptions {\n  flags?: string;\n  encoding?: 'utf8';\n  fd?: number;\n  mode?: number;\n  autoClose?: boolean;\n  start?: number;\n}\n\n/** Helper function to create an envelope reader for a binary memory input */\nexport function makeWritableFile(\n  pathOrStream: string | Writable,\n  options?: WriteStreamOptions\n): WritableFile {\n  if (isBrowser) {\n    return {\n      write: async () => {},\n      close: async () => {}\n    };\n  }\n\n  const outputStream: Writable =\n    typeof pathOrStream === 'string' ? fs.createWriteStream(pathOrStream, options) : pathOrStream;\n  return {\n    write: async (buffer: Buffer) =>\n      new Promise((resolve, reject) => {\n        outputStream.write(buffer, (err) => (err ? reject(err) : resolve()));\n      }),\n    close: () =>\n      new Promise((resolve, reject) => {\n        (outputStream as any).close((err) => (err ? reject(err) : resolve()));\n      })\n  };\n}\n"],"mappings":";;AACA,SAAQA,SAAS,QAAO,0BAA0B;AAClD,OAAO,KAAKC,EAAE,MAAM,YAAY;AAkBhC,OAAO,SAASC,gBAAgBA,CAC9BC,YAA+B,EAC/BC,OAA4B,EACd;EACd,IAAIJ,SAAS,EAAE;IACb,OAAO;MACLK,KAAK;QAAA,IAAAC,MAAA,GAAAC,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,CAAE,SAAAC,QAAA;UAAA,OAAAF,mBAAA,GAAAG,IAAA,UAAAC,SAAAC,QAAA;YAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;cAAA;cAAA;gBAAA,OAAAF,QAAA,CAAAG,IAAA;YAAA;UAAA,GAAAN,OAAA;QAAA,CAAc;QAAA,SAAAL,MAAA;UAAA,OAAAC,MAAA,CAAAW,KAAA,OAAAC,SAAA;QAAA;QAAA,OAAAb,KAAA;MAAA;MACrBc,KAAK;QAAA,IAAAC,MAAA,GAAAb,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,CAAE,SAAAY,SAAA;UAAA,OAAAb,mBAAA,GAAAG,IAAA,UAAAW,UAAAC,SAAA;YAAA,kBAAAA,SAAA,CAAAT,IAAA,GAAAS,SAAA,CAAAR,IAAA;cAAA;cAAA;gBAAA,OAAAQ,SAAA,CAAAP,IAAA;YAAA;UAAA,GAAAK,QAAA;QAAA,CAAa;QAAA,SAAAF,MAAA;UAAA,OAAAC,MAAA,CAAAH,KAAA,OAAAC,SAAA;QAAA;QAAA,OAAAC,KAAA;MAAA;IACtB,CAAC;EACH;EAEA,IAAMK,YAAsB,GAC1B,OAAOrB,YAAY,KAAK,QAAQ,GAAGF,EAAE,CAACwB,iBAAiB,CAACtB,YAAY,EAAEC,OAAO,CAAC,GAAGD,YAAY;EAC/F,OAAO;IACLE,KAAK;MAAA,IAAAqB,OAAA,GAAAnB,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,CAAE,SAAAkB,SAAOC,MAAc;QAAA,OAAApB,mBAAA,GAAAG,IAAA,UAAAkB,UAAAC,SAAA;UAAA,kBAAAA,SAAA,CAAAhB,IAAA,GAAAgB,SAAA,CAAAf,IAAA;YAAA;cAAA,OAAAe,SAAA,CAAAC,MAAA,WAC1B,IAAIC,OAAO,CAAC,UAACC,OAAO,EAAEC,MAAM,EAAK;gBAC/BV,YAAY,CAACnB,KAAK,CAACuB,MAAM,EAAG,UAAAO,GAAG;kBAAA,OAAMA,GAAG,GAAGD,MAAM,CAACC,GAAG,CAAC,GAAGF,OAAO,EAAG;gBAAA,EAAC;cACtE,CAAC,CAAC;YAAA;YAAA;cAAA,OAAAH,SAAA,CAAAd,IAAA;UAAA;QAAA,GAAAW,QAAA;MAAA;MAAA,SAAAtB,MAAA+B,EAAA;QAAA,OAAAV,OAAA,CAAAT,KAAA,OAAAC,SAAA;MAAA;MAAA,OAAAb,KAAA;IAAA;IACJc,KAAK,EAAE,SAAAA,MAAA;MAAA,OACL,IAAIa,OAAO,CAAC,UAACC,OAAO,EAAEC,MAAM,EAAK;QAC9BV,YAAY,CAASL,KAAK,CAAE,UAAAgB,GAAG;UAAA,OAAMA,GAAG,GAAGD,MAAM,CAACC,GAAG,CAAC,GAAGF,OAAO,EAAG;QAAA,EAAC;MACvE,CAAC;IAAA;EACL,CAAC;AACH"},"metadata":{},"sourceType":"module","externalDependencies":[]}