{"ast":null,"code":"// Copyright (c) 2022 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\nvar _document = _interopRequireDefault(require(\"global/document\"));\nfunction nope() {}\nvar MouseEventHandler = /*#__PURE__*/function () {\n  // Set correct type\n  // Set correct type\n  function MouseEventHandler(_ref) {\n    var _this = this;\n    var _ref$vertical = _ref.vertical,\n      vertical = _ref$vertical === void 0 ? false : _ref$vertical,\n      _ref$valueListener = _ref.valueListener,\n      valueListener = _ref$valueListener === void 0 ? nope : _ref$valueListener,\n      _ref$toggleMouseOver = _ref.toggleMouseOver,\n      toggleMouseOver = _ref$toggleMouseOver === void 0 ? nope : _ref$toggleMouseOver,\n      track = _ref.track,\n      _ref$setAnchor = _ref.setAnchor,\n      setAnchor = _ref$setAnchor === void 0 ? null : _ref$setAnchor;\n    (0, _classCallCheck2[\"default\"])(this, MouseEventHandler);\n    (0, _defineProperty2[\"default\"])(this, \"vertical\", void 0);\n    (0, _defineProperty2[\"default\"])(this, \"valueListener\", void 0);\n    (0, _defineProperty2[\"default\"])(this, \"toggleMouseOver\", void 0);\n    (0, _defineProperty2[\"default\"])(this, \"track\", void 0);\n    (0, _defineProperty2[\"default\"])(this, \"setAnchor\", void 0);\n    (0, _defineProperty2[\"default\"])(this, \"handleMouseDown\", function (e) {\n      _document[\"default\"].addEventListener('mouseup', _this.mouseup);\n      _document[\"default\"].addEventListener('mousemove', _this.mousemove);\n      if (_this.setAnchor) {\n        var pos = _this.getMousePos(e);\n        _this.setAnchor(_this.getDistanceToTrack(pos));\n      }\n      _this.toggleMouseOver();\n    });\n    (0, _defineProperty2[\"default\"])(this, \"mouseup\", function () {\n      _document[\"default\"].removeEventListener('mouseup', _this.mouseup);\n      _document[\"default\"].removeEventListener('mousemove', _this.mousemove);\n      _this.toggleMouseOver();\n    });\n    (0, _defineProperty2[\"default\"])(this, \"mousemove\", function (e) {\n      e.preventDefault();\n      var pos = _this.getMousePos(e);\n      _this.valueListener(_this.getDistanceToTrack(pos));\n    });\n    (0, _defineProperty2[\"default\"])(this, \"handleTouchStart\", function (e) {\n      // TODO: fix touch event\n      _document[\"default\"].addEventListener('touchend', _this.touchend);\n      _document[\"default\"].addEventListener('touchmove', _this.touchmove);\n      if (_this.setAnchor) {\n        var pos = _this.getTouchPosition(e);\n        _this.setAnchor(_this.getDistanceToTrack(pos));\n      }\n      _this.toggleMouseOver();\n    });\n    (0, _defineProperty2[\"default\"])(this, \"touchmove\", function (e) {\n      // TODO: touch not tested\n      var pos = _this.getTouchPosition(e);\n      _this.valueListener(_this.getDistanceToTrack(pos));\n    });\n    (0, _defineProperty2[\"default\"])(this, \"touchend\", function () {\n      _document[\"default\"].removeEventListener('touchend', _this.touchend);\n      _document[\"default\"].removeEventListener('touchmove', _this.touchmove);\n      _this.toggleMouseOver();\n    });\n    this.vertical = vertical;\n    this.valueListener = valueListener;\n    this.toggleMouseOver = toggleMouseOver;\n    this.track = track;\n    this.setAnchor = setAnchor;\n  }\n  (0, _createClass2[\"default\"])(MouseEventHandler, [{\n    key: \"getMousePos\",\n    value: function getMousePos(e) {\n      return this.vertical ? e.clientY : e.clientX;\n    }\n  }, {\n    key: \"getTouchPosition\",\n    value: function getTouchPosition(e) {\n      return this.vertical ? e.touches[0].clientY : e.touches[0].clientX;\n    }\n  }, {\n    key: \"getDistanceToTrack\",\n    value: function getDistanceToTrack(pos) {\n      if (!this.track.current) {\n        return 0;\n      }\n      var trackRect = this.track.current.getBoundingClientRect();\n      return pos - (this.vertical ? trackRect.bottom : trackRect.left);\n    }\n  }]);\n  return MouseEventHandler;\n}();\nexports[\"default\"] = MouseEventHandler;","map":{"version":3,"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","_classCallCheck2","_createClass2","_defineProperty2","_document","nope","MouseEventHandler","_ref","_this","vertical","_ref$vertical","_ref$valueListener","valueListener","_ref$toggleMouseOver","toggleMouseOver","track","_ref$setAnchor","setAnchor","e","addEventListener","mouseup","pos","getMousePos","removeEventListener","preventDefault","touchend","getTouchPosition","clientY","clientX","touches","current","trackRect","bottom","left"],"sources":["/Users/rohinphukan/Desktop/RefugeeWebsite/node_modules/@kepler.gl/components/src/common/slider/mouse-event.ts"],"sourcesContent":["// Copyright (c) 2022 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\nimport document from 'global/document';\nimport {\n  RefObject,\n  TouchEvent,\n  TouchEventHandler,\n  MouseEventHandler as ReactMouseEventHandler,\n  MouseEvent\n} from 'react';\nimport {StyleRangeSliderType} from './slider';\n\nfunction nope(...args) {}\n\ntype MouseEventHandlerProps = {\n  vertical: boolean;\n  valueListener: (distance: number) => void;\n  toggleMouseOver: () => void;\n  track: RefObject<StyleRangeSliderType>;\n  setAnchor?: null | ((distance: number) => void);\n};\n\nexport default class MouseEventHandler {\n  private vertical: boolean;\n  private valueListener: (distance: number) => void;\n  private toggleMouseOver: () => void;\n  private track: RefObject<StyleRangeSliderType>; // Set correct type\n  private setAnchor: null | ((distance: number) => void); // Set correct type\n\n  constructor({\n    vertical = false,\n    valueListener = nope,\n    toggleMouseOver = nope,\n    track,\n    setAnchor = null\n  }: MouseEventHandlerProps) {\n    this.vertical = vertical;\n    this.valueListener = valueListener;\n    this.toggleMouseOver = toggleMouseOver;\n    this.track = track;\n    this.setAnchor = setAnchor;\n  }\n\n  handleMouseDown: ReactMouseEventHandler = (e: MouseEvent) => {\n    document.addEventListener('mouseup', this.mouseup);\n    document.addEventListener('mousemove', this.mousemove);\n    if (this.setAnchor) {\n      const pos = this.getMousePos(e);\n      this.setAnchor(this.getDistanceToTrack(pos));\n    }\n    this.toggleMouseOver();\n  };\n\n  private getMousePos(e: MouseEvent) {\n    return this.vertical ? e.clientY : e.clientX;\n  }\n\n  private getTouchPosition(e: TouchEvent) {\n    return this.vertical ? e.touches[0].clientY : e.touches[0].clientX;\n  }\n\n  private mouseup = () => {\n    document.removeEventListener('mouseup', this.mouseup);\n    document.removeEventListener('mousemove', this.mousemove);\n    this.toggleMouseOver();\n  };\n\n  private getDistanceToTrack(pos: number) {\n    if (!this.track.current) {\n      return 0;\n    }\n    const trackRect = this.track.current.getBoundingClientRect();\n    return pos - (this.vertical ? trackRect.bottom : trackRect.left);\n  }\n\n  private mousemove = (e: MouseEvent) => {\n    e.preventDefault();\n    const pos = this.getMousePos(e);\n    this.valueListener(this.getDistanceToTrack(pos));\n  };\n\n  handleTouchStart: TouchEventHandler = (e: TouchEvent) => {\n    // TODO: fix touch event\n    document.addEventListener('touchend', this.touchend);\n    document.addEventListener('touchmove', this.touchmove);\n    if (this.setAnchor) {\n      const pos = this.getTouchPosition(e);\n      this.setAnchor(this.getDistanceToTrack(pos));\n    }\n    this.toggleMouseOver();\n  };\n\n  private touchmove = (e: TouchEvent) => {\n    // TODO: touch not tested\n    const pos = this.getTouchPosition(e);\n    this.valueListener(this.getDistanceToTrack(pos));\n  };\n\n  private touchend = () => {\n    document.removeEventListener('touchend', this.touchend);\n    document.removeEventListener('touchmove', this.touchmove);\n    this.toggleMouseOver();\n  };\n}\n"],"mappings":";;;;;;;;;;;;;;;AAoBA;;AApBA;AACA;;AAEA;;AAEA,IAAAA,sBAAA,GAAAC,OAAA;AAEAC,MAAA,CAAAC,cAAA,CAAAC,OAAA;EACAC,KAAA;AACA;AACAD,OAAA;AAEA,IAAAE,gBAAA,GAAAN,sBAAA,CAAAC,OAAA;AAEA,IAAAM,aAAA,GAAAP,sBAAA,CAAAC,OAAA;AAEA,IAAAO,gBAAA,GAAAR,sBAAA,CAAAC,OAAA;AAEA,IAAAQ,SAAA,GAAAT,sBAAA,CAAAC,OAAA;AAAA,SAAAS,KAAA;;;EA0BkD;EACQ,SAAAC,kBAAAC,IAAA;IAExD,IAAAC,KAAA;;MAM2BC,QAAA,GAAAC,aALzB,KAKyB,iBAAAA,aAAA;MALzBC,kBAKyB,GAAAJ,IAAA,CAAAK,aALd;MAKcA,aAAA,GAAAD,kBAJzB,KAIyB,SAAAN,IAAA,GAAAM,kBAAA;MAJzBE,oBAIyB,GAAAN,IAAA,CAAAO,eAAA;MAAAA,eAAA,GAAAD,oBAHzB,KAGyB,SAAAR,IAAA,GAAAQ,oBAAA;MAHzBE,KAAA,GAAAR,IAAA,CAAAQ,KAGyB;MAFzBC,cAAA,GAAAT,IAEyB,CAAAU,SAAA;MAAAA,SAAA,GAAAD,cADzB,KACyB,gBAAAA,cAAA;IAAA,IADzBf,gBACyB,mBAAAK,iBAAA;IAAA,IAAAH,gBAAA;IAAA,IAAAA,gBAAA;IAAA,IAAAA,gBAAA;IAAA,IAAAA,gBAAA;IAAA,IAAAA,gBAAA;IAAA,IAAAA,gBAAA,gDAAAe,CAAA;MAAAd,SAAA,YAAAe,gBAAA,YAAAX,KAAA,CAAAY,OAQe;;;QAGxC,IAAIC,GAAI,GAACb,KAAA,CAAAc,WAAW,CAAAJ,CAAA;;MAElB;;IAEF;IACD,CAhB0B,GAAAf,gBAAA;MAAAC,SAAA,YAAAmB,mBAAA,UA0BT,EAAAf,KAAA,CAAAY,OAAM;;;IAGtB;IACD,CA9B0B,GAAAjB,gBAAA,0CAAAe,CAAA;MAAAA,CAAA,CAAAM,cAAA;;;IA2CzB;IACD,CA5C0B,GAAArB,gBAAA,iDAAAe,CAAA;MAAA;MA+CzBd,SAAA,YAAAe,gBAAA,aAAAX,KAAA,CAAAiB,QAAA;;;QAGA,IAAIJ,GAAI,GAACb,KAAA,CAAAkB,gBAAW,CAAAR,CAAA;;MAElB;;IAEF;IACD,CAvD0B,GAAAf,gBAAA,0CAAAe,CAAA;MAAA;MA0DzB,IAAAG,GAAA,GAAAb,KAAA,CAAAkB,gBAAA,CAAAR,CAAA;;IAEA;IACD,CA7D0B,GAAAf,gBAAA;MAAAC,SAAA,YAAAmB,mBAAA,WA+DR,EAAAf,KAAA,CAAAiB,QAAM;;;IAGvB;IACD,IAnE0B,CAAAhB,QAAA,GAAAA,QAAA;IACzB,KAAKG,aAAW,GAAAA,aAAhB;IACA,KAAKE,eAAL,GAAqBA,eAArB;IACA,KAAKC,KAAA,GAAAA,KAAA;IACL,KAAKE,SAAQ,GAAAA,SAAb;EACA;;;;aAaF,KAAAR,QAAA,GAAAS,CAAA,CAAAS,OAAmC,GAAAT,CAAA,CAAAU,OAAA;IACjC;EACD;;;aAED,KAAAnB,QAAA,GAAAS,CAAA,CAAAW,OAAA,EAAwC,EAAAF,OAAA,GAAAT,CAAA,CAAAW,OAAA,IAAAD,OAAA;IACtC;EACD;;;WAQD,KAAAb,KAAA,CAAAe,OAAA;QACE,OAAK,CAAK;MACR;;MAEF,OAAMT,GAAA,IAAS,IAAG,CAAAZ,QAAW,GAAAsB,SAAQ,CAAAC,MAAA,GAAAD,SAArC,CAAAE,IAAA;IACA;EACD"},"metadata":{},"sourceType":"script","externalDependencies":[]}