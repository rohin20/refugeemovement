{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _awaitAsyncGenerator from \"@babel/runtime/helpers/esm/awaitAsyncGenerator\";\nimport _wrapAsyncGenerator from \"@babel/runtime/helpers/esm/wrapAsyncGenerator\";\nimport _asyncIterator from \"@babel/runtime/helpers/esm/asyncIterator\";\nimport { isBrowser, nodeVersion, toArrayBuffer } from '@loaders.gl/loader-utils';\nexport function makeStreamIterator(stream) {\n  if (isBrowser || nodeVersion >= 10) {\n    if (typeof stream[Symbol.asyncIterator] === 'function') {\n      return makeToArrayBufferIterator(stream);\n    }\n    if (typeof stream.getIterator === 'function') {\n      return stream.getIterator();\n    }\n  }\n  return isBrowser ? makeBrowserStreamIterator(stream) : makeNodeStreamIterator(stream);\n}\nfunction makeToArrayBufferIterator(_x) {\n  return _makeToArrayBufferIterator.apply(this, arguments);\n}\nfunction _makeToArrayBufferIterator() {\n  _makeToArrayBufferIterator = _wrapAsyncGenerator(_regeneratorRuntime.mark(function _callee(asyncIterator) {\n    var _iteratorNormalCompletion, _didIteratorError, _iteratorError, _iterator, _step, _value, chunk;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _iteratorNormalCompletion = true;\n            _didIteratorError = false;\n            _context.prev = 2;\n            _iterator = _asyncIterator(asyncIterator);\n          case 4:\n            _context.next = 6;\n            return _awaitAsyncGenerator(_iterator.next());\n          case 6:\n            _step = _context.sent;\n            _iteratorNormalCompletion = _step.done;\n            _context.next = 10;\n            return _awaitAsyncGenerator(_step.value);\n          case 10:\n            _value = _context.sent;\n            if (_iteratorNormalCompletion) {\n              _context.next = 18;\n              break;\n            }\n            chunk = _value;\n            _context.next = 15;\n            return toArrayBuffer(chunk);\n          case 15:\n            _iteratorNormalCompletion = true;\n            _context.next = 4;\n            break;\n          case 18:\n            _context.next = 24;\n            break;\n          case 20:\n            _context.prev = 20;\n            _context.t0 = _context[\"catch\"](2);\n            _didIteratorError = true;\n            _iteratorError = _context.t0;\n          case 24:\n            _context.prev = 24;\n            _context.prev = 25;\n            if (!(!_iteratorNormalCompletion && _iterator[\"return\"] != null)) {\n              _context.next = 29;\n              break;\n            }\n            _context.next = 29;\n            return _awaitAsyncGenerator(_iterator[\"return\"]());\n          case 29:\n            _context.prev = 29;\n            if (!_didIteratorError) {\n              _context.next = 32;\n              break;\n            }\n            throw _iteratorError;\n          case 32:\n            return _context.finish(29);\n          case 33:\n            return _context.finish(24);\n          case 34:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[2, 20, 24, 34], [25,, 29, 33]]);\n  }));\n  return _makeToArrayBufferIterator.apply(this, arguments);\n}\nfunction makeBrowserStreamIterator(_x2) {\n  return _makeBrowserStreamIterator.apply(this, arguments);\n}\nfunction _makeBrowserStreamIterator() {\n  _makeBrowserStreamIterator = _wrapAsyncGenerator(_regeneratorRuntime.mark(function _callee2(stream) {\n    var reader, _yield$_awaitAsyncGen, done, value;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            reader = stream.getReader();\n            _context2.prev = 1;\n          case 2:\n            if (!true) {\n              _context2.next = 14;\n              break;\n            }\n            _context2.next = 5;\n            return _awaitAsyncGenerator(reader.read());\n          case 5:\n            _yield$_awaitAsyncGen = _context2.sent;\n            done = _yield$_awaitAsyncGen.done;\n            value = _yield$_awaitAsyncGen.value;\n            if (!done) {\n              _context2.next = 10;\n              break;\n            }\n            return _context2.abrupt(\"return\");\n          case 10:\n            _context2.next = 12;\n            return toArrayBuffer(value);\n          case 12:\n            _context2.next = 2;\n            break;\n          case 14:\n            _context2.next = 19;\n            break;\n          case 16:\n            _context2.prev = 16;\n            _context2.t0 = _context2[\"catch\"](1);\n            reader.releaseLock();\n          case 19:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2, null, [[1, 16]]);\n  }));\n  return _makeBrowserStreamIterator.apply(this, arguments);\n}\nfunction makeNodeStreamIterator(_x3) {\n  return _makeNodeStreamIterator.apply(this, arguments);\n}\nfunction _makeNodeStreamIterator() {\n  _makeNodeStreamIterator = _wrapAsyncGenerator(_regeneratorRuntime.mark(function _callee3(stream) {\n    var data;\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.next = 2;\n            return _awaitAsyncGenerator(stream);\n          case 2:\n            stream = _context3.sent;\n          case 3:\n            if (!true) {\n              _context3.next = 15;\n              break;\n            }\n            data = stream.read();\n            if (!(data !== null)) {\n              _context3.next = 9;\n              break;\n            }\n            _context3.next = 8;\n            return toArrayBuffer(data);\n          case 8:\n            return _context3.abrupt(\"continue\", 3);\n          case 9:\n            if (!stream._readableState.ended) {\n              _context3.next = 11;\n              break;\n            }\n            return _context3.abrupt(\"return\");\n          case 11:\n            _context3.next = 13;\n            return _awaitAsyncGenerator(onceReadable(stream));\n          case 13:\n            _context3.next = 3;\n            break;\n          case 15:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n  return _makeNodeStreamIterator.apply(this, arguments);\n}\nfunction onceReadable(_x4) {\n  return _onceReadable.apply(this, arguments);\n}\nfunction _onceReadable() {\n  _onceReadable = _asyncToGenerator(_regeneratorRuntime.mark(function _callee4(stream) {\n    return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            return _context4.abrupt(\"return\", new Promise(function (resolve) {\n              stream.once('readable', resolve);\n            }));\n          case 1:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4);\n  }));\n  return _onceReadable.apply(this, arguments);\n}","map":{"version":3,"names":["isBrowser","nodeVersion","toArrayBuffer","makeStreamIterator","stream","Symbol","asyncIterator","makeToArrayBufferIterator","getIterator","makeBrowserStreamIterator","makeNodeStreamIterator","_callee","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_iterator","_step","_value","chunk","_regeneratorRuntime","wrap","_callee$","_context","prev","next","_asyncIterator","_awaitAsyncGenerator","sent","done","value","t0","finish","stop","_callee2","reader","_yield$_awaitAsyncGen","_callee2$","_context2","getReader","read","abrupt","releaseLock","_callee3","data","_callee3$","_context3","_readableState","ended","onceReadable","_callee4","_callee4$","_context4","Promise","resolve","once"],"sources":["/Users/rohinphukan/Desktop/RefugeeWebsite/node_modules/kepler.gl/node_modules/@loaders.gl/core/src/iterator-utils/make-iterator/stream-iterator.js"],"sourcesContent":["import {isBrowser, nodeVersion, toArrayBuffer} from '@loaders.gl/loader-utils';\n\nexport function makeStreamIterator(stream) {\n  // Hacky test for node version to ensure we don't call bad polyfills\n  if (isBrowser || nodeVersion >= 10) {\n    // NODE 10+: stream is an asyncIterator\n    if (typeof stream[Symbol.asyncIterator] === 'function') {\n      return makeToArrayBufferIterator(stream);\n    }\n\n    // WhatWG: stream is supposed to have a `getIterator` method\n    if (typeof stream.getIterator === 'function') {\n      return stream.getIterator();\n    }\n  }\n\n  return isBrowser ? makeBrowserStreamIterator(stream) : makeNodeStreamIterator(stream);\n}\n\n/** Coerce each chunk to ArrayBuffer */\nasync function* makeToArrayBufferIterator(asyncIterator) {\n  for await (const chunk of asyncIterator) {\n    yield toArrayBuffer(chunk);\n  }\n}\n\n// BROWSER IMPLEMENTATION\n// See https://jakearchibald.com/2017/async-iterators-and-generators/#making-streams-iterate\n\nasync function* makeBrowserStreamIterator(stream) {\n  // In the brower, we first need to get a lock on the stream\n  const reader = stream.getReader();\n\n  try {\n    // eslint-disable-next-line no-constant-condition\n    while (true) {\n      // Read from the stream\n      // value is a Uint8Array\n      const {done, value} = await reader.read();\n      // Exit if we're done\n      if (done) {\n        return;\n      }\n      // Else yield the chunk\n      yield toArrayBuffer(value);\n    }\n  } catch (error) {\n    // TODO - examples makes it look like this should always be called,\n    // but that generates exceptions so only call it if we do not reach the end\n    reader.releaseLock();\n  }\n}\n\n// NODE <10 IMPLEMENTATION\n// See https://github.com/bustle/streaming-iterables, MIT license\n\nasync function* makeNodeStreamIterator(stream) {\n  // Node createStream will return promises to handle http requests\n  stream = await stream;\n\n  // eslint-disable-next-line no-constant-condition\n  while (true) {\n    const data = stream.read();\n    if (data !== null) {\n      yield toArrayBuffer(data);\n      // eslint-disable-next-line no-continue\n      continue;\n    }\n    if (stream._readableState.ended) {\n      return;\n    }\n    await onceReadable(stream);\n  }\n}\n\nasync function onceReadable(stream) {\n  return new Promise(resolve => {\n    stream.once('readable', resolve);\n  });\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}