{"ast":null,"code":"// Copyright (c) 2022 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\nvar _react = _interopRequireWildcard(require(\"react\"));\nvar _lodash = _interopRequireDefault(require(\"lodash.get\"));\nvar _constants = require(\"@kepler.gl/constants\"); /**\n                                                  * A wrapper component in modals contain a image preview of the map with cloud providers\n                                                  * It sets export image size based on provider thumbnail size\n                                                  * @type {React.FunctionComponent<ImageModalContainerProps>}\n                                                  */\nvar ImageModalContainer = function ImageModalContainer(_ref) {\n  var onUpdateImageSetting = _ref.onUpdateImageSetting,\n    cleanupExportImage = _ref.cleanupExportImage,\n    cloudProviders = _ref.cloudProviders,\n    currentProvider = _ref.currentProvider,\n    children = _ref.children;\n  (0, _react.useEffect)(function () {\n    onUpdateImageSetting({\n      exporting: true\n    });\n    return function () {\n      cleanupExportImage();\n    };\n  }, [onUpdateImageSetting, cleanupExportImage]);\n  (0, _react.useEffect)(function () {\n    if (currentProvider && cloudProviders && cloudProviders.length) {\n      var provider = cloudProviders.find(function (p) {\n        return p.name === currentProvider;\n      });\n      if (provider && provider.thumbnail) {\n        onUpdateImageSetting({\n          mapW: (0, _lodash[\"default\"])(provider, ['thumbnail', 'width']) || _constants.MAP_THUMBNAIL_DIMENSION.width,\n          mapH: (0, _lodash[\"default\"])(provider, ['thumbnail', 'height']) || _constants.MAP_THUMBNAIL_DIMENSION.height,\n          ratio: _constants.EXPORT_IMG_RATIOS.CUSTOM,\n          legend: false\n        });\n      }\n    } else {\n      onUpdateImageSetting({\n        mapW: _constants.MAP_THUMBNAIL_DIMENSION.width,\n        mapH: _constants.MAP_THUMBNAIL_DIMENSION.height,\n        ratio: _constants.EXPORT_IMG_RATIOS.CUSTOM,\n        legend: false\n      });\n    }\n  }, [currentProvider, cloudProviders, onUpdateImageSetting]);\n  return /*#__PURE__*/_react[\"default\"].createElement(_react[\"default\"].Fragment, null, children);\n};\nImageModalContainer.defaultProps = {\n  cloudProviders: []\n};\nvar _default = ImageModalContainer;\nexports[\"default\"] = _default;","map":{"version":3,"names":["_interopRequireDefault","require","_interopRequireWildcard","Object","defineProperty","exports","value","_react","_lodash","_constants","ImageModalContainer","_ref","onUpdateImageSetting","cleanupExportImage","cloudProviders","currentProvider","children","useEffect","exporting","length","provider","find","p","name","thumbnail","mapW","MAP_THUMBNAIL_DIMENSION","width","mapH","height","ratio","EXPORT_IMG_RATIOS","CUSTOM","legend","createElement","Fragment","defaultProps","_default"],"sources":["/Users/rohinphukan/Desktop/RefugeeWebsite/node_modules/@kepler.gl/components/src/modals/image-modal-container.tsx"],"sourcesContent":["// Copyright (c) 2022 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\nimport React, {useEffect} from 'react';\nimport get from 'lodash.get';\n\nimport {MAP_THUMBNAIL_DIMENSION, EXPORT_IMG_RATIOS} from '@kepler.gl/constants';\nimport {SetExportImageSettingUpdaterAction} from '@kepler.gl/actions';\nimport {Provider} from '@kepler.gl/cloud-providers';\n\n/** @typedef {import('./image-modal-container').ImageModalContainerProps} ImageModalContainerProps */\n\nexport type ImageModalContainerProps = {\n  cloudProviders?: Provider[];\n  currentProvider?: string | null;\n  onUpdateImageSetting: (newSetting: SetExportImageSettingUpdaterAction['payload']) => void;\n  cleanupExportImage: () => void;\n};\n\n/**\n * A wrapper component in modals contain a image preview of the map with cloud providers\n * It sets export image size based on provider thumbnail size\n * @type {React.FunctionComponent<ImageModalContainerProps>}\n */\nconst ImageModalContainer: React.FC<ImageModalContainerProps> = ({\n  onUpdateImageSetting,\n  cleanupExportImage,\n  cloudProviders,\n  currentProvider,\n  children\n}) => {\n  useEffect(() => {\n    onUpdateImageSetting({exporting: true});\n    return () => {\n      cleanupExportImage();\n    };\n  }, [onUpdateImageSetting, cleanupExportImage]);\n\n  useEffect(() => {\n    if (currentProvider && cloudProviders && cloudProviders.length) {\n      const provider = cloudProviders.find(p => p.name === currentProvider);\n\n      if (provider && provider.thumbnail) {\n        onUpdateImageSetting({\n          mapW: get(provider, ['thumbnail', 'width']) || MAP_THUMBNAIL_DIMENSION.width,\n          mapH: get(provider, ['thumbnail', 'height']) || MAP_THUMBNAIL_DIMENSION.height,\n          ratio: EXPORT_IMG_RATIOS.CUSTOM,\n          legend: false\n        });\n      }\n    } else {\n      onUpdateImageSetting({\n        mapW: MAP_THUMBNAIL_DIMENSION.width,\n        mapH: MAP_THUMBNAIL_DIMENSION.height,\n        ratio: EXPORT_IMG_RATIOS.CUSTOM,\n        legend: false\n      });\n    }\n  }, [currentProvider, cloudProviders, onUpdateImageSetting]);\n\n  return <>{children}</>;\n};\n\nImageModalContainer.defaultProps = {\n  cloudProviders: []\n};\n\nexport default ImageModalContainer;\n"],"mappings":";;;;;;;;;;;AAoBA;;AACA;;AAEA;;AAvBA;AACA;;AAEA;;AAEA,IAAAA,sBAAA,GAAAC,OAAA;AAEA,IAAAC,uBAAA,GAAAD,OAAA;AAEAE,MAAA,CAAAC,cAAA,CAAAC,OAAA;EACAC,KAAA;AACA;AACAD,OAAA;AAEA,IAAAE,MAAA,GAAAL,uBAAA,CAAAD,OAAA;AAEA,IAAAO,OAAA,GAAAR,sBAAA,CAAAC,OAAA;AAEA,IAAAQ,UAAA,GAAAR,OAAA;;AAkBA;AACA;AACA;AACA,IAAAS,mBAAA,YAAAA,oBAAAC,IAAA;EACA,IAAAC,oBAAA,GAAAD,IAAA,CAAAC,oBAAA;IACMC,kBAAuD,GAAGF,IAAA,CAAAE,kBAA1D;IACJC,cAAA,GAAAH,IAKI,CAAAG,cALJ;IACAC,eAAA,GAIIJ,IAAA,CAAAI,eAJJ;IACAC,QAAA,GAAAL,IAGI,CAAAK,QAHJ;EAGI,IAFJT,MAAA,CAAAU,SAEI,cAFJ;IAEIL,oBADJ;MAEAM,SAAA;IACE;IAAsB,mBAAW;MAAjCL,kBAAA;IACA;EACE,IAAAD,oBAAkB,EAAAC,kBAAA;EACnB,IAFDN,MAAA,CAAAU,SAAA;IAFF,IAKIF,eAAA,IAADD,cAAuB,IAAAA,cAL1B,CAAAK,MAAA;MAOA,IAAAC,QAAA,GAAAN,cAAU,CAAMO,IAAA,WAAAC,CAAA;QACV,OAAAA,CAAA,CAAAC,IAAA,KAAeR,eAAf;MACF;MAAsC,IAAtCK,QAAA,IAAAA,QAAA,CAAAI,SAAA;;UAEIC,IAAA,IAAQ,EAAAjB,OAAI,UAAS,GAAzBY,QAAoC,6BAAAX,UAAA,CAAAiB,uBAAA,CAAAC,KAAA;UAClCC,IAAA,MAAApB,OAAA,CAAoB,SAAC,GAAAY,QAAA,8BAAAX,UAAA,CAAAiB,uBAAA,CAAAG,MAAA;UACnBC,KAAI,EAAErB,UAAA,CAAAsB,iBAAI,CAAAC,MAAW;UACrBC,MAAM;QACN;MACA;IAJmB,OAArB;MAMDrB,oBAAA;QAVHa,IAWO,EAAAhB,UAAA,CAAAiB,uBAAA,CAAAC,KAAA;QACLC,IAAA,EAAAnB,UAAA,CAAAiB,uBAAqB,CAAAG,MAAA;QACnBC,KAAI,EAAErB,UAAA,CAAAsB,iBAAA,CAAAC,MAAwB;QAC9BC,MAAM;MACN;IACA;EAJmB,IAAAlB,eAArB,EAAAD,cAAA,EAAAF,oBAAA;EAMD,oBAAAL,MAAA,YAAA2B,aAAA,CAAA3B,MAAA,YAAA4B,QAAA,QAAAnB,QAAA;AACF;AAGFN,mBArCD,CAAA0B,YAAA;;AAuCA;AACE,IAAAC,QAAA,GAAA3B,mBAAgB;AADiBL,OAAnC,cAAAgC,QAAA"},"metadata":{},"sourceType":"script","externalDependencies":[]}