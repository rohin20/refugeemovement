{"ast":null,"code":"import assert from '../env-utils/assert';\nvar workerURLCache = new Map();\nexport function getWorkerURL(workerSource) {\n  var workerName = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'Worker';\n  assert(typeof workerSource === 'string', 'worker source');\n  if (workerSource.startsWith('url(') && workerSource.endsWith(')')) {\n    var workerUrl = workerSource.match(/^url\\((.*)\\)$/)[1];\n    if (workerUrl && !workerUrl.startsWith('http')) {\n      return workerUrl;\n    }\n    workerSource = buildScript(workerUrl);\n  }\n  var workerURL = workerURLCache.get(workerSource);\n  if (!workerURL) {\n    var blob = new Blob([workerSource], {\n      type: 'application/javascript'\n    });\n    workerURL = URL.createObjectURL(blob);\n    workerURLCache.set(workerSource, workerURL);\n  }\n  return workerURL;\n}\nfunction buildScript(workerUrl) {\n  return \"try {\\n  importScripts('\".concat(workerUrl, \"');\\n} catch (error) {\\n  console.error(error);\\n}\");\n}","map":{"version":3,"names":["assert","workerURLCache","Map","getWorkerURL","workerSource","workerName","arguments","length","undefined","startsWith","endsWith","workerUrl","match","buildScript","workerURL","get","blob","Blob","type","URL","createObjectURL","set","concat"],"sources":["/Users/rohinphukan/Desktop/RefugeeWebsite/node_modules/kepler.gl/node_modules/@loaders.gl/loader-utils/src/lib/worker-utils/get-worker-url.js"],"sourcesContent":["/* global URL, Blob */\nimport assert from '../env-utils/assert';\n\nconst workerURLCache = new Map();\n\n// Creates a URL from worker source that can be used to create `Worker` instances\n// Packages (and then caches) the result of `webworkify` as an \"Object URL\"\nexport function getWorkerURL(workerSource, workerName = 'Worker') {\n  assert(typeof workerSource === 'string', 'worker source');\n\n  // CASE: url(./worker.js)\n  // This pattern is used to differentiate worker urls from worker source code\n  // Load from url is needed for testing, when using Webpack & webworker target\n  if (workerSource.startsWith('url(') && workerSource.endsWith(')')) {\n    const workerUrl = workerSource.match(/^url\\((.*)\\)$/)[1];\n\n    // A local script url, we can use it to initialize a Worker directly\n    if (workerUrl && !workerUrl.startsWith('http')) {\n      return workerUrl;\n    }\n\n    // Per spec, worker cannot be initialized with a script from a different origin\n    // However a local worker script can still import scripts from other origins,\n    // so we simply build a wrapper script\n    workerSource = buildScript(workerUrl);\n  }\n\n  let workerURL = workerURLCache.get(workerSource);\n\n  if (!workerURL) {\n    // NOTE: webworkify was previously used\n    // const blob = webworkify(workerSource, {bare: true});\n    const blob = new Blob([workerSource], {type: 'application/javascript'});\n    workerURL = URL.createObjectURL(blob);\n    workerURLCache.set(workerSource, workerURL);\n  }\n\n  return workerURL;\n}\n\n// Only use trusted sources!\nfunction buildScript(workerUrl) {\n  return `\\\ntry {\n  importScripts('${workerUrl}');\n} catch (error) {\n  console.error(error);\n}`;\n}\n"],"mappings":"AACA,OAAOA,MAAP,MAAmB,qBAAnB;AAEA,IAAMC,cAAc,GAAG,IAAIC,GAAJ,EAAvB;AAIA,OAAO,SAASC,YAATA,CAAsBC,YAAtB,EAA2D;EAAA,IAAvBC,UAAuB,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAV,QAAU;EAChEN,MAAM,CAAC,OAAOI,YAAP,KAAwB,QAAzB,EAAmC,eAAnC,CAAN;EAKA,IAAIA,YAAY,CAACK,UAAb,CAAwB,MAAxB,KAAmCL,YAAY,CAACM,QAAb,CAAsB,GAAtB,CAAvC,EAAmE;IACjE,IAAMC,SAAS,GAAGP,YAAY,CAACQ,KAAb,CAAmB,eAAnB,EAAoC,CAApC,CAAlB;IAGA,IAAID,SAAS,IAAI,CAACA,SAAS,CAACF,UAAV,CAAqB,MAArB,CAAlB,EAAgD;MAC9C,OAAOE,SAAP;IACD;IAKDP,YAAY,GAAGS,WAAW,CAACF,SAAD,CAA1B;EACD;EAED,IAAIG,SAAS,GAAGb,cAAc,CAACc,GAAf,CAAmBX,YAAnB,CAAhB;EAEA,IAAI,CAACU,SAAL,EAAgB;IAGd,IAAME,IAAI,GAAG,IAAIC,IAAJ,CAAS,CAACb,YAAD,CAAT,EAAyB;MAACc,IAAI,EAAE;IAAP,CAAzB,CAAb;IACAJ,SAAS,GAAGK,GAAG,CAACC,eAAJ,CAAoBJ,IAApB,CAAZ;IACAf,cAAc,CAACoB,GAAf,CAAmBjB,YAAnB,EAAiCU,SAAjC;EACD;EAED,OAAOA,SAAP;AACD;AAGD,SAASD,WAATA,CAAqBF,SAArB,EAAgC;EAC9B,kCAAAW,MAAA,CAEiBX,SAFjB;AAMD"},"metadata":{},"sourceType":"module","externalDependencies":[]}