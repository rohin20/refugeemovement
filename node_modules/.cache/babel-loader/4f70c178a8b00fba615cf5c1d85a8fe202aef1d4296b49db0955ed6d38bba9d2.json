{"ast":null,"code":"// Copyright (c) 2022 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getSupportedFilterFields = getSupportedFilterFields;\nexports[\"default\"] = void 0;\nvar _react = _interopRequireWildcard(require(\"react\"));\nvar _styledComponents = require(\"../../common/styled-components\");\nvar _filterPanelHeader = _interopRequireDefault(require(\"../../side-panel/filter-panel/filter-panel-header\"));\nvar _sourceDataSelector = _interopRequireDefault(require(\"../../side-panel/common/source-data-selector\"));\nvar _fieldSelector = _interopRequireDefault(require(\"../../common/field-selector\"));\nNewFilterPanelFactory.deps = [_filterPanelHeader[\"default\"], _sourceDataSelector[\"default\"], _fieldSelector[\"default\"]];\nfunction getSupportedFilterFields(supportedFilterTypes, fields) {\n  return supportedFilterTypes ? fields.filter(function (field) {\n    return supportedFilterTypes.includes(field.type);\n  }) : fields;\n}\nfunction NewFilterPanelFactory(FilterPanelHeader, SourceDataSelector, FieldSelector) {\n  var NewFilterPanel = /*#__PURE__*/_react[\"default\"].memo(function (_ref) {\n    var idx = _ref.idx,\n      filter = _ref.filter,\n      datasets = _ref.datasets,\n      allAvailableFields = _ref.allAvailableFields,\n      setFilter = _ref.setFilter,\n      removeFilter = _ref.removeFilter;\n    var onFieldSelector = (0, _react.useCallback)(function (field) {\n      return setFilter(idx, 'name', field.name);\n    }, [idx, setFilter]);\n    var onSourceDataSelector = (0, _react.useCallback)(function (value) {\n      return setFilter(idx, 'dataId', value);\n    }, [idx, setFilter]);\n    var dataset = datasets[filter.dataId[0]];\n    var supportedFields = (0, _react.useMemo)(function () {\n      return getSupportedFilterFields(dataset.supportedFilterTypes, allAvailableFields);\n    }, [dataset.supportedFilterTypes, allAvailableFields]);\n    return /*#__PURE__*/_react[\"default\"].createElement(_react[\"default\"].Fragment, null, /*#__PURE__*/_react[\"default\"].createElement(FilterPanelHeader, {\n      datasets: [dataset],\n      filter: filter,\n      removeFilter: removeFilter\n    }, /*#__PURE__*/_react[\"default\"].createElement(FieldSelector, {\n      inputTheme: \"secondary\",\n      fields: supportedFields,\n      value: Array.isArray(filter.name) ? filter.name[0] : filter.name,\n      erasable: false,\n      onSelect: onFieldSelector\n    })), /*#__PURE__*/_react[\"default\"].createElement(_styledComponents.StyledFilterContent, {\n      className: \"filter-panel__content\"\n    }, Object.keys(datasets).length > 1 && /*#__PURE__*/_react[\"default\"].createElement(SourceDataSelector, {\n      inputTheme: \"secondary\",\n      datasets: datasets,\n      disabled: filter.freeze,\n      dataId: filter.dataId,\n      onSelect: onSourceDataSelector\n    })));\n  });\n  NewFilterPanel.displayName = 'NewFilterPanel';\n  return NewFilterPanel;\n}\nvar _default = NewFilterPanelFactory;\nexports[\"default\"] = _default;","map":{"version":3,"names":["_interopRequireDefault","require","_interopRequireWildcard","Object","defineProperty","exports","value","getSupportedFilterFields","_react","_styledComponents","_filterPanelHeader","_sourceDataSelector","_fieldSelector","NewFilterPanelFactory","deps","supportedFilterTypes","fields","filter","field","includes","type","NewFilterPanel","memo","_ref","idx","datasets","allAvailableFields","setFilter","removeFilter","onFieldSelector","useCallback","name","onSourceDataSelector","dataset","dataId","supportedFields","useMemo","createElement","Fragment","FilterPanelHeader","FieldSelector","inputTheme","Array","isArray","erasable","onSelect","StyledFilterContent","className","keys","length","SourceDataSelector","disabled","freeze","_default"],"sources":["/Users/rohinphukan/Desktop/RefugeeWebsite/node_modules/@kepler.gl/components/src/filters/filter-panels/new-filter-panel.tsx"],"sourcesContent":["// Copyright (c) 2022 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\nimport React, {useCallback, useMemo} from 'react';\nimport {StyledFilterContent} from '../../common/styled-components';\nimport FilterPanelHeaderFactory from '../../side-panel/filter-panel/filter-panel-header';\nimport SourceDataSelectorFactory from '../../side-panel/common/source-data-selector';\nimport FieldSelectorFactory from '../../common/field-selector';\nimport {FilterPanelComponent} from './types';\nimport {KeplerTable} from '@kepler.gl/table';\nimport {Field, FilterBase, LineChart} from '@kepler.gl/types';\n\nNewFilterPanelFactory.deps = [\n  FilterPanelHeaderFactory,\n  SourceDataSelectorFactory,\n  FieldSelectorFactory\n];\n\nexport function getSupportedFilterFields(\n  supportedFilterTypes: KeplerTable['supportedFilterTypes'],\n  fields: Field[]\n) {\n  return supportedFilterTypes\n    ? fields.filter(field => supportedFilterTypes.includes(field.type))\n    : fields;\n}\n\nfunction NewFilterPanelFactory(\n  FilterPanelHeader: ReturnType<typeof FilterPanelHeaderFactory>,\n  SourceDataSelector: ReturnType<typeof SourceDataSelectorFactory>,\n  FieldSelector: ReturnType<typeof FieldSelectorFactory>\n) {\n  const NewFilterPanel: FilterPanelComponent<FilterBase<LineChart>> = React.memo(\n    ({idx, filter, datasets, allAvailableFields, setFilter, removeFilter}) => {\n      const onFieldSelector = useCallback(field => setFilter(idx, 'name', field.name), [\n        idx,\n        setFilter\n      ]);\n\n      const onSourceDataSelector = useCallback(value => setFilter(idx, 'dataId', value), [\n        idx,\n        setFilter\n      ]);\n\n      const dataset: KeplerTable = datasets[filter.dataId[0]];\n      const supportedFields = useMemo(\n        () => getSupportedFilterFields(dataset.supportedFilterTypes, allAvailableFields),\n        [dataset.supportedFilterTypes, allAvailableFields]\n      );\n\n      return (\n        <>\n          <FilterPanelHeader datasets={[dataset]} filter={filter} removeFilter={removeFilter}>\n            <FieldSelector\n              inputTheme=\"secondary\"\n              fields={supportedFields}\n              value={Array.isArray(filter.name) ? filter.name[0] : filter.name}\n              erasable={false}\n              onSelect={onFieldSelector}\n            />\n          </FilterPanelHeader>\n          <StyledFilterContent className=\"filter-panel__content\">\n            {Object.keys(datasets).length > 1 && (\n              <SourceDataSelector\n                inputTheme=\"secondary\"\n                datasets={datasets}\n                disabled={filter.freeze}\n                dataId={filter.dataId}\n                onSelect={onSourceDataSelector}\n              />\n            )}\n          </StyledFilterContent>\n        </>\n      );\n    }\n  );\n\n  NewFilterPanel.displayName = 'NewFilterPanel';\n\n  return NewFilterPanel;\n}\n\nexport default NewFilterPanelFactory;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}