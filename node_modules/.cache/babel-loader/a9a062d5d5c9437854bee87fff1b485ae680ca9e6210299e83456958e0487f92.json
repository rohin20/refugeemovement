{"ast":null,"code":"'use strict';\n\n// install ES6 Promise polyfill\nrequire('./promise');\nvar interceptor = require('rest/interceptor');\nvar linkParser = require('rest/parsers/rfc5988');\nvar url = require('url');\nvar querystring = require('querystring');\nvar paginator = interceptor({\n  success: function success(response, config) {\n    var link = response && response.headers && response.headers.Link;\n    var client = response && response.request && response.request.originator;\n    if (link) {\n      var nextLink = linkParser.parse(link).filter(function (link) {\n        return link.rel === 'next';\n      })[0];\n      if (nextLink) {\n        response.nextPage = function (callback) {\n          var linkParts = url.parse(nextLink.href);\n          var linkQuery = querystring.parse(linkParts.query);\n          linkQuery.access_token = linkQuery.access_token || config.access_token;\n          linkParts.search = querystring.stringify(linkQuery);\n          return client({\n            path: url.format(linkParts),\n            callback: callback\n          });\n        };\n      }\n    }\n    return response;\n  }\n});\nmodule.exports = paginator;","map":{"version":3,"names":["require","interceptor","linkParser","url","querystring","paginator","success","response","config","link","headers","Link","client","request","originator","nextLink","parse","filter","rel","nextPage","callback","linkParts","href","linkQuery","query","access_token","search","stringify","path","format","module","exports"],"sources":["/Users/rohinphukan/Desktop/RefugeeWebsite/node_modules/mapbox/lib/paginator.js"],"sourcesContent":["'use strict';\n\n// install ES6 Promise polyfill\nrequire('./promise');\n\nvar interceptor = require('rest/interceptor');\nvar linkParser = require('rest/parsers/rfc5988');\nvar url = require('url');\nvar querystring = require('querystring');\n\nvar paginator = interceptor({\n  success: function (response, config) {\n    var link = response && response.headers && response.headers.Link;\n    var client = response && response.request && response.request.originator;\n\n    if (link) {\n      var nextLink = linkParser.parse(link).filter(function (link) {\n        return link.rel === 'next';\n      })[0];\n\n      if (nextLink) {\n        response.nextPage = function (callback) {\n          var linkParts = url.parse(nextLink.href);\n          var linkQuery = querystring.parse(linkParts.query);\n          linkQuery.access_token = linkQuery.access_token || config.access_token;\n          linkParts.search = querystring.stringify(linkQuery);\n          return client({\n            path: url.format(linkParts),\n            callback: callback\n          });\n        };\n      }\n    }\n\n    return response;\n  }\n});\n\nmodule.exports = paginator;\n"],"mappings":"AAAA,YAAY;;AAEZ;AACAA,OAAO,CAAC,WAAW,CAAC;AAEpB,IAAIC,WAAW,GAAGD,OAAO,CAAC,kBAAkB,CAAC;AAC7C,IAAIE,UAAU,GAAGF,OAAO,CAAC,sBAAsB,CAAC;AAChD,IAAIG,GAAG,GAAGH,OAAO,CAAC,KAAK,CAAC;AACxB,IAAII,WAAW,GAAGJ,OAAO,CAAC,aAAa,CAAC;AAExC,IAAIK,SAAS,GAAGJ,WAAW,CAAC;EAC1BK,OAAO,EAAE,SAAAA,QAAUC,QAAQ,EAAEC,MAAM,EAAE;IACnC,IAAIC,IAAI,GAAGF,QAAQ,IAAIA,QAAQ,CAACG,OAAO,IAAIH,QAAQ,CAACG,OAAO,CAACC,IAAI;IAChE,IAAIC,MAAM,GAAGL,QAAQ,IAAIA,QAAQ,CAACM,OAAO,IAAIN,QAAQ,CAACM,OAAO,CAACC,UAAU;IAExE,IAAIL,IAAI,EAAE;MACR,IAAIM,QAAQ,GAAGb,UAAU,CAACc,KAAK,CAACP,IAAI,CAAC,CAACQ,MAAM,CAAC,UAAUR,IAAI,EAAE;QAC3D,OAAOA,IAAI,CAACS,GAAG,KAAK,MAAM;MAC5B,CAAC,CAAC,CAAC,CAAC,CAAC;MAEL,IAAIH,QAAQ,EAAE;QACZR,QAAQ,CAACY,QAAQ,GAAG,UAAUC,QAAQ,EAAE;UACtC,IAAIC,SAAS,GAAGlB,GAAG,CAACa,KAAK,CAACD,QAAQ,CAACO,IAAI,CAAC;UACxC,IAAIC,SAAS,GAAGnB,WAAW,CAACY,KAAK,CAACK,SAAS,CAACG,KAAK,CAAC;UAClDD,SAAS,CAACE,YAAY,GAAGF,SAAS,CAACE,YAAY,IAAIjB,MAAM,CAACiB,YAAY;UACtEJ,SAAS,CAACK,MAAM,GAAGtB,WAAW,CAACuB,SAAS,CAACJ,SAAS,CAAC;UACnD,OAAOX,MAAM,CAAC;YACZgB,IAAI,EAAEzB,GAAG,CAAC0B,MAAM,CAACR,SAAS,CAAC;YAC3BD,QAAQ,EAAEA;UACZ,CAAC,CAAC;QACJ,CAAC;MACH;IACF;IAEA,OAAOb,QAAQ;EACjB;AACF,CAAC,CAAC;AAEFuB,MAAM,CAACC,OAAO,GAAG1B,SAAS"},"metadata":{},"sourceType":"script","externalDependencies":[]}