{"ast":null,"code":"// Copyright (c) 2022 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.LoadDataModalFactory = LoadDataModalFactory;\nexports[\"default\"] = void 0;\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\nvar _taggedTemplateLiteral2 = _interopRequireDefault(require(\"@babel/runtime/helpers/taggedTemplateLiteral\"));\nvar _react = _interopRequireWildcard(require(\"react\"));\nvar _styledComponents = _interopRequireDefault(require(\"styled-components\"));\nvar _lodash = _interopRequireDefault(require(\"lodash.get\"));\nvar _reactIntl = require(\"react-intl\");\nvar _fileUpload = _interopRequireDefault(require(\"../common/file-uploader/file-upload\"));\nvar _loadStorageMap = _interopRequireDefault(require(\"./load-storage-map\"));\nvar _modalTabs = _interopRequireDefault(require(\"./modal-tabs\"));\nvar _loadingDialog = _interopRequireDefault(require(\"./loading-dialog\"));\nvar _constants = require(\"@kepler.gl/constants\");\nvar _templateObject;\n\n/** @typedef {import('./load-data-modal').LoadDataModalProps} LoadDataModalProps */\nvar StyledLoadDataModal = _styledComponents[\"default\"].div.attrs({\n  className: 'load-data-modal'\n})(_templateObject || (_templateObject = (0, _taggedTemplateLiteral2[\"default\"])([\"\\n  padding: \", \";\\n  min-height: 440px;\\n  display: flex;\\n  flex-direction: column;\\n\"])), function (props) {\n  return props.theme.modalPadding;\n});\nvar noop = function noop() {};\nvar getDefaultMethod = function getDefaultMethod() {\n  var methods = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  return Array.isArray(methods) ? (0, _lodash[\"default\"])(methods, [0]) : null;\n};\nLoadDataModalFactory.deps = [_modalTabs[\"default\"], _fileUpload[\"default\"], _loadStorageMap[\"default\"]];\nfunction LoadDataModalFactory(ModalTabs, FileUpload, LoadStorageMap) {\n  /** @type {React.FunctionComponent<LoadDataModalProps>} */\n  var LoadDataModal = function LoadDataModal(props) {\n    var intl = (0, _reactIntl.useIntl)();\n    var loadingMethods = props.loadingMethods,\n      isCloudMapLoading = props.isCloudMapLoading;\n    var _useState = (0, _react.useState)(getDefaultMethod(loadingMethods)),\n      _useState2 = (0, _slicedToArray2[\"default\"])(_useState, 2),\n      currentMethod = _useState2[0],\n      toggleMethod = _useState2[1];\n    var ElementType = currentMethod === null || currentMethod === void 0 ? void 0 : currentMethod.elementType;\n    return /*#__PURE__*/_react[\"default\"].createElement(StyledLoadDataModal, null, /*#__PURE__*/_react[\"default\"].createElement(ModalTabs, {\n      currentMethod: currentMethod === null || currentMethod === void 0 ? void 0 : currentMethod.id,\n      loadingMethods: loadingMethods,\n      toggleMethod: toggleMethod\n    }), isCloudMapLoading ? /*#__PURE__*/_react[\"default\"].createElement(_loadingDialog[\"default\"], {\n      size: 64\n    }) : ElementType && /*#__PURE__*/_react[\"default\"].createElement(ElementType, (0, _extends2[\"default\"])({\n      key: currentMethod === null || currentMethod === void 0 ? void 0 : currentMethod.id,\n      intl: intl\n    }, props)));\n  };\n  LoadDataModal.defaultProps = {\n    onFileUpload: noop,\n    fileLoading: false,\n    loadingMethods: [{\n      id: _constants.LOADING_METHODS.upload,\n      label: 'modal.loadData.upload',\n      elementType: FileUpload\n    }, {\n      id: _constants.LOADING_METHODS.storage,\n      label: 'modal.loadData.storage',\n      elementType: LoadStorageMap\n    }]\n  };\n  return LoadDataModal;\n}\nvar _default = LoadDataModalFactory;\nexports[\"default\"] = _default;","map":{"version":3,"names":["_interopRequireDefault","require","_interopRequireWildcard","Object","defineProperty","exports","_extends2","_slicedToArray2","_react","_styledComponents","_lodash","_loadStorageMap","_modalTabs","_loadingDialog","_constants","_templateObject","StyledLoadDataModal","div","attrs","_taggedTemplateLiteral2","props","theme","modalPadding","getDefaultMethod","methods","arguments","length","undefined","Array","isArray","LoadDataModalFactory","deps","_fileUpload","ModalTabs","FileUpload","LoadStorageMap","LoadDataModal","intl","_reactIntl","useIntl","isCloudMapLoading","_useState","useState","loadingMethods","_useState2","currentMethod","toggleMethod","ElementType","elementType","createElement","id","size"],"sources":["/Users/rohinphukan/Desktop/RefugeeWebsite/node_modules/@kepler.gl/components/src/modals/load-data-modal.tsx"],"sourcesContent":["// Copyright (c) 2022 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\nimport React, {useState} from 'react';\nimport styled from 'styled-components';\nimport get from 'lodash.get';\nimport {IntlShape, useIntl} from 'react-intl';\n\nimport FileUploadFactory from '../common/file-uploader/file-upload';\nimport LoadStorageMapFactory from './load-storage-map';\nimport ModalTabsFactory from './modal-tabs';\nimport LoadingDialog from './loading-dialog';\n\nimport {LOADING_METHODS} from '@kepler.gl/constants';\nimport {FileLoading, FileLoadingProgress, LoadFiles} from '@kepler.gl/types';\nimport {Provider} from '@kepler.gl/cloud-providers';\nimport {SetCloudProviderPayload, ProviderActions, ActionHandler} from '@kepler.gl/actions';\n\n/** @typedef {import('./load-data-modal').LoadDataModalProps} LoadDataModalProps */\n\nconst StyledLoadDataModal = styled.div.attrs({\n  className: 'load-data-modal'\n})`\n  padding: ${props => props.theme.modalPadding};\n  min-height: 440px;\n  display: flex;\n  flex-direction: column;\n`;\n\nconst noop = () => {};\nconst getDefaultMethod = <T,>(methods: T[] = []) =>\n  Array.isArray(methods) ? get(methods, [0]) : null;\nexport interface LoadingMethod {\n  id: string;\n  label: string;\n  elementType: React.ComponentType<any>;\n  tabElementType?: React.ComponentType<{onClick: React.MouseEventHandler; intl: IntlShape}>;\n}\n\ntype LoadDataModalProps = {\n  // call backs\n  onFileUpload: (files: File[]) => void;\n  onLoadCloudMap: (provider: any, vis: any) => void;\n  fileLoading: FileLoading | false;\n  loadingMethods?: LoadingMethod[];\n  /** A list of names of supported formats suitable to present to user */\n  fileFormatNames: string[];\n  /** A list of typically 3 letter extensions (without '.') for file matching */\n  fileExtensions: string[];\n  isCloudMapLoading: boolean;\n  /** Set to true if app wants to do its own file filtering */\n  disableExtensionFilter?: boolean;\n  onClose?: (...args: any) => any;\n  cloudProviders?: Provider[];\n\n  onSetCloudProvider: (provider: SetCloudProviderPayload) => void;\n  getSavedMaps: ActionHandler<typeof ProviderActions['getSavedMaps']>;\n  loadFiles: LoadFiles;\n  fileLoadingProgress: FileLoadingProgress;\n};\n\nLoadDataModalFactory.deps = [ModalTabsFactory, FileUploadFactory, LoadStorageMapFactory];\n\nexport function LoadDataModalFactory(\n  ModalTabs: ReturnType<typeof ModalTabsFactory>,\n  FileUpload: ReturnType<typeof FileUploadFactory>,\n  LoadStorageMap: ReturnType<typeof LoadStorageMapFactory>\n) {\n  /** @type {React.FunctionComponent<LoadDataModalProps>} */\n  const LoadDataModal: React.FC<LoadDataModalProps> = props => {\n    const intl = useIntl();\n    const {loadingMethods, isCloudMapLoading} = props;\n    const [currentMethod, toggleMethod] = useState(getDefaultMethod(loadingMethods));\n\n    const ElementType = currentMethod?.elementType;\n\n    return (\n      <StyledLoadDataModal>\n        <ModalTabs\n          currentMethod={currentMethod?.id}\n          loadingMethods={loadingMethods}\n          toggleMethod={toggleMethod}\n        />\n        {isCloudMapLoading ? (\n          <LoadingDialog size={64} />\n        ) : (\n          ElementType && <ElementType key={currentMethod?.id} intl={intl} {...props} />\n        )}\n      </StyledLoadDataModal>\n    );\n  };\n\n  LoadDataModal.defaultProps = {\n    onFileUpload: noop,\n    fileLoading: false,\n    loadingMethods: [\n      {\n        id: LOADING_METHODS.upload,\n        label: 'modal.loadData.upload',\n        elementType: FileUpload\n      },\n      {\n        id: LOADING_METHODS.storage,\n        label: 'modal.loadData.storage',\n        elementType: LoadStorageMap\n      }\n    ]\n  };\n\n  return LoadDataModal;\n}\n\nexport default LoadDataModalFactory;\n"],"mappings":";;;;;;;;;;;;;;;;;;AAoBA;;AACA;;AACA,IAAAA,sBAAA,GAAAC,OAAA;AACA,IAAAC,uBAAA,GAAAD,OAAA;AAEAE,MAAA,CAAAC,cAAA,CAAAC,OAAA;;AACA;;AACAA,OAAA;AACA,IAAAC,SAAA,GAAAN,sBAAA,CAAAC,OAAA;AAEA,IAAAM,eAAA,GAAAP,sBAAA,CAAAC,OAAA;;AAKA,IAAAO,MAAA,GAAAN,uBAAA,CAAAD,OAAA;AAGE,IAAAQ,iBAAW,GAAAT,sBAAA,CAAAC,OAAA;AAEK,IAAAS,OAAI,GAAKV,sBAAT,CAAAC,OAAA;;;AAOO,IAAAU,eAAA,GAAAX,sBAAA,CAAAC,OAAA;AAAA,IAAzBW,UAAA,GAAAZ,sBAAA,CAAAC,OAAA;AA+BA,IAAAY,cAAA,GAAqBb,sBAAQ,CAAAC,OAAD,CAAmB;AAExC,IAAAa,UAAS,GAAAb,OAAA,uBAEd;AAIA,IAAAc,eAAiD;;AAAY;AAAA,IAAAC,mBAEpC,GAFoCP,iBAEpC,UAFoC,EAAAQ,GAAA,CAAAC,KAAA;;AAAA,GAAAH,eAAA,KAGrBA,eAAA,GAAS,IAAAI,uBAAiB,UAHL,4GAAAC,KAAA;EAAA,OAAAA,KAAA,CAAAC,KAAA,CAAAC,YAAA;AAAA;;AAO3D,IAAAC,gBAAA,YACEA,iBAAA;EAEI,IAAAC,OAAA,GAAAC,SAAe,CAAAC,MAAA,GAAF,KAAAD,SAAE,QAAAE,SAAF,GAAAF,SAAA,MAAE;EACf,OAAAG,KAAA,CAAAC,OAAgB,CAAAL,OAAA,MAFlB,EAAAd,OAAA,aAAAc,OAAA;AAGE;AAGeM,oBAAM,CAAAC,IAAA,IAAAnB,UAAA,aAAAoB,WAAA,aAAArB,eAAA;AAEO,SAAGmB,qBAAAG,SAAE,EAAAC,UAAF,EAAAC,cAAA;EAAqB;EAArC,IAAAC,aAVrB,YAAAA,cAAAhB,KAAA;IAPF,IAAAiB,IAAA,OAAAC,UAAA,CAAAC,OAAA;;MAuBAC,iBAAc,GAAdpB,KAA6B,CAAAoB,iBAAA;IAE3B,IAAAC,SAAa,KAFc,EAAAjC,MAAA,CAAAkC,QAAA,EAAAnB,gBAAA,CAAAoB,cAAA;MAG3BC,UAAc,GACZ,IAAArC,eAAA,aAAAkC,SAAA;MACII,aAAE,GAAAD,UAAA,GAAgB;MACpBE,YAAO,GAAAF,UAAA,GAFT;IAAA,IAKAG,WAAA,GAAAF,aAAA,aAAAA,aAAA,uBAAAA,aAAA,CAAAG,WAAA;IACE,OAAI,aAAAxC,MAAA,UAAgB,EAAAyC,aADtB,CAAAjC,mBAAA,qBAAAR,MAAA,YAAAyC,aAAA,CAAAhB,SAAA;MAEEY,aAAO,EAAAA,aAAA,KAFT,QAAAA,aAAA,uBAAAA,aAAA,CAAAK,EAAA;MAGEP,cAAa,EAAAA,cAAA;MATDG,YAAA,EAAAA;IAHlB,IAAAN,iBAAA,gBAAAhC,MAAA,YAAAyC,aAAA,CAAApC,cAAA;MAiBAsC,IAAO;IACR,KAAAJ,WAAA,iBAAAvC,MAAA,YAAAyC,aAAA,CAAAF,WAAA,MAAAzC,SAAA"},"metadata":{},"sourceType":"script","externalDependencies":[]}