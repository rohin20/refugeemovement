{"ast":null,"code":"// Copyright (c) 2022 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = exports.getChildPos = void 0;\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\nvar _react = _interopRequireWildcard(require(\"react\"));\nvar _lodash = _interopRequireDefault(require(\"lodash.debounce\"));\nvar _lodash2 = _interopRequireDefault(require(\"lodash.isequal\"));\nvar _exenv = require(\"exenv\");\nvar _styledComponents = require(\"styled-components\");\nvar _context = require(\"../context\");\nvar _reactModal = _interopRequireDefault(require(\"react-modal\"));\nvar _window = _interopRequireDefault(require(\"global/window\"));\nvar _styles = require(\"@kepler.gl/styles\");\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n  return function _createSuperInternal() {\n    var Super = (0, _getPrototypeOf2[\"default\"])(Derived),\n      result;\n    if (hasNativeReflectConstruct) {\n      var NewTarget = (0, _getPrototypeOf2[\"default\"])(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return (0, _possibleConstructorReturn2[\"default\"])(this, result);\n  };\n}\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        (0, _defineProperty2[\"default\"])(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n  return target;\n}\nvar listeners = {};\nvar startListening = function startListening() {\n  return Object.keys(listeners).forEach(function (key) {\n    return listeners[key]();\n  });\n};\nvar getPageOffset = function getPageOffset() {\n  return {\n    x: _window[\"default\"].pageXOffset !== undefined ? _window[\"default\"].pageXOffset : (document.documentElement || document.body.parentNode || document.body).scrollLeft,\n    y: _window[\"default\"].pageYOffset !== undefined ? _window[\"default\"].pageYOffset : (document.documentElement || document.body.parentNode || document.body).scrollTop\n  };\n};\nvar addEventListeners = function addEventListeners() {\n  if (document && document.body) document.body.addEventListener('mousewheel', (0, _lodash[\"default\"])(startListening, 100, {\n    leading: true\n  }));\n  _window[\"default\"].addEventListener('resize', (0, _lodash[\"default\"])(startListening, 50, {\n    leading: true\n  }));\n};\nvar getChildPos = function getChildPos(_ref) {\n  var offsets = _ref.offsets,\n    rect = _ref.rect,\n    childRect = _ref.childRect,\n    pageOffset = _ref.pageOffset,\n    padding = _ref.padding;\n  var topOffset = offsets.topOffset,\n    leftOffset = offsets.leftOffset,\n    rightOffset = offsets.rightOffset;\n  var anchorLeft = leftOffset !== undefined;\n  var pos = _objectSpread({\n    top: pageOffset.y + rect.top + (topOffset || 0)\n  }, anchorLeft ? {\n    left: pageOffset.x + rect.left + leftOffset\n  } : {\n    right: _window[\"default\"].innerWidth - rect.right - pageOffset.x + (rightOffset || 0)\n  });\n  var leftOrRight = anchorLeft ? 'left' : 'right';\n  if (pos[leftOrRight] && pos[leftOrRight] < 0) {\n    pos[leftOrRight] = padding;\n  } else if (pos[leftOrRight] && pos[leftOrRight] + childRect.width > _window[\"default\"].innerWidth) {\n    pos[leftOrRight] = _window[\"default\"].innerWidth - childRect.width - padding;\n  }\n  if (pos.top < 0) {\n    pos.top = padding;\n  } else if (pos.top + childRect.height > _window[\"default\"].innerHeight) {\n    pos.top = _window[\"default\"].innerHeight - childRect.height - padding;\n  }\n  return pos;\n};\nexports.getChildPos = getChildPos;\nif (_exenv.canUseDOM) {\n  if (document.body) {\n    addEventListeners();\n  } else {\n    document.addEventListener('DOMContentLoaded', addEventListeners);\n  }\n}\nvar listenerIdCounter = 0;\nfunction subscribe(fn) {\n  listenerIdCounter += 1;\n  var id = listenerIdCounter;\n  listeners[id] = fn;\n  return function () {\n    return delete listeners[id];\n  };\n}\nvar defaultModalStyle = {\n  content: {\n    top: 0,\n    left: 0,\n    border: 0,\n    right: 'auto',\n    bottom: 'auto',\n    padding: '0px 0px 0px 0px'\n  },\n  overlay: {\n    right: 'auto',\n    bottom: 'auto',\n    width: '100vw',\n    height: '100vh',\n    backgroundColor: 'rgba(0, 0, 0, 0)'\n  }\n};\nvar WINDOW_PAD = 40;\nvar noop = function noop() {};\nvar Portaled = /*#__PURE__*/function (_Component) {\n  (0, _inherits2[\"default\"])(Portaled, _Component);\n  var _super = _createSuper(Portaled);\n  function Portaled() {\n    var _this;\n    (0, _classCallCheck2[\"default\"])(this, Portaled);\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _super.call.apply(_super, [this].concat(args));\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"state\", {\n      pos: null,\n      isVisible: false\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"unsubscribe\", undefined);\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"_unmounted\", false);\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"element\", /*#__PURE__*/(0, _react.createRef)());\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"child\", /*#__PURE__*/(0, _react.createRef)());\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"handleScroll\", function () {\n      if (_this.child.current && _this.element.current) {\n        var rect = _this.element.current.getBoundingClientRect();\n        var childRect = _this.child.current.getBoundingClientRect();\n        var pageOffset = getPageOffset();\n        var _this$props = _this.props,\n          topOffset = _this$props.top,\n          _this$props$left = _this$props.left,\n          leftOffset = _this$props$left === void 0 ? 0 : _this$props$left,\n          rightOffset = _this$props.right;\n        var pos = getChildPos({\n          offsets: {\n            topOffset: topOffset,\n            leftOffset: leftOffset,\n            rightOffset: rightOffset\n          },\n          rect: rect,\n          childRect: childRect,\n          pageOffset: pageOffset,\n          padding: WINDOW_PAD\n        });\n        if (!(0, _lodash2[\"default\"])(pos, _this.state.pos)) {\n          _this.setState({\n            pos: pos\n          });\n        }\n      }\n    });\n    return _this;\n  }\n  (0, _createClass2[\"default\"])(Portaled, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      // relative\n      this.unsubscribe = subscribe(this.handleScroll);\n      this.handleScroll();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var _this2 = this;\n      var didOpen = this.props.isOpened && !prevProps.isOpened;\n      var didClose = !this.props.isOpened && prevProps.isOpened;\n      if (didOpen || didClose) {\n        _window[\"default\"].requestAnimationFrame(function () {\n          if (_this2._unmounted) return;\n          _this2.setState({\n            isVisible: Boolean(didOpen)\n          });\n        });\n      }\n      this.handleScroll();\n    } // ColorPicker will throw a cross-origin error when it is closed\n    // when the app is within an iframe.\n    // This is a known issue of react-color component:\n    // see: https://github.com/casesandberg/react-color/issues/806\n  }, {\n    key: \"componentDidCatch\",\n    value: function componentDidCatch() {// Do nothing here, since React will try to recreate this component\n      // tree from scratch using the error boundary, which is this component\n      // itself. This is a temporal fix for a crash.\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this._unmounted = true; // @ts-ignore\n\n      this.unsubscribe();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n      var _this$props2 = this.props,\n        Comp = _this$props2.component,\n        overlayZIndex = _this$props2.overlayZIndex,\n        isOpened = _this$props2.isOpened,\n        onClose = _this$props2.onClose,\n        children = _this$props2.children,\n        modalProps = _this$props2.modalProps,\n        _this$props2$modalSty = _this$props2.modalStyle,\n        modalStyle = _this$props2$modalSty === void 0 ? {} : _this$props2$modalSty;\n      var _this$state = this.state,\n        isVisible = _this$state.isVisible,\n        pos = _this$state.pos;\n      var newModalStyle = _objectSpread(_objectSpread({}, defaultModalStyle), {}, {\n        content: _objectSpread({}, modalStyle.content || {}),\n        overlay: _objectSpread(_objectSpread(_objectSpread({}, defaultModalStyle.overlay), modalStyle.overlay || {}), {}, {\n          // needs to be on top of existing modal\n          zIndex: overlayZIndex || 9999\n        })\n      });\n      return /*#__PURE__*/_react[\"default\"].createElement(_context.RootContext.Consumer, null, function (context) {\n        return /*#__PURE__*/_react[\"default\"].createElement(Comp, {\n          ref: _this3.element\n        }, isOpened ? /*#__PURE__*/_react[\"default\"].createElement(_reactModal[\"default\"], (0, _extends2[\"default\"])({\n          className: \"modal-portal\"\n        }, modalProps, {\n          ariaHideApp: false,\n          isOpen: true,\n          style: newModalStyle,\n          parentSelector: function parentSelector() {\n            // React modal issue: https://github.com/reactjs/react-modal/issues/769\n            // failed to execute removeChild on parent node when it is already unmounted\n            return context && context.current || document.body;\n          },\n          onRequestClose: onClose\n        }), /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n          className: \"portaled-content\",\n          key: \"item\",\n          style: _objectSpread({\n            position: 'fixed',\n            opacity: isVisible ? 1 : 0,\n            transition: _this3.props.theme.transitionFast,\n            marginTop: isVisible ? '0px' : '14px'\n          }, pos)\n        }, /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n          ref: _this3.child,\n          style: {\n            position: 'absolute',\n            zIndex: overlayZIndex ? overlayZIndex + 1 : 10000\n          }\n        }, children))) : null);\n      });\n    }\n  }], [{\n    key: \"getDerivedStateFromError\",\n    value:\n    // Make Portaled a component with Error Boundary, so React can recreate\n    // this component if the child 'ColorPicker' throws cross-origin error.\n    // see function componentDidCatch()\n    function getDerivedStateFromError() {\n      return {\n        hasError: true\n      };\n    }\n  }]);\n  return Portaled;\n}(_react.Component);\n(0, _defineProperty2[\"default\"])(Portaled, \"defaultProps\", {\n  component: 'div',\n  onClose: noop,\n  theme: _styles.theme\n});\nvar _default = (0, _styledComponents.withTheme)(Portaled);\nexports[\"default\"] = _default;","map":{"version":3,"names":["value","exports","getChildPos","_extends2","_interopRequireDefault","require","_classCallCheck2","_createClass2","_assertThisInitialized2","_inherits2","_possibleConstructorReturn2","_getPrototypeOf2","_exenv","_styledComponents","_context","_reactModal","_window","_styles","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","result","NewTarget","constructor","Reflect","construct","arguments","apply","ownKeys","document","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","_objectSpread","target","i","length","source","forEach","key","_defineProperty2","getOwnPropertyDescriptors","defineProperties","defineProperty","listeners","startListening","getPageOffset","childRect","x","pageXOffset","undefined","documentElement","body","parentNode","scrollLeft","y","pageYOffset","scrollTop","addEventListener","_lodash","leading","offsets","_ref","rect","pageOffset","padding","leftOffset","rightOffset","anchorLeft","pos","left","leftOrRight","width","innerWidth","top","height","innerHeight","canUseDOM","addEventListeners","listenerIdCounter","subscribe","bottom","fn","id","WINDOW_PAD","noop","Portaled","_len","args","Array","_key","_this","_super","call","concat","isVisible","_react","createRef","child","current","element","getBoundingClientRect","_this$props","props","topOffset","_this$props$left","_lodash2","state","componentDidMount","handleScroll","componentDidUpdate","prevProps","isOpened","didOpen","didClose","requestAnimationFrame","setState","Boolean","componentDidCatch","componentWillUnmount","_unmounted","unsubscribe","render","_this3","Comp","_this$props2","component","overlayZIndex","onClose","children","modalProps","_this$props2$modalSty","modalStyle","_this$state","newModalStyle","defaultModalStyle","content","overlay","zIndex","createElement","RootContext","Consumer","context","ref","className","ariaHideApp","isOpen","style","parentSelector","position","opacity","transition","theme","transitionFast","marginTop"],"sources":["/Users/rohinphukan/Desktop/RefugeeWebsite/node_modules/@kepler.gl/components/src/common/portaled.tsx"],"sourcesContent":["// Copyright (c) 2022 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\nimport React, {Component, createRef, ElementType, PropsWithChildren} from 'react';\nimport debounce from 'lodash.debounce';\nimport isEqual from 'lodash.isequal';\n\nimport {canUseDOM} from 'exenv';\nimport {withTheme} from 'styled-components';\nimport {RootContext} from '../context';\nimport Modal from 'react-modal';\nimport window from 'global/window';\nimport {theme} from '@kepler.gl/styles';\n\nconst listeners = {};\n\nconst startListening = () => Object.keys(listeners).forEach(key => listeners[key]());\n\nconst getPageOffset = () => ({\n  x:\n    window.pageXOffset !== undefined\n      ? window.pageXOffset\n      : (document.documentElement || document.body.parentNode || document.body).scrollLeft,\n  y:\n    window.pageYOffset !== undefined\n      ? window.pageYOffset\n      : (document.documentElement || document.body.parentNode || document.body).scrollTop\n});\n\nconst addEventListeners = () => {\n  if (document && document.body)\n    document.body.addEventListener('mousewheel', debounce(startListening, 100, {leading: true}));\n  window.addEventListener('resize', debounce(startListening, 50, {leading: true}));\n};\n\ninterface GetChildPosProps {\n  offsets: Partial<{\n    topOffset: number;\n    leftOffset: number;\n    rightOffset: number;\n  }>;\n  rect: DOMRect;\n  childRect: DOMRect;\n  pageOffset: {\n    x: number;\n    y: number;\n  };\n  padding: number;\n}\n\nexport const getChildPos = ({offsets, rect, childRect, pageOffset, padding}: GetChildPosProps) => {\n  const {topOffset, leftOffset, rightOffset} = offsets;\n\n  const anchorLeft = leftOffset !== undefined;\n  const pos = {\n    top: pageOffset.y + rect.top + (topOffset || 0),\n    ...(anchorLeft\n      ? {left: pageOffset.x + rect.left + leftOffset!}\n      : {right: window.innerWidth - rect.right - pageOffset.x + (rightOffset || 0)})\n  };\n\n  const leftOrRight = anchorLeft ? 'left' : 'right';\n\n  if (pos[leftOrRight] && pos[leftOrRight] < 0) {\n    pos[leftOrRight] = padding;\n  } else if (pos[leftOrRight] && pos[leftOrRight] + childRect.width > window.innerWidth) {\n    pos[leftOrRight] = window.innerWidth - childRect.width - padding;\n  }\n\n  if (pos.top < 0) {\n    pos.top = padding;\n  } else if (pos.top + childRect.height > window.innerHeight) {\n    pos.top = window.innerHeight - childRect.height - padding;\n  }\n\n  return pos;\n};\n\nif (canUseDOM) {\n  if (document.body) {\n    addEventListeners();\n  } else {\n    document.addEventListener('DOMContentLoaded', addEventListeners);\n  }\n}\n\nlet listenerIdCounter = 0;\nfunction subscribe(fn) {\n  listenerIdCounter += 1;\n  const id = listenerIdCounter;\n  listeners[id] = fn;\n  return () => delete listeners[id];\n}\n\nconst defaultModalStyle = {\n  content: {\n    top: 0,\n    left: 0,\n    border: 0,\n    right: 'auto',\n    bottom: 'auto',\n    padding: '0px 0px 0px 0px'\n  },\n  overlay: {\n    right: 'auto',\n    bottom: 'auto',\n    width: '100vw',\n    height: '100vh',\n    backgroundColor: 'rgba(0, 0, 0, 0)'\n  }\n};\n\nconst WINDOW_PAD = 40;\n\nconst noop = () => {};\n\ntype PortaledProps = PropsWithChildren<{\n  component: ElementType;\n  onClose?: (\n    event: React.MouseEvent<Element, globalThis.MouseEvent> | React.KeyboardEvent<Element>\n  ) => void;\n  theme?: any;\n  isOpened?: boolean;\n  top: number;\n  left?: number;\n  right?: number;\n  overlayZIndex?: number;\n  modalProps?: Partial<ReactModal.Props>;\n  modalStyle?: Partial<typeof defaultModalStyle>;\n}>;\n\ninterface PortaledState {\n  pos:\n    | {\n        left: number;\n        top: number;\n      }\n    | {\n        right: number;\n        top: number;\n      }\n    | null;\n  isVisible: boolean;\n}\n\nclass Portaled extends Component<PortaledProps, PortaledState> {\n  // Make Portaled a component with Error Boundary, so React can recreate\n  // this component if the child 'ColorPicker' throws cross-origin error.\n  // see function componentDidCatch()\n  static getDerivedStateFromError() {\n    return {hasError: true};\n  }\n\n  static defaultProps = {\n    component: 'div',\n    onClose: noop,\n    theme\n  };\n\n  state = {\n    pos: null,\n    isVisible: false\n  };\n\n  unsubscribe: (() => boolean) | undefined = undefined;\n  _unmounted: boolean = false;\n\n  componentDidMount() {\n    // relative\n    this.unsubscribe = subscribe(this.handleScroll);\n    this.handleScroll();\n  }\n\n  componentDidUpdate(prevProps) {\n    const didOpen = this.props.isOpened && !prevProps.isOpened;\n    const didClose = !this.props.isOpened && prevProps.isOpened;\n    if (didOpen || didClose) {\n      window.requestAnimationFrame(() => {\n        if (this._unmounted) return;\n        this.setState({isVisible: Boolean(didOpen)});\n      });\n    }\n\n    this.handleScroll();\n  }\n\n  // ColorPicker will throw a cross-origin error when it is closed\n  // when the app is within an iframe.\n  // This is a known issue of react-color component:\n  // see: https://github.com/casesandberg/react-color/issues/806\n  componentDidCatch() {\n    // Do nothing here, since React will try to recreate this component\n    // tree from scratch using the error boundary, which is this component\n    // itself. This is a temporal fix for a crash.\n  }\n\n  componentWillUnmount() {\n    this._unmounted = true;\n    // @ts-ignore\n    this.unsubscribe();\n  }\n\n  element = createRef<HTMLDivElement>();\n  child = createRef<HTMLDivElement>();\n\n  // eslint-disable-next-line complexity\n  handleScroll = () => {\n    if (this.child.current && this.element.current) {\n      const rect = this.element.current.getBoundingClientRect();\n      const childRect = this.child.current.getBoundingClientRect();\n      const pageOffset = getPageOffset();\n      const {top: topOffset, left: leftOffset = 0, right: rightOffset} = this.props;\n\n      const pos = getChildPos({\n        offsets: {topOffset, leftOffset, rightOffset},\n        rect,\n        childRect,\n        pageOffset,\n        padding: WINDOW_PAD\n      });\n\n      if (!isEqual(pos, this.state.pos)) {\n        this.setState({pos});\n      }\n    }\n  };\n\n  render() {\n    const {\n      // relative\n      component: Comp,\n      overlayZIndex,\n      isOpened,\n      onClose,\n\n      // Modal\n      children,\n      modalProps,\n      modalStyle = {}\n    } = this.props;\n\n    const {isVisible, pos} = this.state;\n\n    const newModalStyle = {\n      ...defaultModalStyle,\n      content: {\n        ...(modalStyle.content || {})\n      },\n      overlay: {\n        ...defaultModalStyle.overlay,\n        ...(modalStyle.overlay || {}),\n        // needs to be on top of existing modal\n        zIndex: overlayZIndex || 9999\n      }\n    };\n\n    return (\n      <RootContext.Consumer>\n        {context => (\n          <Comp ref={this.element}>\n            {isOpened ? (\n              <Modal\n                className=\"modal-portal\"\n                {...modalProps}\n                ariaHideApp={false}\n                isOpen\n                style={newModalStyle}\n                parentSelector={() => {\n                  // React modal issue: https://github.com/reactjs/react-modal/issues/769\n                  // failed to execute removeChild on parent node when it is already unmounted\n                  return (context && context.current) || document.body;\n                }}\n                onRequestClose={onClose}\n              >\n                <div\n                  className=\"portaled-content\"\n                  key=\"item\"\n                  style={{\n                    position: 'fixed',\n                    opacity: isVisible ? 1 : 0,\n                    transition: this.props.theme.transitionFast,\n                    marginTop: isVisible ? '0px' : '14px',\n                    // @ts-ignore\n                    ...pos\n                  }}\n                >\n                  <div\n                    ref={this.child}\n                    style={{\n                      position: 'absolute',\n                      zIndex: overlayZIndex ? overlayZIndex + 1 : 10000\n                    }}\n                  >\n                    {children}\n                  </div>\n                </div>\n              </Modal>\n            ) : null}\n          </Comp>\n        )}\n      </RootContext.Consumer>\n    );\n  }\n}\n\nexport default withTheme(Portaled);\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}