{"ast":null,"code":"import _objectSpread from \"/Users/rohinphukan/Desktop/RefugeeWebsite/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _regeneratorRuntime from \"/Users/rohinphukan/Desktop/RefugeeWebsite/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/rohinphukan/Desktop/RefugeeWebsite/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { assert } from '@loaders.gl/loader-utils';\nimport parseImage from '../parsers/parse-image';\nimport { getImageSize } from '../category-api/parsed-image-api';\nimport { generateUrl } from './generate-url';\nimport { deepLoad, shallowLoad } from './deep-load';\nexport function loadImage(_x) {\n  return _loadImage.apply(this, arguments);\n}\nfunction _loadImage() {\n  _loadImage = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(getUrl) {\n    var options,\n      imageUrls,\n      _args = arguments;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          options = _args.length > 1 && _args[1] !== undefined ? _args[1] : {};\n          _context.next = 3;\n          return getImageUrls(getUrl, options);\n        case 3:\n          imageUrls = _context.sent;\n          _context.next = 6;\n          return deepLoad(imageUrls, parseImage, options);\n        case 6:\n          return _context.abrupt(\"return\", _context.sent);\n        case 7:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee);\n  }));\n  return _loadImage.apply(this, arguments);\n}\nexport function getImageUrls(_x2, _x3) {\n  return _getImageUrls.apply(this, arguments);\n}\nfunction _getImageUrls() {\n  _getImageUrls = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(getUrl, options) {\n    var urlOptions,\n      mipLevels,\n      _args2 = arguments;\n    return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          urlOptions = _args2.length > 2 && _args2[2] !== undefined ? _args2[2] : {};\n          mipLevels = options && options.image && options.image.mipLevels || 0;\n          if (!(mipLevels !== 0)) {\n            _context2.next = 8;\n            break;\n          }\n          _context2.next = 5;\n          return getMipmappedImageUrls(getUrl, mipLevels, options, urlOptions);\n        case 5:\n          _context2.t0 = _context2.sent;\n          _context2.next = 9;\n          break;\n        case 8:\n          _context2.t0 = generateUrl(getUrl, options, urlOptions);\n        case 9:\n          return _context2.abrupt(\"return\", _context2.t0);\n        case 10:\n        case \"end\":\n          return _context2.stop();\n      }\n    }, _callee2);\n  }));\n  return _getImageUrls.apply(this, arguments);\n}\nfunction getMipmappedImageUrls(_x4, _x5, _x6, _x7) {\n  return _getMipmappedImageUrls.apply(this, arguments);\n}\nfunction _getMipmappedImageUrls() {\n  _getMipmappedImageUrls = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3(getUrl, mipLevels, options, urlOptions) {\n    var urls, url, image, _getImageSize, width, height, mipLevel, _url;\n    return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n      while (1) switch (_context3.prev = _context3.next) {\n        case 0:\n          urls = [];\n          if (!(mipLevels === 'auto')) {\n            _context3.next = 9;\n            break;\n          }\n          url = generateUrl(getUrl, options, _objectSpread(_objectSpread({}, urlOptions), {}, {\n            lod: 0\n          }));\n          _context3.next = 5;\n          return shallowLoad(url, parseImage, options);\n        case 5:\n          image = _context3.sent;\n          _getImageSize = getImageSize(image), width = _getImageSize.width, height = _getImageSize.height;\n          mipLevels = getMipLevels({\n            width: width,\n            height: height\n          });\n          urls.push(url);\n        case 9:\n          assert(mipLevels > 0);\n          for (mipLevel = urls.length; mipLevel < mipLevels; ++mipLevel) {\n            _url = generateUrl(getUrl, options, _objectSpread(_objectSpread({}, urlOptions), {}, {\n              lod: mipLevel\n            }));\n            urls.push(_url);\n          }\n          return _context3.abrupt(\"return\", urls);\n        case 12:\n        case \"end\":\n          return _context3.stop();\n      }\n    }, _callee3);\n  }));\n  return _getMipmappedImageUrls.apply(this, arguments);\n}\nexport function getMipLevels(_ref) {\n  var width = _ref.width,\n    height = _ref.height;\n  return 1 + Math.floor(Math.log2(Math.max(width, height)));\n}","map":{"version":3,"names":["assert","parseImage","getImageSize","generateUrl","deepLoad","shallowLoad","loadImage","_x","_loadImage","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","getUrl","options","imageUrls","_args","wrap","_callee$","_context","prev","next","length","undefined","getImageUrls","sent","abrupt","stop","_x2","_x3","_getImageUrls","_callee2","urlOptions","mipLevels","_args2","_callee2$","_context2","image","getMipmappedImageUrls","t0","_x4","_x5","_x6","_x7","_getMipmappedImageUrls","_callee3","urls","url","_getImageSize","width","height","mipLevel","_url","_callee3$","_context3","_objectSpread","lod","getMipLevels","push","_ref","Math","floor","log2","max"],"sources":["/Users/rohinphukan/Desktop/RefugeeWebsite/node_modules/@loaders.gl/images/src/lib/texture-api/load-image.ts"],"sourcesContent":["import {assert} from '@loaders.gl/loader-utils';\nimport parseImage from '../parsers/parse-image';\nimport {getImageSize} from '../category-api/parsed-image-api';\nimport {generateUrl} from './generate-url';\nimport {deepLoad, shallowLoad} from './deep-load';\n\nexport async function loadImage(getUrl, options = {}) {\n  const imageUrls = await getImageUrls(getUrl, options);\n  return await deepLoad(imageUrls, parseImage, options);\n}\n\nexport async function getImageUrls(getUrl, options, urlOptions = {}) {\n  const mipLevels = (options && options.image && options.image.mipLevels) || 0;\n  return mipLevels !== 0\n    ? await getMipmappedImageUrls(getUrl, mipLevels, options, urlOptions)\n    : generateUrl(getUrl, options, urlOptions);\n}\n\nasync function getMipmappedImageUrls(getUrl, mipLevels, options, urlOptions) {\n  const urls: string[] = [];\n\n  // If no mip levels supplied, we need to load the level 0 image and calculate based on size\n  if (mipLevels === 'auto') {\n    const url = generateUrl(getUrl, options, {...urlOptions, lod: 0});\n    const image = await shallowLoad(url, parseImage, options);\n\n    const {width, height} = getImageSize(image);\n    mipLevels = getMipLevels({width, height});\n\n    // TODO - push image and make `deepLoad` pass through non-url values, avoid loading twice?\n    urls.push(url);\n  }\n\n  // We now know how many mipLevels we need, remaining image urls can now be constructed\n  assert(mipLevels > 0);\n\n  for (let mipLevel = urls.length; mipLevel < mipLevels; ++mipLevel) {\n    const url = generateUrl(getUrl, options, {...urlOptions, lod: mipLevel});\n    urls.push(url);\n  }\n\n  return urls;\n}\n\n// Calculates number of mipmaps based on texture size (log2)\nexport function getMipLevels({width, height}) {\n  return 1 + Math.floor(Math.log2(Math.max(width, height)));\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}