{"ast":null,"code":"import _objectSpread from \"/Users/rohinphukan/Desktop/RefugeeWebsite/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _regeneratorRuntime from \"/Users/rohinphukan/Desktop/RefugeeWebsite/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/rohinphukan/Desktop/RefugeeWebsite/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nexport function makeStream(source, options) {\n  var iterator = source[Symbol.asyncIterator] ? source[Symbol.asyncIterator]() : source[Symbol.iterator]();\n  return new ReadableStream({\n    type: 'bytes',\n    pull: function pull(controller) {\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var _yield$iterator$next, done, value;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return iterator.next();\n            case 3:\n              _yield$iterator$next = _context.sent;\n              done = _yield$iterator$next.done;\n              value = _yield$iterator$next.value;\n              if (done) {\n                controller.close();\n              } else {\n                controller.enqueue(new Uint8Array(value));\n              }\n              _context.next = 12;\n              break;\n            case 9:\n              _context.prev = 9;\n              _context.t0 = _context[\"catch\"](0);\n              controller.error(_context.t0);\n            case 12:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, null, [[0, 9]]);\n      }))();\n    },\n    cancel: function cancel() {\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        var _iterator$return;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return iterator === null || iterator === void 0 ? void 0 : (_iterator$return = iterator.return) === null || _iterator$return === void 0 ? void 0 : _iterator$return.call(iterator);\n            case 2:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2);\n      }))();\n    }\n  }, _objectSpread({\n    highWaterMark: Math.pow(2, 24)\n  }, options));\n}","map":{"version":3,"names":["makeStream","source","options","iterator","Symbol","asyncIterator","ReadableStream","type","pull","controller","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_yield$iterator$next","done","value","wrap","_callee$","_context","prev","next","sent","close","enqueue","Uint8Array","t0","error","stop","cancel","_callee2","_iterator$return","_callee2$","_context2","return","call","_objectSpread","highWaterMark","Math","pow"],"sources":["/Users/rohinphukan/Desktop/RefugeeWebsite/node_modules/@kepler.gl/processors/node_modules/@loaders.gl/core/src/iterators/make-stream/make-dom-stream.ts"],"sourcesContent":["export type MakeStreamOptions = {\n  /** Stream allocates an arrayBuffer. Enables use of a default reader. */\n  autoAllocateChunkSize?: number;\n  /** Total number of chunks in queue before back pressure is applied */\n  highWaterMark?: number;\n};\n\n/**\n * Builds a DOM stream from an iterator\n * This stream is currently used in browsers only,\n * but note that Web stream support is present in Node from Node 16\n * https://nodejs.org/api/webstreams.html#webstreams_web_streams_api\n */\nexport function makeStream<ArrayBuffer>(\n  source: Iterable<ArrayBuffer> | AsyncIterable<ArrayBuffer>,\n  options?: MakeStreamOptions\n): ReadableStream {\n  const iterator = source[Symbol.asyncIterator]\n    ? (source as AsyncIterable<ArrayBuffer>)[Symbol.asyncIterator]()\n    : (source as Iterable<ArrayBuffer>)[Symbol.iterator]();\n\n  return new ReadableStream<Uint8Array>(\n    {\n      // Create a byte stream (enables `Response(stream).arrayBuffer()`)\n      // Only supported on Chrome\n      // See: https://developer.mozilla.org/en-US/docs/Web/API/ReadableByteStreamController\n      type: 'bytes',\n\n      async pull(controller) {\n        try {\n          const {done, value} = await iterator.next();\n          if (done) {\n            controller.close();\n          } else {\n            // TODO - ignores controller.desiredSize\n            // @ts-expect-error Unclear why value is not correctly typed\n            controller.enqueue(new Uint8Array(value));\n          }\n        } catch (error) {\n          controller.error(error);\n        }\n      },\n\n      async cancel() {\n        await iterator?.return?.();\n      }\n    },\n    // options: QueingStrategy<Uint8Array>\n    {\n      // This is bytes, not chunks\n      highWaterMark: 2 ** 24,\n      ...options\n    }\n  );\n}\n"],"mappings":";;;AAaA,OAAO,SAASA,UAAUA,CACxBC,MAA0D,EAC1DC,OAA2B,EACX;EAChB,IAAMC,QAAQ,GAAGF,MAAM,CAACG,MAAM,CAACC,aAAa,CAAC,GACxCJ,MAAM,CAAgCG,MAAM,CAACC,aAAa,CAAC,EAAE,GAC7DJ,MAAM,CAA2BG,MAAM,CAACD,QAAQ,CAAC,EAAE;EAExD,OAAO,IAAIG,cAAc,CACvB;IAIEC,IAAI,EAAE,OAAO;IAEPC,IAAI,WAAAA,KAACC,UAAU,EAAE;MAAA,OAAAC,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,UAAAC,QAAA;QAAA,IAAAC,oBAAA,EAAAC,IAAA,EAAAC,KAAA;QAAA,OAAAL,mBAAA,GAAAM,IAAA,UAAAC,SAAAC,QAAA;UAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;YAAA;cAAAF,QAAA,CAAAC,IAAA;cAAAD,QAAA,CAAAE,IAAA;cAAA,OAESlB,QAAQ,CAACkB,IAAI,EAAE;YAAA;cAAAP,oBAAA,GAAAK,QAAA,CAAAG,IAAA;cAApCP,IAAI,GAAAD,oBAAA,CAAJC,IAAI;cAAEC,KAAA,GAAAF,oBAAA,CAAAE,KAAA;cACb,IAAID,IAAI,EAAE;gBACRN,UAAU,CAACc,KAAK,EAAE;cACpB,CAAC,MAAM;gBAGLd,UAAU,CAACe,OAAO,CAAC,IAAIC,UAAU,CAACT,KAAK,CAAC,CAAC;cAC3C;cAAAG,QAAA,CAAAE,IAAA;cAAA;YAAA;cAAAF,QAAA,CAAAC,IAAA;cAAAD,QAAA,CAAAO,EAAA,GAAAP,QAAA;cAEAV,UAAU,CAACkB,KAAK,CAAAR,QAAA,CAAAO,EAAA,CAAO;YAAA;YAAA;cAAA,OAAAP,QAAA,CAAAS,IAAA;UAAA;QAAA,GAAAf,OAAA;MAAA;IAE3B,CAAC;IAEKgB,MAAM,WAAAA,OAAA,EAAG;MAAA,OAAAnB,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,UAAAkB,SAAA;QAAA,IAAAC,gBAAA;QAAA,OAAApB,mBAAA,GAAAM,IAAA,UAAAe,UAAAC,SAAA;UAAA,kBAAAA,SAAA,CAAAb,IAAA,GAAAa,SAAA,CAAAZ,IAAA;YAAA;cAAAY,SAAA,CAAAZ,IAAA;cAAA,OACPlB,QAAQ,aAARA,QAAQ,wBAAA4B,gBAAA,GAAR5B,QAAQ,CAAE+B,MAAM,cAAAH,gBAAA,uBAAhBA,gBAAA,CAAAI,IAAA,CAAAhC,QAAQ,CAAY;YAAA;YAAA;cAAA,OAAA8B,SAAA,CAAAL,IAAA;UAAA;QAAA,GAAAE,QAAA;MAAA;IAC5B;EACF,CAAC,EAAAM,aAAA;IAICC,aAAa,EAAAC,IAAA,CAAAC,GAAA,CAAE,CAAC,EAAI,EAAE;EAAA,GACnBrC,OAAA,EAEN;AACH"},"metadata":{},"sourceType":"module","externalDependencies":[]}