{"ast":null,"code":"import _regeneratorRuntime from \"/Users/rohinphukan/Desktop/RefugeeWebsite/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/rohinphukan/Desktop/RefugeeWebsite/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { global, isBrowser, isWorker } from '../env-utils/globals';\nimport * as node from '../node/require-utils.node';\nimport { assert } from '../env-utils/assert';\nimport { VERSION as __VERSION__ } from '../env-utils/version';\nvar LATEST = 'latest';\nvar VERSION = typeof \"3.3.1\" !== 'undefined' ? \"3.3.1\" : LATEST;\nvar loadLibraryPromises = {};\nexport function loadLibrary(_x) {\n  return _loadLibrary.apply(this, arguments);\n}\nfunction _loadLibrary() {\n  _loadLibrary = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(libraryUrl) {\n    var moduleName,\n      options,\n      _args = arguments;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          moduleName = _args.length > 1 && _args[1] !== undefined ? _args[1] : null;\n          options = _args.length > 2 && _args[2] !== undefined ? _args[2] : {};\n          if (moduleName) {\n            libraryUrl = getLibraryUrl(libraryUrl, moduleName, options);\n          }\n          loadLibraryPromises[libraryUrl] = loadLibraryPromises[libraryUrl] || loadLibraryFromFile(libraryUrl);\n          _context.next = 6;\n          return loadLibraryPromises[libraryUrl];\n        case 6:\n          return _context.abrupt(\"return\", _context.sent);\n        case 7:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee);\n  }));\n  return _loadLibrary.apply(this, arguments);\n}\nexport function getLibraryUrl(library, moduleName, options) {\n  if (library.startsWith('http')) {\n    return library;\n  }\n  var modules = options.modules || {};\n  if (modules[library]) {\n    return modules[library];\n  }\n  if (!isBrowser) {\n    return \"modules/\".concat(moduleName, \"/dist/libs/\").concat(library);\n  }\n  if (options.CDN) {\n    assert(options.CDN.startsWith('http'));\n    return \"\".concat(options.CDN, \"/\").concat(moduleName, \"@\").concat(VERSION, \"/dist/libs/\").concat(library);\n  }\n  if (isWorker) {\n    return \"../src/libs/\".concat(library);\n  }\n  return \"modules/\".concat(moduleName, \"/src/libs/\").concat(library);\n}\nfunction loadLibraryFromFile(_x2) {\n  return _loadLibraryFromFile.apply(this, arguments);\n}\nfunction _loadLibraryFromFile() {\n  _loadLibraryFromFile = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(libraryUrl) {\n    var _response, response, scriptSource;\n    return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          if (!libraryUrl.endsWith('wasm')) {\n            _context2.next = 7;\n            break;\n          }\n          _context2.next = 3;\n          return fetch(libraryUrl);\n        case 3:\n          _response = _context2.sent;\n          _context2.next = 6;\n          return _response.arrayBuffer();\n        case 6:\n          return _context2.abrupt(\"return\", _context2.sent);\n        case 7:\n          if (isBrowser) {\n            _context2.next = 20;\n            break;\n          }\n          _context2.prev = 8;\n          _context2.t0 = node && node.requireFromFile;\n          if (!_context2.t0) {\n            _context2.next = 14;\n            break;\n          }\n          _context2.next = 13;\n          return node.requireFromFile(libraryUrl);\n        case 13:\n          _context2.t0 = _context2.sent;\n        case 14:\n          return _context2.abrupt(\"return\", _context2.t0);\n        case 17:\n          _context2.prev = 17;\n          _context2.t1 = _context2[\"catch\"](8);\n          return _context2.abrupt(\"return\", null);\n        case 20:\n          if (!isWorker) {\n            _context2.next = 22;\n            break;\n          }\n          return _context2.abrupt(\"return\", importScripts(libraryUrl));\n        case 22:\n          _context2.next = 24;\n          return fetch(libraryUrl);\n        case 24:\n          response = _context2.sent;\n          _context2.next = 27;\n          return response.text();\n        case 27:\n          scriptSource = _context2.sent;\n          return _context2.abrupt(\"return\", loadLibraryFromString(scriptSource, libraryUrl));\n        case 29:\n        case \"end\":\n          return _context2.stop();\n      }\n    }, _callee2, null, [[8, 17]]);\n  }));\n  return _loadLibraryFromFile.apply(this, arguments);\n}\nfunction loadLibraryFromString(scriptSource, id) {\n  if (!isBrowser) {\n    return node.requireFromString && node.requireFromString(scriptSource, id);\n  }\n  if (isWorker) {\n    eval.call(global, scriptSource);\n    return null;\n  }\n  var script = document.createElement('script');\n  script.id = id;\n  try {\n    script.appendChild(document.createTextNode(scriptSource));\n  } catch (e) {\n    script.text = scriptSource;\n  }\n  document.body.appendChild(script);\n  return null;\n}","map":{"version":3,"names":["global","isBrowser","isWorker","node","assert","VERSION","__VERSION__","LATEST","loadLibraryPromises","loadLibrary","_x","_loadLibrary","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","libraryUrl","moduleName","options","_args","wrap","_callee$","_context","prev","next","length","undefined","getLibraryUrl","loadLibraryFromFile","abrupt","sent","stop","library","startsWith","modules","concat","CDN","_x2","_loadLibraryFromFile","_callee2","_response","response","scriptSource","_callee2$","_context2","endsWith","fetch","arrayBuffer","t0","requireFromFile","t1","importScripts","text","loadLibraryFromString","id","requireFromString","eval","call","script","document","createElement","appendChild","createTextNode","e","body"],"sources":["/Users/rohinphukan/Desktop/RefugeeWebsite/node_modules/@loaders.gl/worker-utils/src/lib/library-utils/library-utils.ts"],"sourcesContent":["/* global importScripts */\nimport {global, isBrowser, isWorker} from '../env-utils/globals';\nimport * as node from '../node/require-utils.node';\nimport {assert} from '../env-utils/assert';\nimport {VERSION as __VERSION__} from '../env-utils/version';\n\n/**\n * TODO - unpkg.com doesn't seem to have a `latest` specifier for alpha releases...\n * 'beta' on beta branch, 'latest' on prod branch\n */\nconst LATEST = 'latest';\nconst VERSION = typeof __VERSION__ !== 'undefined' ? __VERSION__ : LATEST;\n\nconst loadLibraryPromises: Record<string, Promise<any>> = {}; // promises\n\n/**\n * Dynamically loads a library (\"module\")\n *\n * - wasm library: Array buffer is returned\n * - js library: Parse JS is returned\n *\n * Method depends on environment\n * - browser - script element is created and installed on document\n * - worker - eval is called on global context\n * - node - file is required\n *\n * @param libraryUrl\n * @param moduleName\n * @param options\n */\nexport async function loadLibrary(\n  libraryUrl: string,\n  moduleName: string | null = null,\n  options: object = {}\n): Promise<any> {\n  if (moduleName) {\n    libraryUrl = getLibraryUrl(libraryUrl, moduleName, options);\n  }\n\n  // Ensure libraries are only loaded once\n\n  loadLibraryPromises[libraryUrl] =\n    // eslint-disable-next-line @typescript-eslint/no-misused-promises\n    loadLibraryPromises[libraryUrl] || loadLibraryFromFile(libraryUrl);\n  return await loadLibraryPromises[libraryUrl];\n}\n\n// TODO - sort out how to resolve paths for main/worker and dev/prod\nexport function getLibraryUrl(library: string, moduleName?: string, options?: any): string {\n  // Check if already a URL\n  if (library.startsWith('http')) {\n    return library;\n  }\n\n  // Allow application to import and supply libraries through `options.modules`\n  const modules = options.modules || {};\n  if (modules[library]) {\n    return modules[library];\n  }\n\n  // Load from local files, not from CDN scripts in Node.js\n  // TODO - needs to locate the modules directory when installed!\n  if (!isBrowser) {\n    return `modules/${moduleName}/dist/libs/${library}`;\n  }\n\n  // In browser, load from external scripts\n  if (options.CDN) {\n    assert(options.CDN.startsWith('http'));\n    return `${options.CDN}/${moduleName}@${VERSION}/dist/libs/${library}`;\n  }\n\n  // TODO - loading inside workers requires paths relative to worker script location...\n  if (isWorker) {\n    return `../src/libs/${library}`;\n  }\n\n  return `modules/${moduleName}/src/libs/${library}`;\n}\n\nasync function loadLibraryFromFile(libraryUrl: string): Promise<any> {\n  if (libraryUrl.endsWith('wasm')) {\n    const response = await fetch(libraryUrl);\n    return await response.arrayBuffer();\n  }\n\n  if (!isBrowser) {\n    try {\n      return node && node.requireFromFile && (await node.requireFromFile(libraryUrl));\n    } catch {\n      return null;\n    }\n  }\n  if (isWorker) {\n    return importScripts(libraryUrl);\n  }\n  // TODO - fix - should be more secure than string parsing since observes CORS\n  // if (isBrowser) {\n  //   return await loadScriptFromFile(libraryUrl);\n  // }\n\n  const response = await fetch(libraryUrl);\n  const scriptSource = await response.text();\n  return loadLibraryFromString(scriptSource, libraryUrl);\n}\n\n/*\nasync function loadScriptFromFile(libraryUrl) {\n  const script = document.createElement('script');\n  script.src = libraryUrl;\n  return await new Promise((resolve, reject) => {\n    script.onload = data => {\n      resolve(data);\n    };\n    script.onerror = reject;\n  });\n}\n*/\n\n// TODO - Needs security audit...\n//  - Raw eval call\n//  - Potentially bypasses CORS\n// Upside is that this separates fetching and parsing\n// we could create a`LibraryLoader` or`ModuleLoader`\nfunction loadLibraryFromString(scriptSource: string, id: string): null | any {\n  if (!isBrowser) {\n    return node.requireFromString && node.requireFromString(scriptSource, id);\n  }\n\n  if (isWorker) {\n    // Use lvalue trick to make eval run in global scope\n    eval.call(global, scriptSource); // eslint-disable-line no-eval\n    // https://stackoverflow.com/questions/9107240/1-evalthis-vs-evalthis-in-javascript\n    // http://perfectionkills.com/global-eval-what-are-the-options/\n    return null;\n  }\n\n  const script = document.createElement('script');\n  script.id = id;\n  // most browsers like a separate text node but some throw an error. The second method covers those.\n  try {\n    script.appendChild(document.createTextNode(scriptSource));\n  } catch (e) {\n    script.text = scriptSource;\n  }\n  document.body.appendChild(script);\n  return null;\n}\n\n// TODO - technique for module injection into worker, from THREE.DracoLoader...\n/*\nfunction combineWorkerWithLibrary(worker, jsContent) {\n  var fn = wWorker.toString();\n  var body = [\n    '// injected',\n    jsContent,\n    '',\n    '// worker',\n    fn.substring(fn.indexOf('{') + 1, fn.lastIndexOf('}'))\n  ].join('\\n');\n  this.workerSourceURL = URL.createObjectURL(new Blob([body]));\n}\n*/\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}